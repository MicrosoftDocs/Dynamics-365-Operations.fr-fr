---
title: "Déterminez la combinaison optimale de chevauchement des remises"
description: "Lorsque les remises se chevauchent, vous devez déterminer la combinaison de chevauchement les remises qui produisent le plus petit total de la transaction ou la remise totale la plus élevée. Lorsque le montant de remise varie selon le prix des produits achetés, par exemple dans le « achat commun 1, obtenez 1 % x arrondi » (BOGO) de la remise au détail, ce processus devient un problème d&quot;optimisation combinatoire."
author: kfend
manager: AnnBe
ms.date: 04/04/2017
ms.topic: article
ms.prod: 
ms.service: Dynamics365Operations
ms.technology: 
audience: Application User, IT Pro
ms.reviewer: kfend
ms.search.scope: AX 7.0.0, Operations, Core
ms.custom: 89643
ms.assetid: 09843c9a-3e19-4e4a-a8ce-80650f2095f9
ms.search.region: global
ms.search.industry: Retail
ms.author: kfend
ms.search.validFrom: 2016-05-31
ms.dyn365.ops.version: AX 7.0.1
translationtype: Human Translation
ms.sourcegitcommit: 0c6a7bdc4ba82dd57ab3e395e6dfb0ae4de31fc4
ms.openlocfilehash: 31e5104045ed5b8fbfa3677a7f5702d551de4231
ms.lasthandoff: 03/31/2017


---

# <a name="determine-the-optimal-combination-of-overlapping-discounts"></a>Déterminez la combinaison optimale de chevauchement des remises

Lorsque les remises se chevauchent, vous devez déterminer la combinaison de chevauchement les remises qui produisent le plus petit total de la transaction ou la remise totale la plus élevée. Lorsque le montant de remise varie selon le prix des produits achetés, par exemple dans le « achat commun 1, obtenez 1 % x arrondi » (BOGO) de la remise au détail, ce processus devient un problème d'optimisation combinatoire.

Cet article applique à Microsoft Dynamics AX 2012 R3 avec la Base de connaissances 3105973 (lancée le 2 novembre 2015) ou ultérieurement, et au lancement de février 2016 de Microsoft Dynamics AX. Pour déterminer la combinaison chevauchant des remises à appliquer en temps voulu, et pour continuer à fournir le riche escomptant la fonction disponible dans Microsoft Dynamics AX for Retail, il ne reste présente une méthode pour appliquer des remises se chevauchantes. Nous appelons cette nouvelle méthode ** classement de valeur marginale **. Le classement de valeur marginale est utilisé lorsque le temps requis afin d'évaluer les combinaisons possibles de chevauchement des remises dépasse un seuil configurable sur ** les paramètres des ventes au détail ** la page dans Dynamics AX. Dans la méthode de classement de valeur marginale, une valeur est calculée pour chaque remise en chevauchement à l'aide de la valeur de la remise sur les produits partagés. Les remises chevauchées sont ensuite appliquées de la valeur associée la plus élevée à la valeur associée la plus faible. Pour plus d'informations sur la nouvelle méthode, voir la section « valeur marginale », plus loin dans cet article. Le classement de valeur marginale n'est pas utilisé lorsque les montants de remise pour un produit ne sont pas affectés par un autre produit dans la transaction. Par exemple, cette méthode n'est pas utilisée pour deux remises simples, ou d'une remise simple et une remise unique de la quantité de produits.

## <a name="discount-examples"></a>Exemples de remise
Dans Dynamics AX, vous pouvez créer un nombre illimité de remises au détail sur un ensemble courant de produits. Toutefois, car il n'y a aucune limite, les problèmes de performances peuvent survenir lorsque vous essayez de calculer les remises qui doivent être utilisées sur les différents produits. Les exemples suivants illustrent ce problème plus en détail. Dans l'exemple 1, nous commençons par deux produits et deux remises se chevauchantes. Puis, dans l'exemple 2, il affiche la manière dont le problème évolue comme plus de produits sont ajoutés.

### <a name="example-1-two-products-and-two-discounts"></a>Exemple 1 : Deux produits et deux remises

Dans cet exemple, deux produits sont nécessaires afin de pouvoir bénéficier de chaque remise, et les remises ne peuvent pas être combinées. Les remises dans cet exemple sont ** le meilleur prix ** des remises. Les deux produits qualifiées pour les deux remises. Voici les deux remises. [![chevauchant de liste modifiable remise 01] (. /media/overlapping-discount-combo-01.jpg)](. /media/overlapping-discount-combo-01.jpg) Pour deux produits quelconques, préférable de ces deux remises dépend des prix des deux produits. Lorsque le prix des deux produits est égal ou quasiment identiques, la remise 1 est préférable. Lorsque le prix d'un produit est considérablement inférieur au prix de l'autre produit, la remise 2 est préférable. Voici la règle mathématique pour évaluer ces deux remises les unes en fonction de les autres : [![chevauchant de liste modifiable remise 02] (. /media/overlapping-discount-combo-02.jpg)](. Note /media/overlapping-discount-combo-02.jpg) qui lorsque le prix du produit 1 est égal à deux-tiers de prix du produit 2, les deux remises sont égaux. Dans cet exemple, le pourcentage de remise correspondant à l'escompte 1 varie d'un pourcentage (lorsque les prix des deux produits sont distants lointain) à un maximum de 25 % (lorsque les deux produits ont le même prix). Pourcentage de remise correspondant à l'escompte 2 est fixe. Il est toujours 20 %. Comme le pourcentage de remise correspondant à l'escompte 1 a une plage qui peut être supérieur à ou inférieure à la remise 2, la meilleure remise dépend des prix des deux produits qui doivent être escomptés. Dans cet exemple, le calcul est réalisé rapidement, car seules deux remises sont appliquées sur que deux produits. Il existe uniquement deux combinaisons possibles : une application de l'application de la remise 1 ou une de la remise 2. Il n'existe aucune permutation à calculer. La valeur de chaque remise est calculée à l'aide de les deux produits, et la meilleure remise est utilisée.

### <a name="example-2-four-products-and-two-discounts"></a>Exemple 2 : Quatre produits et deux remises

Ensuite, nous utilisons quatre produits et les mêmes deux remises. Les quatre produits sont qualifiées pour les deux remises. Il existe douze combinaisons possibles. Dans {{fin:In}} {{de:In}} {{compte:In}}, deux remises sont appliquées à la transaction dans une des trois combinaisons : deux applications de la remise 1, deux applications de l'application de la remise 2, ou une de l'application de la remise 1 et une de la remise 2. Pour illustrer les combinaisons possibles, nous regarderons deux ensembles différents de quatre produits qui ont des prix :

-   Les quatre produits est identique, monnaie au prix. Dans ce cas, la meilleure combinaison de remise est deux applications de la remise 1. Deux produits sont prix total, et deux seront éteints 50 %. Le total remisé de la transaction est $45 (15 + 15 + 7,50 + 7,50), qui est $15 (25 %) sur le total undiscounted de €. La remise 2 n'est $12 (20 %).
-   Deux produits sont $20, un produit est $15, et un produit est €. Dans ce cas, la meilleure combinaison de remise est une application de l'application de la remise 2 et une de la remise 1. Les tableaux ci-dessous illustre les remises.

Pour lire les tables, utilisez un produit d'une ligne et un produit d'une colonne. Par exemple, dans la table pour la remise 1, lorsque vous Permet de combiner les deux $20 produits, vous descendez de €. Dans la table pour la remise 2, lorsque vous Permet de combiner le produit $15 et les € produit, vous descendez de $4. [![chevauchant de liste modifiable remise 03] (. /media/overlapping-discount-combo-03.jpg)](. /media/overlapping-discount-combo-03.jpg) En premier, nous trouvons la plus grande remise qui est disponible à partir de deux produits quelconques à l'aide de l'un ou l'autre de remise. Affichage de deux tables le montant de remise pour chaque combinaison des deux produits. La plupart des tables ombrées représentent l'un des cas où un produit est accouplé avec lui-même, que nous ne pouvons pas faire, ou s'accoupler inverse de deux produits qui produit le même montant de remise et peut être ignoré. En examinant les tables, vous pouvez voir que la remise 1 pour les deux $20 articles est la plus grande remise disponible pour l'un ou l'autre de remise dans chacun des quatre produits. (Cette remise est mise en surbrillance en vert dans le premier tableau.) Ce permet uniquement le produit $15 et le produit €. En examinant les deux tables de nouveau, vous pouvez voir que, pour ces deux produits, la remise 1 donne une remise $2,50, alors que la remise 2 donne une remise $4. Par conséquent, il sélectionnons la remise 2. La remise totale est $14. Pour faciliter la discussion pour visualiser, voici deux tables supplémentaires qui affiche le pourcentage de remise effet pour toutes les combinaisons possibles de deux produit pour la remise 1 et la remise 2. Seule la moitié de la liste des combinaisons est incluse, car, pour ces deux remises, l'ordre dans lequel les deux produits sont ajoutées dans la remise n'importe pas. Remise effective la plus élevée (25 %) est mise en surbrillance en vert, et plus faible remise effective (10 %) est mise en surbrillance en rouge. [![chevauchant de liste modifiable remise 04] (. /media/overlapping-discount-combo-04.jpg)](. /media/overlapping-discount-combo-04.jpg) ** note : ** Lorsque les prix varient, et deux remises ou plus concurrencent, le seul moyen de garantir la meilleure combinaison de remises est d'évaluer les deux remises et de les comparer.

## <a name="total-possible-combinations"></a>Combinaisons possibles de total
Cette section continue l'exemple de la section précédente. Il ajouterons plus des produits et une remise différente, puis voyons le nombre de combinaisons doivent être calculées et comparées. Le tableau suivant indique le nombre de combinaisons de remise possibles {{à:as}} {{mesure:as}} que la quantité de produits augmente. La table affiche ce qui se produit les deux lorsqu'il existe deux remises se chevauchantes, comme dans l'exemple précédent, et s'il existe trois remises se chevauchantes. Numéro de combinaisons possibles de remise qui doivent être évaluées bientôt dépasse ce que un même ordinateur rapide peut calculer et comparer assez rapidement d'être acceptable pour les transactions de vente au détail. [![chevauchant de liste modifiable remise 05] (. /media/overlapping-discount-combo-05.jpg)](. /media/overlapping-discount-combo-05.jpg) Lorsque encore des quantités plus importantes ou plus de remises se chevauchantes sont appliquées, le nombre total de combinaisons possibles de remise prend rapidement en millions, et le temps requis afin d'évaluer et sélectionner la meilleure combinaison devient apparent rapidement. Certains optimisations ont été effectuées dans le moteur au détail de prix pour réduire le nombre total de combinaisons qui doivent être évaluées. Toutefois, comme le numéro chevauchant des remises et les quantités dans une transaction ne sont pas limitées, un grand nombre de combinaisons doivent toujours être évaluées dès que si chevauchent des remises. Ce problème est le problème auquel la méthode de classement de valeur marginale adresse.

## <a name="marginal-value-method"></a>Méthode de valeur marginale
Pour résoudre le problème d'un numéro de combinaisons augmentant exponentielle qui doivent être évaluées, une optimisation existe qui calcule la valeur de chaque produit partagé de chaque remise sur l'ensemble de produits auxquels peut s'appliquer deux remises ou plus. Nous nous référons à cette valeur comme ** valeur marginale ** de la remise pour les produits partagés. La valeur marginale est la moyenne par augmentation de produit dans le montant de remise totale lorsque les produits partagés inclus dans chaque remise. La valeur marginale est calculée en prenant le montant de remise totale (DTotal), soustrayant le montant de remise sans produits partagés (DMinus\\ partagé), et divisant cette différence par le nombre de produits partagés (ProductsShared). [![chevauchant de liste modifiable remise 06] (. /media/overlapping-discount-combo-06.jpg)](. /media/overlapping-discount-combo-06.jpg) Après la valeur marginale de chaque remise sur un ensemble partagé de produits soit calculée, les remises s'appliquent aux produits partagés dans l'ordre, exhaustivement, la valeur marginale la plus élevée à la valeur marginale la plus faible. Pour cette méthode, toutes les possibilités restantes de remise ne sont pas comparées à chaque fois qu'une seule instance d'une remise est appliquée. Au lieu de cela, les remises se chevauchantes sont comparés une fois et ensuite appliquées dans l'ordre. Aucune comparaison supplémentaire n'est effectuée. Vous pouvez configurer le seuil passer à la méthode de valeur marginale sur ** remise ** l'onglet ** les paramètres des ventes au détail ** de la page. Heure acceptable de calculer la remise totale varie entre différents secteurs au détail. Toutefois, la durée correspondante est en général de la plage des dizaines de millisecondes à une seconde.


