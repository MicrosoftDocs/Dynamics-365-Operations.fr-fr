---
title: "Vue d'ensemble de la mise à niveau du registre des amortissements"
description: "Dans les versions précédentes, il y avait deux concepts d'évaluation pour les immobilisations : modèles de valeur et registres des amortissements. Dans Microsoft Dynamics 365 for Operations (1611), la fonctionnalité de modèle de valeur et la fonctionnalité du registre des amortissements ont été fusionnées en un concept unique appelé registre. Cette rubrique fournit des éléments à prendre en compte pour la mise à niveau."
author: twheeloc
manager: AnnBe
ms.date: 06/20/2017
ms.topic: article
ms.prod: 
ms.service: dynamics-ax-applications
ms.technology: 
audience: Application User, Developer
ms.reviewer: twheeloc
ms.search.scope: Core, Operations
ms.custom: 221624
ms.assetid: cf434099-36f9-4b0f-a7c8-bed091e34f39
ms.search.region: global
ms.author: saraschi
ms.search.validFrom: 2016-11-30
ms.dyn365.ops.version: Version 1611
ms.translationtype: HT
ms.sourcegitcommit: 2771a31b5a4d418a27de0ebe1945d1fed2d8d6d6
ms.openlocfilehash: e95fa9dd15dfe5e6b26de61b5dbc1a9a6c0d768d
ms.contentlocale: fr-fr
ms.lasthandoff: 11/06/2017

---

# <a name="depreciation-book-upgrade-overview"></a><span data-ttu-id="2d3d3-105">Vue d'ensemble de la mise à niveau du registre des amortissements</span><span class="sxs-lookup"><span data-stu-id="2d3d3-105">Depreciation book upgrade overview</span></span>

[!include[banner](../includes/banner.md)]


<span data-ttu-id="2d3d3-106">Dans les versions précédentes, il y avait deux concepts d'évaluation pour les immobilisations : modèles de valeur et registres des amortissements.</span><span class="sxs-lookup"><span data-stu-id="2d3d3-106">In previous releases, there were two valuation concepts for fixed assets -  value models and depreciation books.</span></span> <span data-ttu-id="2d3d3-107">Dans Microsoft Dynamics 365 for Operations (1611), la fonctionnalité de modèle de valeur et la fonctionnalité du registre des amortissements ont été fusionnées en un concept unique appelé registre.</span><span class="sxs-lookup"><span data-stu-id="2d3d3-107">In Microsoft Dynamics 365 for Operations (1611), the value model functionality and depreciation book functionality have been merged into a single concept that is known as a book.</span></span> <span data-ttu-id="2d3d3-108">Cette rubrique fournit des éléments à prendre en compte pour la mise à niveau.</span><span class="sxs-lookup"><span data-stu-id="2d3d3-108">This topic provides some things to consider for the upgrade.</span></span> 

<span data-ttu-id="2d3d3-109">La procédure de mise à niveau déplacera votre paramétrage actuel et toutes les transactions existantes dans la structure du nouveau registre.</span><span class="sxs-lookup"><span data-stu-id="2d3d3-109">The upgrade process will move your existing setup and all existing transactions to the new book structure.</span></span> <span data-ttu-id="2d3d3-110">Les modèles de valeur restent telles qu'elles sont, comme registre qui valide dans la comptabilité.</span><span class="sxs-lookup"><span data-stu-id="2d3d3-110">Value models will remain as they currently are, as a book that posts to the general ledger.</span></span> <span data-ttu-id="2d3d3-111">Les registres d'amortissements seront déplacés vers un registre dont l'option **Valider dans la comptabilité** est définie sur **Non**.</span><span class="sxs-lookup"><span data-stu-id="2d3d3-111">Depreciation books will be moved to a book that has the **Post to general ledger** option set to **No**.</span></span> <span data-ttu-id="2d3d3-112">Les noms des journaux du registre des amortissements seront transférés vers un nom de journal de comptabilité dont la couche de validation est définie sur **Aucune**.</span><span class="sxs-lookup"><span data-stu-id="2d3d3-112">Depreciation book journal names will be moved to a general ledger journal name with the posting layer set to **None**.</span></span> <span data-ttu-id="2d3d3-113">Les transactions du registre des amortissements seront déplacées vers les transactions d'immobilisation.</span><span class="sxs-lookup"><span data-stu-id="2d3d3-113">Depreciation book transactions will be moved to Fixed asset transactions.</span></span> 

<span data-ttu-id="2d3d3-114">Avant d'exécuter la mise à niveau des données, vous devez comprendre les deux options disponibles pour mettre à niveau des lignes du journal du registre des amortissements vers les N° de documents de transaction, et la souche de numéros qui sera utilisée pour la souche de N° documents.</span><span class="sxs-lookup"><span data-stu-id="2d3d3-114">Before running the data upgrade, you should understand the two options available for upgrading depreciation book journal lines to transaction vouchers, and the number sequence that will be used for the voucher series.</span></span> 

<span data-ttu-id="2d3d3-115">Option 1 :  **Souche de numéros définie par le système** - Il s'agit de l'option par défaut pour optimiser les performances de mise à niveau.</span><span class="sxs-lookup"><span data-stu-id="2d3d3-115">Option 1:  **System-defined number sequence** - This is the default option to optimize upgrade performance.</span></span> <span data-ttu-id="2d3d3-116">La mise à niveau n'utilise pas la structure de souches de numéros, mais à la place répartit les N° de documents avec une approche basée sur les jeux.</span><span class="sxs-lookup"><span data-stu-id="2d3d3-116">The upgrade will not use the number sequences framework, but instead will allocate vouchers with a set-based approach.</span></span> <span data-ttu-id="2d3d3-117">Après la mise à niveau, la nouvelle souche de numéros est créée avec le **Jeu de numéros suivant** basé comme il se doit sur les transactions mises à niveau.</span><span class="sxs-lookup"><span data-stu-id="2d3d3-117">After the upgrade, the new number sequence will be created with the **Next number set** appropriately based on the upgraded transactions.</span></span> <span data-ttu-id="2d3d3-118">Par défaut, la souche de numéros utilisée est au format FADBUpgr\#\#\#\#\#\#\#\#\#.</span><span class="sxs-lookup"><span data-stu-id="2d3d3-118">By default, the number sequence used will be in the FADBUpgr\#\#\#\#\#\#\#\#\# format.</span></span> <span data-ttu-id="2d3d3-119">Il existe quelques paramètres disponibles pour ajuster le format en utilisant cette approche :</span><span class="sxs-lookup"><span data-stu-id="2d3d3-119">There are a few parameters available to you to adjust the format when using this approach:</span></span>

-   <span data-ttu-id="2d3d3-120">**Code de souche de numéros** – Code pour identifier la souche de numéros.</span><span class="sxs-lookup"><span data-stu-id="2d3d3-120">**Number sequence code** – The code to identify the number sequence.</span></span> <span data-ttu-id="2d3d3-121">Ce code de souche de numéros ne peut pas exister, car il sera créé par la mise à niveau.</span><span class="sxs-lookup"><span data-stu-id="2d3d3-121">This number sequence code cannot exist since it will be created by the upgrade.</span></span>
    -   <span data-ttu-id="2d3d3-122">Nom constant : **NumberSequenceDefaultCode**</span><span class="sxs-lookup"><span data-stu-id="2d3d3-122">Constant name: **NumberSequenceDefaultCode**</span></span>
    -   <span data-ttu-id="2d3d3-123">Valeur par défaut : « FADBUpgr »</span><span class="sxs-lookup"><span data-stu-id="2d3d3-123">Default value: "FADBUpgr"</span></span>
-   <span data-ttu-id="2d3d3-124">**Préfixe** – Valeur de chaîne constante à utiliser comme préfixe pour les N° document.</span><span class="sxs-lookup"><span data-stu-id="2d3d3-124">**Prefix** – The constant string value that will be used as a prefix for the voucher numbers.</span></span>
    -   <span data-ttu-id="2d3d3-125">Nom constant : **NumberSequenceDefaultParameterPrefix**</span><span class="sxs-lookup"><span data-stu-id="2d3d3-125">Constant name: **NumberSequenceDefaultParameterPrefix**</span></span>
    -   <span data-ttu-id="2d3d3-126">Valeur par défaut : « FADBUpgr »</span><span class="sxs-lookup"><span data-stu-id="2d3d3-126">Default value: "FADBUpgr"</span></span>
-   <span data-ttu-id="2d3d3-127">**Longueur alphanumérique** – Longueur du segment alphanumérique de la souche de numéros.</span><span class="sxs-lookup"><span data-stu-id="2d3d3-127">**Alphanumeric length** – The length of the alphanumeric segment of the number sequence.</span></span>
    -   <span data-ttu-id="2d3d3-128">Nom constant : **NumberSequenceDefaultParameterAlpanumericLength**</span><span class="sxs-lookup"><span data-stu-id="2d3d3-128">Constant name: **NumberSequenceDefaultParameterAlpanumericLength **</span></span>
    -   <span data-ttu-id="2d3d3-129">Valeur par défaut : 9</span><span class="sxs-lookup"><span data-stu-id="2d3d3-129">Default value: 9</span></span>
-   <span data-ttu-id="2d3d3-130">**Numéro de début** - Premier numéro à être utilisé dans la souche de numéros.</span><span class="sxs-lookup"><span data-stu-id="2d3d3-130">**Start number** - The first number to be used in the number sequence.</span></span>
    -   <span data-ttu-id="2d3d3-131">Nom constant : **NumberSequenceDefaultParameterStartNumber**</span><span class="sxs-lookup"><span data-stu-id="2d3d3-131">Constant name: **NumberSequenceDefaultParameterStartNumber  **</span></span>
    -   <span data-ttu-id="2d3d3-132">Valeur par défaut : 1</span><span class="sxs-lookup"><span data-stu-id="2d3d3-132">Default value: 1</span></span>

<span data-ttu-id="2d3d3-133">Option 2 : **Souche de numéros définie par l'utilisateur existante** - Cette option vous permet de définir la souche de numéros à utiliser pour la mise à niveau.</span><span class="sxs-lookup"><span data-stu-id="2d3d3-133">Option 2: **Existing user-defined number sequence** - This option will allow you to define the number sequence to be used for the upgrade.</span></span> <span data-ttu-id="2d3d3-134">Envisagez d'utiliser cette option si vous avez besoin de la configuration de souche de numéros avancée.</span><span class="sxs-lookup"><span data-stu-id="2d3d3-134">Consider using this option if you need advanced number sequence configuration.</span></span> <span data-ttu-id="2d3d3-135">Pour utiliser une souche de numéros, vous devez modifier la classe de mise à niveau ReleaseUpdateDB70\_FixedAssetJournalDepBookRemovalDepBookJournalTrans avec les informations suivantes :</span><span class="sxs-lookup"><span data-stu-id="2d3d3-135">To use a number sequence, you must modify the upgrade class ReleaseUpdateDB70\_FixedAssetJournalDepBookRemovalDepBookJournalTrans with the following information:</span></span>

-   <span data-ttu-id="2d3d3-136">**Code de souche de numéros** – Code de la souche de numéros.</span><span class="sxs-lookup"><span data-stu-id="2d3d3-136">**Number sequence code** – The code of the number sequence.</span></span>
    -   <span data-ttu-id="2d3d3-137">Nom constant : **NumberSequenceExistingCode**</span><span class="sxs-lookup"><span data-stu-id="2d3d3-137">Constant name: **NumberSequenceExistingCode **</span></span>
    -   <span data-ttu-id="2d3d3-138">Valeur par défaut : Pas de valeur par défaut, elle doit être mise à jour dans le code de souche de numéros.</span><span class="sxs-lookup"><span data-stu-id="2d3d3-138">Default value: No default, this must be updated to the number sequence code.</span></span>
-   <span data-ttu-id="2d3d3-139">**Souche de numéros partagée** – Valeur booléenne pour identifier la portée de la souche de numéros.</span><span class="sxs-lookup"><span data-stu-id="2d3d3-139">**Shared number sequence** – A boolean value to identify the scope of the number sequence.</span></span> <span data-ttu-id="2d3d3-140">Utilisez « true » pour les souches de numéros partagées entre toutes les sociétés, et « false » pour une portée spécifique à une société.</span><span class="sxs-lookup"><span data-stu-id="2d3d3-140">Use "true" for shared number sequences across all companies, and "false" for a company-specific scope.</span></span> <span data-ttu-id="2d3d3-141">Lorsque vous utilisez « false », la souche de numéros avec le nom spécifié doit exister dans chaque société qui contient les transactions du registre des amortissements.</span><span class="sxs-lookup"><span data-stu-id="2d3d3-141">When using "false", the number sequence with the specified name must exist in every company that contains depreciation book transactions.</span></span> <span data-ttu-id="2d3d3-142">Les souches de numéros partagées existent dans chaque partition contenant des transactions du registre des amortissements.</span><span class="sxs-lookup"><span data-stu-id="2d3d3-142">Shared number sequences exist in every partition that contains depreciation book transactions.</span></span>
    -   <span data-ttu-id="2d3d3-143">Nom constant : **NumberSequenceExistingIsShared**</span><span class="sxs-lookup"><span data-stu-id="2d3d3-143">Constant name: **NumberSequenceExistingIsShared **</span></span>
    -   <span data-ttu-id="2d3d3-144">Valeur par défaut ; true</span><span class="sxs-lookup"><span data-stu-id="2d3d3-144">Default value: true</span></span>

<span data-ttu-id="2d3d3-145">Les paramètres sont situés au début de la classe ReleaseUpdateDB70\_FixedAssetJournalDepBookRemovalDepBookJournalTrans.</span><span class="sxs-lookup"><span data-stu-id="2d3d3-145">The parameters are located at the beginning of the ReleaseUpdateDB70\_FixedAssetJournalDepBookRemovalDepBookJournalTrans class.</span></span> 

<span data-ttu-id="2d3d3-146">*// Spécifiez une approche préférable pour la répartition de documents* 
*//true, si vous souhaitez utiliser un code souche de numéros existant* 
*//false, si vous souhaitez utiliser la souche de numéros définie par le système (par défaut)* const boolean NumberSequenceUseExistingCode = false;</span><span class="sxs-lookup"><span data-stu-id="2d3d3-146">*// Specify a preferable approach of vouchers allocation* 
*// true, if you want to use an existing number sequence code* 
*// false, if you intend to use the system-defined number sequence (default)* const boolean NumberSequenceUseExistingCode = false;</span></span>  

<span data-ttu-id="2d3d3-147">*// Si vous utilisez la méthode de souches de numéros définies par le système, spécifiez les paramètres de la souche de numéros.*
*// Une nouvelle souche de numéros sera créée avec ces paramètres.*</span><span class="sxs-lookup"><span data-stu-id="2d3d3-147">*// If using the system-defined number sequence approach, specify the parameters for the number sequence.*
*// A new number sequence will be created with these parameters.*</span></span> <span data-ttu-id="2d3d3-148">const str NumberSequenceDefaultCode = 'FADBUpgr'; const str NumberSequenceDefaultParameterPrefix = 'FADBUpgr'; const int NumberSequenceDefaultParameterAlpanumericLength = 9; const int NumberSequenceDefaultParameterStartNumber = 1;</span><span class="sxs-lookup"><span data-stu-id="2d3d3-148">const str NumberSequenceDefaultCode = 'FADBUpgr'; const str NumberSequenceDefaultParameterPrefix = 'FADBUpgr'; const int NumberSequenceDefaultParameterAlpanumericLength = 9; const int NumberSequenceDefaultParameterStartNumber = 1;</span></span>   

<span data-ttu-id="2d3d3-149">*// Si vous utilisez l'approche de souche de numéros existante, spécifiez le code de souche de numéros existant.* 
*// La répartition de N° de documents se fera ligne par ligne pour les souches de numéros existantes.*</span><span class="sxs-lookup"><span data-stu-id="2d3d3-149">*// If using the existing number sequence approach, specify the existing number sequence code.* 
*// Voucher allocation will go row-by-row for existing number sequences.*</span></span> <span data-ttu-id="2d3d3-150">const str NumberSequenceExistingCode = ''; *// Spécifiez la portée du code de la souche de numéros existante.* 
*// true, si la souche de numéros spécifiée est partagée* 
*// false, si la souche de numéros spécifiée est par société* 
*// La souche de numéros définie par le système par défaut sera utilisée si un code de souche de numéros avec la portée spécifiée est introuvable.*</span><span class="sxs-lookup"><span data-stu-id="2d3d3-150">const str NumberSequenceExistingCode = ''; *// Specify the scope of the existing number sequence code* 
*// true, if the specified number sequence is shared* 
*// false, if the specified number sequence is per-company* 
*// The default system-defined number sequence will be used if a number sequence code with the specified scope is not found.*</span></span> <span data-ttu-id="2d3d3-151">const boolean NumberSequenceExistingIsShared = true;</span><span class="sxs-lookup"><span data-stu-id="2d3d3-151">const boolean NumberSequenceExistingIsShared = true;</span></span> 

<span data-ttu-id="2d3d3-152">Permet de recréer le projet contenant la classe une fois les constantes suivantes modifiées.</span><span class="sxs-lookup"><span data-stu-id="2d3d3-152">Rebuild the project that contains the class after the constants have been modified.</span></span> 

<span data-ttu-id="2d3d3-153">Lorsque vous utilisez l'approche de souches de numéros générée par le système (option 1), la mise à niveau utilise le traitement basé sur les jeux pour répartir les N° de documents spécifiés dans les paramètres de script de mise à niveau.</span><span class="sxs-lookup"><span data-stu-id="2d3d3-153">When using the system-generated number sequence approach (option 1), the upgrade will use set-based processing to allocate the voucher numbers as specified in the upgrade script parameters.</span></span> <span data-ttu-id="2d3d3-154">Elle crée également une souche de numéros avec les paramètres spécifiés après la répartition.</span><span class="sxs-lookup"><span data-stu-id="2d3d3-154">It will also create a new number sequence with specified parameters after the allocation.</span></span> 

<span data-ttu-id="2d3d3-155">Lorsque vous utilisez l'approche de souches de numéros définie par l'utilisateur existante (option 2), la mise à niveau des données vérifie si la souche de numéros avec la portée spécifiée existe dans la base de données pour chaque partition et société avec des transactions du registre des amortissements.</span><span class="sxs-lookup"><span data-stu-id="2d3d3-155">When using the user-defined existing number sequence approach (option 2), the data upgrade checks whether the number sequence with the specified scope exists in the database for each partition and company with depreciation book transactions.</span></span> <span data-ttu-id="2d3d3-156">Si tel est le cas, la mise à niveau utilise le traitement ligne par ligne pour répartir les N° de documents comme spécifié par la souche de numéros à l'aide de la structure de souche de numéros.</span><span class="sxs-lookup"><span data-stu-id="2d3d3-156">If it does exist, the upgrade will use row-by-row processing to allocate the voucher numbers as specified by the number sequence using the number sequence framework.</span></span> <span data-ttu-id="2d3d3-157">Si la souche de numéros n'existe pas avec la portée spécifiée, la mise à niveau utilise l'approche de souche de numéros définie par le système par défaut pour répartir les N° de documents, et crée une souche de numéros avec les paramètres par défaut spécifiés après la répartition.</span><span class="sxs-lookup"><span data-stu-id="2d3d3-157">If the number sequence does not exist with the specified scope, the upgrade will use the default system-defined number sequence approach to allocate the voucher numbers, and will create a new number sequence with specified default parameters after the allocation.</span></span>

<span data-ttu-id="2d3d3-158">Quelle que soit l'approche, le script de mise à niveau des données utilise également la souche de numéros pour le champ **Souche de documents** sur les nouveaux noms de journaux comptables créés pour les anciens noms des journaux du registre des amortissements.</span><span class="sxs-lookup"><span data-stu-id="2d3d3-158">With either approach, the data upgrade script will also use the number sequence for the **Voucher series** field on the new general ledger journal names created for the former depreciation book journal names.</span></span>




