---
title: Améliorations de la fonctionnalité de validation du relevé
description: Cette rubrique décrit les améliorations apportées à la fonction de validation des relevés.
author: josaw1
manager: AnnBe
ms.date: 05/14/2019
ms.topic: article
ms.prod: ''
ms.service: dynamics-ax-applications
ms.technology: ''
audience: Application User
ms.reviewer: josaw
ms.search.scope: Core, Operations, Retail
ms.search.region: Global
ms.search.industry: retail
ms.author: anpurush
ms.search.validFrom: 2018-04-30
ms.dyn365.ops.version: AX 7.0.0, Retail July 2017 update
ms.openlocfilehash: 02880edda6c34c24f8dad8cc8cbeafe215f46896
ms.sourcegitcommit: 9d4c7edd0ae2053c37c7d81cdd180b16bf3a9d3b
ms.translationtype: HT
ms.contentlocale: fr-FR
ms.lasthandoff: 05/14/2019
ms.locfileid: "1541289"
---
# <a name="improvements-to-statement-posting-functionality"></a><span data-ttu-id="50734-103">Améliorations de la fonctionnalité de validation du relevé</span><span class="sxs-lookup"><span data-stu-id="50734-103">Improvements to statement posting functionality</span></span>

[!include[banner](includes/banner.md)]

<span data-ttu-id="50734-104">Cette rubrique décrit le premier ensemble d'améliorations apportées à la fonction de validation des relevés.</span><span class="sxs-lookup"><span data-stu-id="50734-104">This topic describes the first set of improvements that have been made to the statement posting feature.</span></span> <span data-ttu-id="50734-105">Ces améliorations sont disponibles dans Microsoft Dynamics 365 for Finance and Operations 7.3.2.</span><span class="sxs-lookup"><span data-stu-id="50734-105">These improvements are available in Microsoft Dynamics 365 for Finance and Operations 7.3.2.</span></span>

## <a name="activation"></a><span data-ttu-id="50734-106">Activation</span><span class="sxs-lookup"><span data-stu-id="50734-106">Activation</span></span>

<span data-ttu-id="50734-107">Par défaut, au cours du déploiement de Finance and Operations 7.3.2, le programme est paramétré pour utiliser la fonction héritée pour la validation des relevés.</span><span class="sxs-lookup"><span data-stu-id="50734-107">By default, during deployment of Finance and Operations 7.3.2, the program is set up to use the legacy feature for statement postings.</span></span> <span data-ttu-id="50734-108">Pour activer la fonction améliorée de validation des relevés, vous devez activer la clé de configuration associée.</span><span class="sxs-lookup"><span data-stu-id="50734-108">To enable the improved statement posting feature, you must turn on the configuration key for it.</span></span>

- <span data-ttu-id="50734-109">Accédez à **Administration du système** \> **Paramétrage** \> **Configuration des licences**, puis, sous le nœud **Vente au détail**, désactivez la case à cocher **Relevés de vente au détail (hérités)** et activez la case à cocher **Relevés de vente au détail**.</span><span class="sxs-lookup"><span data-stu-id="50734-109">Go to **System administration** \> **Setup** \> **License configuration**, and then, under the **Retail** node, clear the **Retail statements (legacy)** check box, and select the **Retail statements** check box.</span></span>

<span data-ttu-id="50734-110">Lorsque la nouvelle clé de configuration **Relevés de vente au détail** est activée, une nouvelle option de menu **Relevés de vente au détail** est disponible.</span><span class="sxs-lookup"><span data-stu-id="50734-110">When the new **Retail statements** configuration key is turned on, a new menu item that is named **Retail statements** is available.</span></span> <span data-ttu-id="50734-111">Cette option de menu permet de créer, calculer et valider manuellement des relevés.</span><span class="sxs-lookup"><span data-stu-id="50734-111">This menu item lets you manually create, calculate, and post statements.</span></span> <span data-ttu-id="50734-112">Un relevé qui génère une erreur lors de l'utilisation du processus de validation par lots sera également disponible via cette option de menu.</span><span class="sxs-lookup"><span data-stu-id="50734-112">Any statement that causes an error when the batch posting process is used will also be available through this menu item.</span></span> <span data-ttu-id="50734-113">Lorsque la clé de configuration **Relevés de vente au détail (hérités)** est activée, l'option de menu est appelée **Relevés en cours**.</span><span class="sxs-lookup"><span data-stu-id="50734-113">(When the **Retail statements (legacy)** configuration key is turned on, the menu item is named **Open statements**.)</span></span>

<span data-ttu-id="50734-114">Finance and Operations comprend les contrôles suivants qui sont associés à ces clés de configuration :</span><span class="sxs-lookup"><span data-stu-id="50734-114">Finance and Operations includes the following validations that are related to these configuration keys:</span></span>

- <span data-ttu-id="50734-115">Les deux clés de configuration ne peuvent pas être activées en même temps.</span><span class="sxs-lookup"><span data-stu-id="50734-115">Both configuration keys can't be turned on at the same time.</span></span>
- <span data-ttu-id="50734-116">Les mêmes clés de configuration doivent être utilisées pour toutes les opérations exécutées sur un relevé donné pendant son cycle de vie (créer, calculer, effacer, valider, etc.).</span><span class="sxs-lookup"><span data-stu-id="50734-116">The same configuration keys must be used for all the operations that are performed on a given statement during its lifecycle (Create, Calculate, Clear, Post, and so on).</span></span> <span data-ttu-id="50734-117">Par exemple, vous ne pouvez pas créer et calculer un relevé lorsque la clé de configuration **Relevé de vente au détail (hérité)** est activée et essayer de valider le même relevé lorsque la clé de configuration **Relevé de vente au détail** est activée.</span><span class="sxs-lookup"><span data-stu-id="50734-117">For example, you can't create and calculate a statement while the **Retail statement (legacy)** configuration key is turned on, and then try to post the same statement while the **Retail statement** configuration key is turned on.</span></span>

> [!NOTE]
> <span data-ttu-id="50734-118">Nous vous recommandons d'utiliser la clé de configuration **Relevés de vente au détail** pour la fonction améliorée de validation des relevés, sauf si vous avez des raisons valables d'utiliser la clé de configuration **Relevés de vente au détail (hérités)** à la place.</span><span class="sxs-lookup"><span data-stu-id="50734-118">We recommend that you use the **Retail statements** configuration key for the improved statement posting feature, unless you have compelling reasons to use the **Retail statements (legacy)** configuration key instead.</span></span> <span data-ttu-id="50734-119">Microsoft continuera à investir dans la fonction nouvelle et améliorée de validation des relevés, et il est important de l'utiliser dans les meilleurs délais pour en tirer parti.</span><span class="sxs-lookup"><span data-stu-id="50734-119">Microsoft will continue to invest in the new and improved statement posting feature, and it's important that you switch to it at the earliest opportunity to benefit from it.</span></span> <span data-ttu-id="50734-120">La fonction héritée de validation des relevés est supprimée depuis la version 8.0.</span><span class="sxs-lookup"><span data-stu-id="50734-120">The legacy statement posting feature is deprecated starting in 8.0 release.</span></span>

## <a name="setup"></a><span data-ttu-id="50734-121">Configuration</span><span class="sxs-lookup"><span data-stu-id="50734-121">Setup</span></span>

<span data-ttu-id="50734-122">Dans le cadre des améliorations de la fonction de validation des relevés, trois nouveaux paramètres ont été introduits dans l'organisateur **Relevé** sous l'onglet **Validation** de la page **Paramètres des ventes au détail** :</span><span class="sxs-lookup"><span data-stu-id="50734-122">As part of the improvements to the statement posting feature, three new parameters have been introduced on the **Statement** FastTab on the **Posting** tab of the **Retail parameters** page:</span></span>

- <span data-ttu-id="50734-123">**Désactiver la fonction d'effacement de relevé** – Cette option s'applique uniquement à la fonction héritée de validation des relevés.</span><span class="sxs-lookup"><span data-stu-id="50734-123">**Disable clear statement** – This option is applicable only for the legacy statement posting feature.</span></span> <span data-ttu-id="50734-124">Nous vous recommandons de définir cette option sur **Non** pour empêcher les utilisateurs d'effacer des relevés qui sont à l'état semi-validé.</span><span class="sxs-lookup"><span data-stu-id="50734-124">We recommend that you set this option to **No** to prevent users from clearing statements that are in a semi-posted state.</span></span> <span data-ttu-id="50734-125">Si des relevés à l'état semi-validé sont effacés, les données sont corrompues.</span><span class="sxs-lookup"><span data-stu-id="50734-125">If statements that are in a semi-posted state are cleared, data becomes corrupted.</span></span> <span data-ttu-id="50734-126">Vous devez définir cette option sur **Oui** uniquement dans des cas exceptionnels.</span><span class="sxs-lookup"><span data-stu-id="50734-126">You should set this option to **Yes** only in exceptional circumstances.</span></span>
- <span data-ttu-id="50734-127">**Réserver le stock lors du calcul** – Nous vous recommandons d'utiliser le traitement par lots **Valider le stock** pour la réservation du stock et de définir cette option sur **Non**.</span><span class="sxs-lookup"><span data-stu-id="50734-127">**Reserve inventory during calculation** – We recommend that you use the **Post inventory** batch job for inventory reservation, and that you set this option to **No**.</span></span> <span data-ttu-id="50734-128">Lorsque cette option est définie sur **Non**, la fonction améliorée de validation des relevés n'essaie pas de créer des entrées de réservation de stock au moment du calcul (si les entrées n'ont pas déjà été créées via le traitement par lots **Valider le stock**).</span><span class="sxs-lookup"><span data-stu-id="50734-128">When this option is set to **No**, the improved statement posting feature doesn't try to create inventory reservation entries at the time of calculation (if entries weren't already created through the **Post inventory** batch job).</span></span> <span data-ttu-id="50734-129">À la place, la fonction crée des entrées de réservation de stock uniquement au moment de la validation.</span><span class="sxs-lookup"><span data-stu-id="50734-129">Instead, the feature creates inventory reservation entries only at the time of posting.</span></span> <span data-ttu-id="50734-130">Cette implémentation était un choix de conception et reposait sur le fait que l'intervalle de temps entre le processus de calcul et le processus de validation est généralement petit.</span><span class="sxs-lookup"><span data-stu-id="50734-130">This implementation was a design choice and was based on the fact that the time window between the calculation process and the posting process is typically small.</span></span> <span data-ttu-id="50734-131">Toutefois, si vous souhaitez réserver le stock au moment du calcul, vous pouvez définir cette option **Oui**.</span><span class="sxs-lookup"><span data-stu-id="50734-131">However, if you want to reserve inventory at the time of calculation, you can set this option to **Yes**.</span></span>

    <span data-ttu-id="50734-132">La fonction héritée de validation des relevés réserve toujours le stock lors du processus de calcul des relevés (si la réservation n'a pas déjà été effectuée via le traitement par lots **Valider le stock**), quel que soit le paramètre de cette option.</span><span class="sxs-lookup"><span data-stu-id="50734-132">The legacy statement posting feature always reserves inventory during the statement calculation process (if reservation wasn't already done through the **Post inventory** batch job), regardless of the setting of this option.</span></span>

- <span data-ttu-id="50734-133">**Désactivation du comptage obligatoire** – Lorsque cette option est définie sur **Oui**, le processus de validation d'un relevé continue, même si la différence entre le montant calculé et le montant de la transaction sur le relevé dépasse le seuil défini dans l'organisateur **Relevé** pour les magasins de vente au détail.</span><span class="sxs-lookup"><span data-stu-id="50734-133">**Disable counting required** – When this option is set to **Yes**, the posting process for a statement continues, even if the difference between the counted amount and the transaction amount on the statement is outside the threshold that is defined on the **Statement** FastTab for Retail stores.</span></span>

<span data-ttu-id="50734-134">En outre, les paramètres suivants ont été introduits dans l'organisateur **Traitement par lots** de l'onglet **Validation** de la page **Paramètres des ventes au détail** :</span><span class="sxs-lookup"><span data-stu-id="50734-134">Additionally, the following parameters have been introduced on the **Batch processing** FastTab on the **Posting** tab of the **Retail parameters** page:</span></span> 

- <span data-ttu-id="50734-135">**Nombre maximal de validation de relevés en parallèle** - Ce champ définit le nombre de tâches de traitement par lots qui seront utilisées pour valider plusieurs relevés.</span><span class="sxs-lookup"><span data-stu-id="50734-135">**Maximum number of parallel statement posting** - This field defines the number of batch tasks that will be used to post multiple statements.</span></span> 
- <span data-ttu-id="50734-136">**Thread maximal pour le traitement des commandes par relevé** - Ce champ représente le nombre maximal de threads utilisés par le traitement par lots de validation de relevé pour créer et facturer les commandes client d'un seul relevé.</span><span class="sxs-lookup"><span data-stu-id="50734-136">**Max thread for order processing per statement** - This field represents the maximum number of threads used by the statement posting batch job to create and invoice sales orders for a single statement.</span></span> <span data-ttu-id="50734-137">Le nombre total de threads qui seront utilisés par le processus de validation du relevé sera calculé en fonction de la valeur de ce paramètre multipliée par la valeur indiquée dans le paramètre **Nombre maximal de validation de relevés en parallèle**.</span><span class="sxs-lookup"><span data-stu-id="50734-137">The total number of threads that will be used by the statement posting process will be computed based on the value in this parameter multiplied by the value in the **Maximum number of parallel statement posting** parameter.</span></span> <span data-ttu-id="50734-138">La définition de la valeur de ce paramètre trop élevée peut avoir un impact négatif sur les performances du processus de validation du relevé.</span><span class="sxs-lookup"><span data-stu-id="50734-138">Setting the value of this parameter too high can negatively impact the performance of the statement posting process.</span></span>
- <span data-ttu-id="50734-139">**Nombre maximal de lignes de transaction incluses dans l'agrégation** - Ce champ définit le nombre de lignes de transaction qui seront incluses dans une seule transaction regroupée avant qu'une nouvelle soit créée.</span><span class="sxs-lookup"><span data-stu-id="50734-139">**Max transaction lines included in aggregation** - This field defines the number of transaction lines that will be included in a single aggregated transaction before a new one is created.</span></span> <span data-ttu-id="50734-140">Les transactions regroupées sont créées selon différents critères d'agrégation, tels que le client, date d'activité ou les dimensions financières.</span><span class="sxs-lookup"><span data-stu-id="50734-140">Aggregated transactions are created based on different aggregation criteria such as customer, business date, or financial dimensions.</span></span> <span data-ttu-id="50734-141">Il est important de noter que les lignes d'une transaction unique de vente au détail ne sont pas fractionnées entre différentes transactions regroupées.</span><span class="sxs-lookup"><span data-stu-id="50734-141">It is important to note that the lines from a single retail transaction will not be split across different aggregated transactions.</span></span> <span data-ttu-id="50734-142">Cela signifie qu'il y a un risque que le nombre de lignes d'une transaction regroupée soit légèrement supérieur ou inférieur en fonction de facteurs comme le nombre de produits distincts.</span><span class="sxs-lookup"><span data-stu-id="50734-142">This means that there is a possibility that the number of lines in a aggregated transaction is slightly higher or lower based on factors such as number of distinct products.</span></span>
- <span data-ttu-id="50734-143">**Nombre maximal de threads pour valider les transactions en magasin** - Ce champ définit le nombre de threads qui seront utilisés pour valider les transactions de vente au détail.</span><span class="sxs-lookup"><span data-stu-id="50734-143">**Maximum number of threads to validate store transactions** - This field defines the number of threads that will be used to validate retail transactions.</span></span> <span data-ttu-id="50734-144">La validation des transactions de vente au détail est une étape obligatoire qui doit être effectuée avant que les transactions puissent être extraites dans les relevés.</span><span class="sxs-lookup"><span data-stu-id="50734-144">Validating retail transactions is a required step that needs to occur before the transactions can be pulled into the statements.</span></span> <span data-ttu-id="50734-145">Vous devez également définir un **Produit de la carte cadeau** dans l'organisateur **Carte cadeau** sous l'onglet **Validation** de la page **Paramètres des ventes au détail**.</span><span class="sxs-lookup"><span data-stu-id="50734-145">You also need to define a **Gift card product** on the **Gift card** FastTab on the **Posting** tab of the **Retail parameters** page.</span></span> <span data-ttu-id="50734-146">Cela doit être défini, même si aucune carte cadeau n'est utilisée par l'organisation.</span><span class="sxs-lookup"><span data-stu-id="50734-146">This needs to defined even if gift cards are not used by the organization.</span></span>

> [!NOTE]
> <span data-ttu-id="50734-147">Tous les paramètres associés aux validations de relevé et définis dans les magasins de vente au détail et sur la page **Paramètres des ventes au détail** s'appliquent à la fonction améliorée de validation des relevés.</span><span class="sxs-lookup"><span data-stu-id="50734-147">All settings and parameters that are related to statement postings, and that are defined on Retail stores and on the **Retail parameters** page, are applicable to the improved statement posting feature.</span></span>

## <a name="processing"></a><span data-ttu-id="50734-148">Traitement</span><span class="sxs-lookup"><span data-stu-id="50734-148">Processing</span></span>

<span data-ttu-id="50734-149">Les relevés peuvent être calculés et validés par lots à l'aide des options de menu **Calcul des relevés en mode de traitement par lots** et **Valider les relevés en mode de traitement par lots**.</span><span class="sxs-lookup"><span data-stu-id="50734-149">Statements can be calculated and posted in batch using the menu items **Calculate statements in batch** and **Post statements in batch**.</span></span> <span data-ttu-id="50734-150">Les relevés peuvent également être calculés et validés manuellement à l'aide de l'option de menu **Relevés de vente au détail** fournie par la fonction améliorée de validation des relevés.</span><span class="sxs-lookup"><span data-stu-id="50734-150">Alternatively, statements can be manually calculated and posted by using the **Retail statements** menu item that the improved statement posting feature provides.</span></span>

<span data-ttu-id="50734-151">Le processus et les étapes de calcul et de validation des relevés en mode de traitement par lots sont les mêmes que ceux pour la fonction héritée de validation des relevés.</span><span class="sxs-lookup"><span data-stu-id="50734-151">The process and steps for calculating and posting statements in a batch are the same as they were in the legacy statement posting feature.</span></span> <span data-ttu-id="50734-152">Toutefois, des améliorations importantes ont été apportées au traitement principal des relevés.</span><span class="sxs-lookup"><span data-stu-id="50734-152">However, significant improvements have been made in the core back-end processing of the statements.</span></span> <span data-ttu-id="50734-153">Ces améliorations rendent le processus plus résilient et offrent une meilleure visibilité sur les états et les informations d'erreur.</span><span class="sxs-lookup"><span data-stu-id="50734-153">These improvements make the process more resilient, and provide for better visibility into the states and error information.</span></span> <span data-ttu-id="50734-154">Par conséquent, les utilisateurs peuvent déterminer la cause principale des erreurs et continuer le processus de validation sans entraîner l'altération des données, ni nécessiter des correctifs de données.</span><span class="sxs-lookup"><span data-stu-id="50734-154">Therefore, users can address the root cause of errors and then continue the posting process without causing data corruption and without causing data fixes to be required.</span></span>

<span data-ttu-id="50734-155">Les sections suivantes décrivent quelques-unes des principales améliorations de la fonction de validation des relevés qui s'affichent dans l'interface utilisateur pour les relevés de vente au détail et les relevés validés.</span><span class="sxs-lookup"><span data-stu-id="50734-155">The following sections describe some of the major improvements for the statement posting feature that appear in the user interface for retail statements and posted statements.</span></span>

### <a name="status-details"></a><span data-ttu-id="50734-156">Détails du statut</span><span class="sxs-lookup"><span data-stu-id="50734-156">Status details</span></span>

<span data-ttu-id="50734-157">Un nouveau modèle d'état a été introduit dans la routine de validation des relevés pour les processus de calcul et de validation.</span><span class="sxs-lookup"><span data-stu-id="50734-157">A new state model has been introduced in the statement posting routine across the calculation and posting processes.</span></span>

<span data-ttu-id="50734-158">Le tableau suivant décrit les différents états et leur ordre lors du processus de calcul.</span><span class="sxs-lookup"><span data-stu-id="50734-158">The following table describes the various states and their order during the calculation process.</span></span>

| <span data-ttu-id="50734-159">Ordre des états</span><span class="sxs-lookup"><span data-stu-id="50734-159">State order</span></span> | <span data-ttu-id="50734-160">État</span><span class="sxs-lookup"><span data-stu-id="50734-160">State</span></span>      | <span data-ttu-id="50734-161">Description</span><span class="sxs-lookup"><span data-stu-id="50734-161">Description</span></span> |
|-------------|------------|-------------|
| <span data-ttu-id="50734-162">1</span><span class="sxs-lookup"><span data-stu-id="50734-162">1</span></span>           | <span data-ttu-id="50734-163">Commencée</span><span class="sxs-lookup"><span data-stu-id="50734-163">Started</span></span>    | <span data-ttu-id="50734-164">Le relevé a été créé et est prêt à être calculé.</span><span class="sxs-lookup"><span data-stu-id="50734-164">The statement was created and is ready to be calculated.</span></span> |
| <span data-ttu-id="50734-165">2</span><span class="sxs-lookup"><span data-stu-id="50734-165">2</span></span>           | <span data-ttu-id="50734-166">Marqué</span><span class="sxs-lookup"><span data-stu-id="50734-166">Marked</span></span>     | <span data-ttu-id="50734-167">Les transactions entrant dans le cadre du relevé sont identifiées en fonction des paramètres du relevé, et elles sont marquées avec l'ID du relevé.</span><span class="sxs-lookup"><span data-stu-id="50734-167">The transactions that are in scope for the statement are identified based on the statement parameters, and they are marked with the statement ID.</span></span> |
| <span data-ttu-id="50734-168">3</span><span class="sxs-lookup"><span data-stu-id="50734-168">3</span></span>           | <span data-ttu-id="50734-169">Calculé</span><span class="sxs-lookup"><span data-stu-id="50734-169">Calculated</span></span> | <span data-ttu-id="50734-170">Les lignes du relevé sont calculées et affichées.</span><span class="sxs-lookup"><span data-stu-id="50734-170">The statement lines are computed and shown.</span></span> |

<span data-ttu-id="50734-171">Le tableau suivant décrit les différents états et leur ordre lors du processus de validation.</span><span class="sxs-lookup"><span data-stu-id="50734-171">The following table describes the various states and their order during the posting process.</span></span>

| <span data-ttu-id="50734-172">Ordre des états</span><span class="sxs-lookup"><span data-stu-id="50734-172">State order</span></span> | <span data-ttu-id="50734-173">État</span><span class="sxs-lookup"><span data-stu-id="50734-173">State</span></span>                   | <span data-ttu-id="50734-174">Description</span><span class="sxs-lookup"><span data-stu-id="50734-174">Description</span></span> |
|-------------|-------------------------|-------------|
| <span data-ttu-id="50734-175">1</span><span class="sxs-lookup"><span data-stu-id="50734-175">1</span></span>           | <span data-ttu-id="50734-176">Vérifié</span><span class="sxs-lookup"><span data-stu-id="50734-176">Checked</span></span>                 | <span data-ttu-id="50734-177">Plusieurs validations sont effectuées pour les paramètres (par exemple, les frais de disposition), le relevé et les lignes du relevé (par exemple, la différence entre le montant calculé et le montant de la transaction).</span><span class="sxs-lookup"><span data-stu-id="50734-177">Multiple validations are done that are related to parameters (for example, the disposition charge), and to the statement and statement lines (for example, the difference between the counted amount and the transaction amount).</span></span> |
| <span data-ttu-id="50734-178">2</span><span class="sxs-lookup"><span data-stu-id="50734-178">2</span></span>           | <span data-ttu-id="50734-179">Regroupé</span><span class="sxs-lookup"><span data-stu-id="50734-179">Aggregated</span></span>              | <span data-ttu-id="50734-180">Les transactions de vente pour les clients avec et sans nom sont regroupées selon la configuration.</span><span class="sxs-lookup"><span data-stu-id="50734-180">Sales transactions for named and unnamed customers are aggregated based on the configuration.</span></span> <span data-ttu-id="50734-181">Chaque transaction regroupée est ensuite convertie en commande client.</span><span class="sxs-lookup"><span data-stu-id="50734-181">Every aggregated transaction is eventually converted to a sales order.</span></span> |
| <span data-ttu-id="50734-182">3</span><span class="sxs-lookup"><span data-stu-id="50734-182">3</span></span>           | <span data-ttu-id="50734-183">Commande client créée</span><span class="sxs-lookup"><span data-stu-id="50734-183">Customer order created</span></span>  | <span data-ttu-id="50734-184">Selon la transaction regroupée, les commandes client sont créées dans le système.</span><span class="sxs-lookup"><span data-stu-id="50734-184">Based on the aggregated transaction, sales orders are created in the system.</span></span> |
| <span data-ttu-id="50734-185">4</span><span class="sxs-lookup"><span data-stu-id="50734-185">4</span></span>           | <span data-ttu-id="50734-186">Commande client facturée</span><span class="sxs-lookup"><span data-stu-id="50734-186">Customer order invoiced</span></span> | <span data-ttu-id="50734-187">Les commandes client sont facturées.</span><span class="sxs-lookup"><span data-stu-id="50734-187">Sales orders are invoiced.</span></span> |
| <span data-ttu-id="50734-188">5</span><span class="sxs-lookup"><span data-stu-id="50734-188">5</span></span>           | <span data-ttu-id="50734-189">Remises validées</span><span class="sxs-lookup"><span data-stu-id="50734-189">Discounts posted</span></span>        | <span data-ttu-id="50734-190">Les journaux de remise périodiques sont validés selon la configuration.</span><span class="sxs-lookup"><span data-stu-id="50734-190">Periodic discount journals are posted based on the configuration.</span></span> |
| <span data-ttu-id="50734-191">6</span><span class="sxs-lookup"><span data-stu-id="50734-191">6</span></span>           | <span data-ttu-id="50734-192">Documents de revenus/dépenses validés</span><span class="sxs-lookup"><span data-stu-id="50734-192">Income/expense posted</span></span>   | <span data-ttu-id="50734-193">Les transaction de revenus/dépenses sont validées comme documents.</span><span class="sxs-lookup"><span data-stu-id="50734-193">Income/expense transactions are posted as vouchers.</span></span> |
| <span data-ttu-id="50734-194">7</span><span class="sxs-lookup"><span data-stu-id="50734-194">7</span></span>           | <span data-ttu-id="50734-195">Documents associés</span><span class="sxs-lookup"><span data-stu-id="50734-195">Vouchers linked</span></span>         | <span data-ttu-id="50734-196">Les journaux des paiements sont créés et associés à la facture correspondante.</span><span class="sxs-lookup"><span data-stu-id="50734-196">Payment journals are created and linked to the corresponding invoice.</span></span> |
| <span data-ttu-id="50734-197">8</span><span class="sxs-lookup"><span data-stu-id="50734-197">8</span></span>           | <span data-ttu-id="50734-198">Paiements validés</span><span class="sxs-lookup"><span data-stu-id="50734-198">Payments posted</span></span>         | <span data-ttu-id="50734-199">Les journaux des paiements sont validés.</span><span class="sxs-lookup"><span data-stu-id="50734-199">Payment journals are posted.</span></span> |
| <span data-ttu-id="50734-200">9</span><span class="sxs-lookup"><span data-stu-id="50734-200">9</span></span>           | <span data-ttu-id="50734-201">Cartes cadeaux validées</span><span class="sxs-lookup"><span data-stu-id="50734-201">Gift cards posted</span></span>       | <span data-ttu-id="50734-202">Les transactions de carte cadeau sont validées comme documents.</span><span class="sxs-lookup"><span data-stu-id="50734-202">Gift card transactions are posted as vouchers.</span></span> |
| <span data-ttu-id="50734-203">10</span><span class="sxs-lookup"><span data-stu-id="50734-203">10</span></span>          | <span data-ttu-id="50734-204">Validé(e)</span><span class="sxs-lookup"><span data-stu-id="50734-204">Posted</span></span>                  | <span data-ttu-id="50734-205">Le relevé est marqué comme validé.</span><span class="sxs-lookup"><span data-stu-id="50734-205">The statement is marked as posted.</span></span> |

<span data-ttu-id="50734-206">Chaque état dans les tableaux précédents est indépendant par nature, et une dépendance hiérarchique est établie entre les états.</span><span class="sxs-lookup"><span data-stu-id="50734-206">Every state in the preceding tables is independent in nature, and a hierarchical dependency is built between the states.</span></span> <span data-ttu-id="50734-207">Cette dépendance s'effectue de haut en bas.</span><span class="sxs-lookup"><span data-stu-id="50734-207">This dependency flows from top to bottom.</span></span> <span data-ttu-id="50734-208">Si le système rencontre des erreurs lorsqu'il traite un état, l'état précédent du relevé est rétabli.</span><span class="sxs-lookup"><span data-stu-id="50734-208">If the system encounters any errors while it's processing a state, the status of the statement is reverted to the previous state.</span></span> <span data-ttu-id="50734-209">Toute tentative ultérieure du processus reprend à partir de l'état qui a échoué et continue vers l'avant.</span><span class="sxs-lookup"><span data-stu-id="50734-209">Any subsequent reattempt of the process resumes from the state that failed and continues to move forward.</span></span> <span data-ttu-id="50734-210">Cette approche offre les avantages suivants :</span><span class="sxs-lookup"><span data-stu-id="50734-210">This approach has the following benefits:</span></span>

- <span data-ttu-id="50734-211">L'utilisateur a une visibilité totale sur l'état où l'erreur s'est produite.</span><span class="sxs-lookup"><span data-stu-id="50734-211">The user has complete visibility into the state where the error occurred.</span></span>
- <span data-ttu-id="50734-212">L'altération des données est évitée.</span><span class="sxs-lookup"><span data-stu-id="50734-212">Data corruption is avoided.</span></span> <span data-ttu-id="50734-213">Par exemple, dans la fonction héritée de validation des relevés, il y a des cas où certaines commandes client ont été facturées mais d'autres ont été laissées ouvertes.</span><span class="sxs-lookup"><span data-stu-id="50734-213">For example, in the legacy statement posting feature, there were instances where some sales orders were invoiced but others were left open.</span></span> <span data-ttu-id="50734-214">Il y a également des cas où certains journaux des paiements n'avaient pas de facture correspondante à régler, car la validation de la facture présentait une erreur.</span><span class="sxs-lookup"><span data-stu-id="50734-214">There were also instances where some payment journals didn't have a corresponding invoice to settle, because the invoice posting had an error.</span></span>
- <span data-ttu-id="50734-215">Les utilisateurs peuvent afficher l'état actuel d'un relevé à l'aide du bouton **Détails du statut** dans le groupe **Détails d'exécution** du relevé.</span><span class="sxs-lookup"><span data-stu-id="50734-215">Users can see the current state of a statement by using the **Status details** button in the **Execution details** group of the statement.</span></span> <span data-ttu-id="50734-216">La page des détails du statut a trois sections :</span><span class="sxs-lookup"><span data-stu-id="50734-216">The status details page has three sections:</span></span>

    - <span data-ttu-id="50734-217">La première section affiche le statut actuel du relevé, avec le code d'erreur et un message d'erreur détaillé, si une erreur s'est produite.</span><span class="sxs-lookup"><span data-stu-id="50734-217">The first section shows the current status of the statement, together with the error code and a detailed error message, if an error occurred.</span></span>
    - <span data-ttu-id="50734-218">La deuxième section affiche les différents états du processus de calcul.</span><span class="sxs-lookup"><span data-stu-id="50734-218">The second section shows the various states of the calculation process.</span></span> <span data-ttu-id="50734-219">Les signaux visuels indiquent les états qui ont été correctement exécutés, les états qui n'ont pas pu être exécutés à cause d'erreurs et les états qui n'ont pas encore été exécutés.</span><span class="sxs-lookup"><span data-stu-id="50734-219">Visual cues indicate states that have been successfully run, states that could not be run because of errors, and states that haven't yet been run.</span></span>
    - <span data-ttu-id="50734-220">La troisième section affiche les différents états du processus de validation.</span><span class="sxs-lookup"><span data-stu-id="50734-220">The third section shows the various states of the posting process.</span></span> <span data-ttu-id="50734-221">Les signaux visuels indiquent les états qui ont été correctement exécutés, les états qui n'ont pas pu être exécutés à cause d'erreurs et les états qui n'ont pas encore été exécutés.</span><span class="sxs-lookup"><span data-stu-id="50734-221">Visual cues indicate states that have been successfully run, states that could not be run because of errors, and states that haven't yet been run.</span></span>

<span data-ttu-id="50734-222">En outre, l'en-tête des deuxième et troisième sections présente le statut global du processus approprié.</span><span class="sxs-lookup"><span data-stu-id="50734-222">Additionally, the header of the second and third sections shows the overall status of the relevant process.</span></span>

### <a name="event-logs"></a><span data-ttu-id="50734-223">Journaux des événements</span><span class="sxs-lookup"><span data-stu-id="50734-223">Event logs</span></span>

<span data-ttu-id="50734-224">Un relevé passe par différentes opérations (par exemple, créer, calculer, effacer et valider), et plusieurs instances de la même opération peuvent être appelées pendant le cycle de vie du relevé.</span><span class="sxs-lookup"><span data-stu-id="50734-224">A statement goes through various operations (for example, Create, Calculate, Clear, and Post), and multiple instances of the same operation might be called during the statement's lifecycle.</span></span> <span data-ttu-id="50734-225">Par exemple, une fois qu'un relevé est créé et calculé, un utilisateur peut l'effacer et le recalculer.</span><span class="sxs-lookup"><span data-stu-id="50734-225">For example, after a statement is created and calculated, a user can clear the statement and calculate it again.</span></span> <span data-ttu-id="50734-226">Le bouton **Journaux des événements** dans le groupe **Détails d'exécution** du relevé fournit une piste d'audit complète des différentes opérations appelées sur un relevé, ainsi que des informations sur le moment où ces opérations ont été appelées.</span><span class="sxs-lookup"><span data-stu-id="50734-226">The **Event logs** button in the **Execution details** group of the statement provides a complete audit trail of the various operations that were called on a statement, together with information about when those operations were called.</span></span>

### <a name="aggregated-transactions"></a><span data-ttu-id="50734-227">Transactions regroupées</span><span class="sxs-lookup"><span data-stu-id="50734-227">Aggregated transactions</span></span>

<span data-ttu-id="50734-228">Lors du processus de validation, les transactions de vente sont regroupées selon la configuration.</span><span class="sxs-lookup"><span data-stu-id="50734-228">During the posting process, the sales transactions are aggregated based on the configuration.</span></span> <span data-ttu-id="50734-229">Ces transactions regroupées sont stockées dans le système et utilisées pour créer des commandes client.</span><span class="sxs-lookup"><span data-stu-id="50734-229">These aggregated transactions are stored in the system and used to create sales orders.</span></span> <span data-ttu-id="50734-230">Chaque transaction regroupée crée une commande client correspondante dans le système.</span><span class="sxs-lookup"><span data-stu-id="50734-230">Every aggregated transaction creates one corresponding sales order in the system.</span></span> <span data-ttu-id="50734-231">Vous pouvez afficher les transactions regroupées à l'aide du bouton **Transactions regroupées** dans le groupe **Détails d'exécution** du relevé.</span><span class="sxs-lookup"><span data-stu-id="50734-231">You can view the aggregated transactions by using the **Aggregated transactions** button in the **Execution details** group of the statement.</span></span>

<span data-ttu-id="50734-232">L'onglet **Détails de la commande client** d'une transaction regroupée affiche les informations suivantes :</span><span class="sxs-lookup"><span data-stu-id="50734-232">The **Sales order detail** tab of an aggregated transaction shows the following information:</span></span>

- <span data-ttu-id="50734-233">**ID enregistrement** – ID de la transaction regroupée.</span><span class="sxs-lookup"><span data-stu-id="50734-233">**Record ID** – The ID of the aggregated transaction.</span></span>
- <span data-ttu-id="50734-234">**Numéro de relevé** – Relevé auquel la transaction regroupée appartient.</span><span class="sxs-lookup"><span data-stu-id="50734-234">**Statement number** – The statement that the aggregated transaction belongs to.</span></span>
- <span data-ttu-id="50734-235">**Date** – Date de création de la transaction regroupée.</span><span class="sxs-lookup"><span data-stu-id="50734-235">**Date** – The date when the aggregated transaction was created.</span></span>
- <span data-ttu-id="50734-236">**ID ventes** – ID commande client lorsque une commande client est créée à partir de la transaction regroupée.</span><span class="sxs-lookup"><span data-stu-id="50734-236">**Sales ID** – When a sales order is created from the aggregated transaction, the sales order ID.</span></span> <span data-ttu-id="50734-237">Si ce champ est vide, la commande client correspondante n'a pas été créée.</span><span class="sxs-lookup"><span data-stu-id="50734-237">If this field is blank, the corresponding sales order hasn't been created.</span></span>
- <span data-ttu-id="50734-238">**Nombre de lignes regroupées** – Nombre total de lignes de la transaction regroupée et de la commande client.</span><span class="sxs-lookup"><span data-stu-id="50734-238">**Number of aggregated lines** – The total number of lines for the aggregated transaction and sales order.</span></span>
- <span data-ttu-id="50734-239">**Statut** – Dernier statut de la transaction regroupée.</span><span class="sxs-lookup"><span data-stu-id="50734-239">**Status** – The last status of the aggregated transaction.</span></span>
- <span data-ttu-id="50734-240">**ID facture** – ID facture client lorsque la commande client de la transaction regroupée est facturée.</span><span class="sxs-lookup"><span data-stu-id="50734-240">**Invoice ID** – When the sales order for the aggregated transaction is invoiced, the sales invoice ID.</span></span> <span data-ttu-id="50734-241">Si ce champ est vide, la facture de la commande client n'a pas été validée.</span><span class="sxs-lookup"><span data-stu-id="50734-241">If this field is blank, the invoice for the sales order hasn't been posted.</span></span>

<span data-ttu-id="50734-242">L'onglet **Détails de la transaction** d'une transaction regroupée affiche toutes les transactions de vente au détail qui ont été extraites dans la transaction regroupée.</span><span class="sxs-lookup"><span data-stu-id="50734-242">The **Transaction details** tab of an aggregated transaction shows all the retail transactions that have been pulled into the aggregated transaction.</span></span> <span data-ttu-id="50734-243">Les lignes regroupées de la transaction regroupée affiche tous les enregistrements regroupés à partir des transactions de vente au détail.</span><span class="sxs-lookup"><span data-stu-id="50734-243">The aggregated lines on the aggregated transaction show all the aggregated records from the retail transactions.</span></span> <span data-ttu-id="50734-244">Les lignes regroupées affichent également des détails comme l'article, la variante, la quantité, le prix, le montant net, l'unité et l'entrepôt.</span><span class="sxs-lookup"><span data-stu-id="50734-244">The aggregated lines also show details such as the item, variant, quantity, price, net amount, unit, and warehouse.</span></span> <span data-ttu-id="50734-245">En gros, chaque ligne regroupée correspond à une ligne de commande client.</span><span class="sxs-lookup"><span data-stu-id="50734-245">Basically, each aggregated line corresponds to one sales order line.</span></span>

<span data-ttu-id="50734-246">Dans la page **Transactions regroupées**, vous pouvez télécharger le code XML pour une transaction regroupée spécifique à l'aide du bouton **Exporter la commande client au format XML**.</span><span class="sxs-lookup"><span data-stu-id="50734-246">From the **Aggregated transactions** page, you can download the XML for a specific aggregated transaction by using the **Export sales order XML** button.</span></span> <span data-ttu-id="50734-247">Vous pouvez utiliser le code XML pour déboguer les problèmes qui affectent la création et la validation de la commande client.</span><span class="sxs-lookup"><span data-stu-id="50734-247">You can use the XML to debug issues that involve sales order creation and posting.</span></span> <span data-ttu-id="50734-248">Téléchargez le code XML, chargez-le dans un environnement de test et déboguez le problème dans l'environnement de test.</span><span class="sxs-lookup"><span data-stu-id="50734-248">Just download the XML, upload it to a test environment, and debug the issue in the test environment.</span></span> <span data-ttu-id="50734-249">La fonctionnalité de téléchargement du code XML pour les transactions regroupées n'est pas disponible pour les relevés qui ont été validés.</span><span class="sxs-lookup"><span data-stu-id="50734-249">The functionality for downloading the XML for aggregated transactions isn't available for statements that have been posted.</span></span>

<span data-ttu-id="50734-250">La vue Transaction regroupée offre les avantages suivantes :</span><span class="sxs-lookup"><span data-stu-id="50734-250">The aggregated transaction view provides the following benefits:</span></span>

- <span data-ttu-id="50734-251">L'utilisateur a une visibilité sur les transactions regroupées qui ont échoué lors de la création de la commande client et sur les commandes client qui ont échoué lors de la facturation.</span><span class="sxs-lookup"><span data-stu-id="50734-251">The user has visibility into the aggregated transactions that failed during sales order creation and the sales orders that failed during invoicing.</span></span>
- <span data-ttu-id="50734-252">L'utilisateur a une visibilité sur la manière dont les transactions sont regroupées.</span><span class="sxs-lookup"><span data-stu-id="50734-252">The user has visibility into how transactions are aggregated.</span></span>
- <span data-ttu-id="50734-253">L'utilisateur a une piste d'audit complète depuis les transactions de vente au détail aux factures client en passant par les commandes client.</span><span class="sxs-lookup"><span data-stu-id="50734-253">The user has a complete audit trail, from retail transactions, to sales orders, to sales invoices.</span></span> <span data-ttu-id="50734-254">Cette piste d'audit n'était pas disponible dans la fonction héritée de validation des relevés.</span><span class="sxs-lookup"><span data-stu-id="50734-254">This audit trail wasn't available in the legacy statement posting feature.</span></span>
- <span data-ttu-id="50734-255">Le fichier XML regroupé facilite l'identification des problèmes lors de la création et de la facturation de la commande client.</span><span class="sxs-lookup"><span data-stu-id="50734-255">Aggregated XML file make it easier to identify issues during sales order creation and invoicing.</span></span>

### <a name="journal-vouchers"></a><span data-ttu-id="50734-256">N° documents de journal</span><span class="sxs-lookup"><span data-stu-id="50734-256">Journal vouchers</span></span>

<span data-ttu-id="50734-257">Le bouton **N° document de journal** dans le groupe **Détails d'exécution** du relevé affiche les différentes transactions de N° document créées pour un relevé et associées aux remises, comptes de revenus/dépenses, cartes cadeaux, etc.</span><span class="sxs-lookup"><span data-stu-id="50734-257">The **Journal vouchers** button in the **Execution details** group of the statement shows all the various voucher transactions that are created for a statement, and that are related to discounts, income/expense accounts, gift cards, and so on.</span></span>

<span data-ttu-id="50734-258">Pour le moment, le programme affiche ces données uniquement pour les relevés validés.</span><span class="sxs-lookup"><span data-stu-id="50734-258">Currently, the program shows this data only for posted statements.</span></span>

### <a name="payment-journals"></a><span data-ttu-id="50734-259">Journaux des paiements</span><span class="sxs-lookup"><span data-stu-id="50734-259">Payment journals</span></span>

<span data-ttu-id="50734-260">Le bouton **Journaux des paiements** dans le groupe **Détails d'exécution** du relevé affiche les différents journaux des paiements créés pour un relevé.</span><span class="sxs-lookup"><span data-stu-id="50734-260">The **Payment journals** button in the **Execution details** group of the statement shows all the various payment journals that are created for a statement.</span></span>

<span data-ttu-id="50734-261">Pour le moment, le programme affiche ces données uniquement pour les relevés validés.</span><span class="sxs-lookup"><span data-stu-id="50734-261">Currently, the program shows this data only for posted statements.</span></span>

## <a name="other-improvements"></a><span data-ttu-id="50734-262">Autres améliorations</span><span class="sxs-lookup"><span data-stu-id="50734-262">Other improvements</span></span>

<span data-ttu-id="50734-263">D'autres améliorations importantes visibles par les utilisateurs ont été apportées à la fonction de validation des relevés.</span><span class="sxs-lookup"><span data-stu-id="50734-263">Other, back-end improvements that users can see have been made to the statement posting feature.</span></span> <span data-ttu-id="50734-264">Voici quelques exemples :</span><span class="sxs-lookup"><span data-stu-id="50734-264">Here are some examples:</span></span>

- <span data-ttu-id="50734-265">Le regroupement ne prend pas en compte le personnel, le terminal et les entités d'équipe.</span><span class="sxs-lookup"><span data-stu-id="50734-265">The aggregation doesn't consider the staff, terminal, and shift entities.</span></span> <span data-ttu-id="50734-266">Comme il y a moins de paramètres d'agrégation, moins de lignes de commande client doivent être traitées.</span><span class="sxs-lookup"><span data-stu-id="50734-266">Because there are fewer aggregation parameters, fewer sales order lines must be processed.</span></span>
- <span data-ttu-id="50734-267">La présence de blocages sur les tables de transaction de vente au détail est réduite par la création de tables d'extension supplémentaires et l'exécution d'opérations d'insertion au lieu d'opérations de mise à jour pour les tables de transaction de vente au détail.</span><span class="sxs-lookup"><span data-stu-id="50734-267">The occurrence of deadlock on retail transaction tables is reduced by introducing additional extension tables and by doing insert operations instead of update operations on the retail transaction tables.</span></span>
- <span data-ttu-id="50734-268">Le nombre de tâches de traitement par lot en cours d'exécution a été paramétré et limité.</span><span class="sxs-lookup"><span data-stu-id="50734-268">The number of running batch tasks has been parameterized and limited.</span></span> <span data-ttu-id="50734-269">Par conséquent, ce nombre peut être adapté spécifiquement à l'environnement du client.</span><span class="sxs-lookup"><span data-stu-id="50734-269">Therefore, this number can be fine-tuned specifically to a customer's environment.</span></span> <span data-ttu-id="50734-270">Dans la fonction héritée de validation des relevés, un nombre illimité de tâches de traitement par lots était créé en même temps.</span><span class="sxs-lookup"><span data-stu-id="50734-270">In the legacy statement posting feature, an unlimited number of batch tasks was created at the same time.</span></span> <span data-ttu-id="50734-271">On obtenait des charges non gérables, des frais généraux et des goulots d'étranglement sur le serveur de traitement par lots.</span><span class="sxs-lookup"><span data-stu-id="50734-271">The results were unmanageable loads, overhead, and bottlenecks on the batch server.</span></span>
- <span data-ttu-id="50734-272">Les relevés sont efficacement mis en file d'attente pour traitement en donnant la priorité aux relevés ayant le nombre maximal de transactions.</span><span class="sxs-lookup"><span data-stu-id="50734-272">Statements are efficiently queued for processing by prioritizing the statements that have the maximum number of transactions.</span></span>
- <span data-ttu-id="50734-273">Les processus de traitement par lots comme **Calcul des relevés en mode de traitement par lots** et **Valider les relevés en mode de traitement par lots** sont exécutés uniquement en mode de traitement par lots.</span><span class="sxs-lookup"><span data-stu-id="50734-273">Batch processes such as **Calculate statements in batch** and **Post statements in batch** are run only in batch mode.</span></span> <span data-ttu-id="50734-274">Dans la fonction héritée de validation des relevés, les utilisateurs peuvent choisir d'exécuter ces processus de traitement par lots en mode interactif qui est une opération à thread unique, contrairement aux processus de traitement par lots à plusieurs threads.</span><span class="sxs-lookup"><span data-stu-id="50734-274">In the legacy statement posting feature, users could choose to run these batch processes in an interactive mode which is s single threaded operation unlike batch processes which are multi-threaded.</span></span>
- <span data-ttu-id="50734-275">Dans la fonction héritée de validation des relevés, l'échec d'une tâche de traitement par lots place l'ensemble du traitement par lots à l'état d'erreur.</span><span class="sxs-lookup"><span data-stu-id="50734-275">In the legacy statement posting feature, any failure of a batch task put the whole batch job in an error state.</span></span> <span data-ttu-id="50734-276">Dans la fonction améliorée, les échecs des tâches de traitement par lots ne placent pas le traitement par lots à l'état d'erreur si d'autres tâches de traitement par lots sont correctement exécutées.</span><span class="sxs-lookup"><span data-stu-id="50734-276">In the improved feature, batch task failures don't put the batch job in an error state if other batch tasks are successfully completed.</span></span> <span data-ttu-id="50734-277">Vous devez évaluer le statut de validation d'une série d'exécutions du traitement par lots à l'aide de la page **Relevés de vente au détail**, où vous pouvez voir tous les relevés qui n'ont pas été validés en raison d'erreurs.</span><span class="sxs-lookup"><span data-stu-id="50734-277">You should assess the posting status for a batch execution run by using the **Retail statements** page, where you can see any statements that weren't posted because of errors.</span></span>
- <span data-ttu-id="50734-278">Dans la fonction héritée de validation des relevés, la première occurrence d'un échec entraîne l'échec de l'ensemble du traitement par lots.</span><span class="sxs-lookup"><span data-stu-id="50734-278">In the legacy statement posting feature, the first occurrence of a statement failure causes the whole batch to fail.</span></span> <span data-ttu-id="50734-279">Les relevés restants ne sont pas traités.</span><span class="sxs-lookup"><span data-stu-id="50734-279">The remaining statements aren't processed.</span></span> <span data-ttu-id="50734-280">Dans la fonction améliorée, le processus de traitement par lots continue à traiter tous les relevés, même si certains relevés échouent.</span><span class="sxs-lookup"><span data-stu-id="50734-280">In the improved feature, the batch process continues to process all statements, even if some of the statements fail.</span></span> <span data-ttu-id="50734-281">L'un des avantages est que les utilisateurs ont une visibilité sur le nombre exact de relevés contenant des erreurs.</span><span class="sxs-lookup"><span data-stu-id="50734-281">One benefit is that users gain visibility into the exact number of statements that have errors.</span></span> <span data-ttu-id="50734-282">Par conséquent, les utilisateurs ne sont pas bloqués dans une boucle continue de résolution des erreurs et d'exécution du processus de validation des relevés jusqu'à ce que tous les relevés soient validés.</span><span class="sxs-lookup"><span data-stu-id="50734-282">Therefore, users don't have to be stuck in a continuous loop of fixing the errors and running the post statement process till all statements are posted.</span></span>

## <a name="general-guidance-about-the-statement-posting-process"></a><span data-ttu-id="50734-283">Recommandations générales relatives au processus de validation des relevés</span><span class="sxs-lookup"><span data-stu-id="50734-283">General guidance about the statement posting process</span></span>

- <span data-ttu-id="50734-284">Nous vous recommandons d'exécuter le processus de validation des relevés en mode de traitement par lots, car les exécutions en mode de traitement par lots tirent parti de la puissance du cadre de traitement par lots en termes de multithreading.</span><span class="sxs-lookup"><span data-stu-id="50734-284">We recommend that you run the statement posting process in a batch, because batch runs take advantage of the power of the batch framework in terms of multithreading.</span></span> <span data-ttu-id="50734-285">Le multithreading permet de gérer les gros volumes de transactions qui entrent normalement dans le cadre des validations de relevé.</span><span class="sxs-lookup"><span data-stu-id="50734-285">Multithreading is required in order to handle the huge volumes of transactions that are normally seen in statement postings.</span></span>
- <span data-ttu-id="50734-286">Nous vous recommandons d'activer le stock physique négatif dans le groupe de modèles d'article pour que la validation s'effectue de manière transparente.</span><span class="sxs-lookup"><span data-stu-id="50734-286">We recommend that you turn on negative physical inventory on the item model group, so that you have a seamless posting experience.</span></span> <span data-ttu-id="50734-287">Dans certains scénarios, il n'est pas possible de valider des relevés négatifs sauf si un stock physique négatif est disponible.</span><span class="sxs-lookup"><span data-stu-id="50734-287">In some scenarios, negative statements might not be able to be posted unless there is negative physical inventory.</span></span> <span data-ttu-id="50734-288">Par exemple, en théorie, s'il existe une seule unité d'un article en stock et s'il existe une transaction de vente et une transaction de retour pour l'article, la validation de la transaction doit être possible même si le stock négatif n'est pas activé.</span><span class="sxs-lookup"><span data-stu-id="50734-288">For example, in theory, if there is only one unit of an item in inventory, and there have been a sales transaction and a return transaction for the item, the transaction should be able to be posted even if negative inventory isn't turned on.</span></span> <span data-ttu-id="50734-289">Toutefois, comme le processus de validation des relevés extrait la transaction de vente et la transaction de retour dans une commande client unique, il n'y a aucune garantie que la ligne de vente soit validée en premier, suivie de la ligne de retour.</span><span class="sxs-lookup"><span data-stu-id="50734-289">However, because the statement posting process pulls both the sales transaction and the return transaction in a single customer order, there is no guarantee that the sales line will be posted first, followed by the return line.</span></span> <span data-ttu-id="50734-290">Par conséquent, des erreurs peuvent se produire.</span><span class="sxs-lookup"><span data-stu-id="50734-290">Therefore, errors can occur.</span></span> <span data-ttu-id="50734-291">Si le stock négatif est activé dans ce scénario, la validation de la transaction n'est pas affectée négativement, et le système reflète correctement le stock.</span><span class="sxs-lookup"><span data-stu-id="50734-291">If negative inventory is turned on in this scenario, the transaction posting isn't negatively affected, and the system will correctly reflect the inventory.</span></span>
- <span data-ttu-id="50734-292">Il est recommandé d'utiliser le regroupement lorsque vous calculez et validez des relevés.</span><span class="sxs-lookup"><span data-stu-id="50734-292">We recommend that you use aggregation while you calculate and post statements.</span></span> <span data-ttu-id="50734-293">Par conséquent, les paramètres suivants sont recommandés pour certains paramètres de regroupement :</span><span class="sxs-lookup"><span data-stu-id="50734-293">Therefore, the following settings are recommended for some of the aggregation parameters:</span></span>

    - <span data-ttu-id="50734-294">Accédez à **Vente au détail** \> **Configuration du siège** \> **Paramètres** \> **Paramètres des ventes au détail**.</span><span class="sxs-lookup"><span data-stu-id="50734-294">Go to **Retail** \> **Headquarters setup** \> **Parameters** \> **Retail parameters**.</span></span> <span data-ttu-id="50734-295">Ensuite, sous l'onglet **Validation**, dans l'organisateur **Mise à jour du stock**, dans le champ **Niveau de détail**, sélectionnez **Synthèse**.</span><span class="sxs-lookup"><span data-stu-id="50734-295">Then, on the **Posting** tab, on the **Inventory update** FastTab, in the **Detail level** field, select **Summary**.</span></span>
    - <span data-ttu-id="50734-296">Accédez à **Vente au détail** \> **Configuration du siège** \> **Paramètres** \> **Paramètres des ventes au détail**.</span><span class="sxs-lookup"><span data-stu-id="50734-296">Go to **Retail** \> **Headquarters setup** \> **Parameters** \> **Retail parameters**.</span></span> <span data-ttu-id="50734-297">Ensuite, sous l'onglet **Validation**, dans l'organisateur **Regroupement**, définissez l'option **Transactions de N° document** sur **Oui**.</span><span class="sxs-lookup"><span data-stu-id="50734-297">Then, on the **Posting** tab, on the **Aggregation** FastTab, set the **Voucher transactions** option to **Yes**.</span></span>
