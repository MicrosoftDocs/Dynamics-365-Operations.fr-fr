---
title: Migration de type de données de devise pour la double écriture
description: Cette rubrique décrit comment modifier le nombre de décimales prises en charge par la double écriture pour la devise.
author: RamaKrishnamoorthy
manager: AnnBe
ms.date: 04/06/2020
ms.topic: article
ms.prod: ''
ms.service: dynamics-ax-applications
ms.technology: ''
ms.search.form: ''
audience: Application User, IT Pro
ms.reviewer: rhaertle
ms.custom: ''
ms.assetid: ''
ms.search.region: global
ms.search.industry: ''
ms.author: ramasri
ms.dyn365.ops.version: ''
ms.search.validFrom: 2020-04-06
ms.openlocfilehash: 6a0f114bce6bdb7813c93e9441744d67cd043c30
ms.sourcegitcommit: 659375c4cc7f5524cbf91cf6160f6a410960ac16
ms.translationtype: HT
ms.contentlocale: fr-FR
ms.lasthandoff: 12/05/2020
ms.locfileid: "4683728"
---
# <a name="currency-data-type-migration-for-dual-write"></a><span data-ttu-id="c085e-103">Migration de type de données de devise pour la double écriture</span><span class="sxs-lookup"><span data-stu-id="c085e-103">Currency data-type migration for dual-write</span></span>

[!include [banner](../../includes/banner.md)]

[!include [rename-banner](~/includes/cc-data-platform-banner.md)]

<span data-ttu-id="c085e-104">Vous pouvez augmenter le nombre de décimales prises en charge pour les valeurs monétaires à un maximum de 10.</span><span class="sxs-lookup"><span data-stu-id="c085e-104">You can increase the number of decimal places that are supported for currency values to a maximum of 10.</span></span> <span data-ttu-id="c085e-105">La limite par défaut est de quatre décimales.</span><span class="sxs-lookup"><span data-stu-id="c085e-105">The default limit is four decimal places.</span></span> <span data-ttu-id="c085e-106">En augmentant le nombre de décimales, vous contribuez à éviter la perte de données lorsque vous utilisez la double écriture pour synchroniser les données.</span><span class="sxs-lookup"><span data-stu-id="c085e-106">By increasing the number of decimal places, you help prevent data loss when you use dual-write to sync data.</span></span> <span data-ttu-id="c085e-107">L’augmentation du nombre de décimales est un changement disponible.</span><span class="sxs-lookup"><span data-stu-id="c085e-107">The increase in the number of decimal places is an opt-in change.</span></span> <span data-ttu-id="c085e-108">Pour l’implémenter, vous devez demander l’assistance de Microsoft.</span><span class="sxs-lookup"><span data-stu-id="c085e-108">To implement it, you must request assistance from Microsoft.</span></span>

<span data-ttu-id="c085e-109">Le processus de modification du nombre de décimales comporte deux étapes :</span><span class="sxs-lookup"><span data-stu-id="c085e-109">The process of changing the number of decimal places has two steps:</span></span>

1. <span data-ttu-id="c085e-110">Demander la migration à partir de Microsoft.</span><span class="sxs-lookup"><span data-stu-id="c085e-110">Request migration from Microsoft.</span></span>
2. <span data-ttu-id="c085e-111">Modifier le nombre d’emplacements des décimales dans Dataverse.</span><span class="sxs-lookup"><span data-stu-id="c085e-111">Change the number of decimal places in Dataverse.</span></span>

<span data-ttu-id="c085e-112">L’application Finance and Operations et Dataverse doivent prendre en charge le même nombre de décimales dans les valeurs monétaires.</span><span class="sxs-lookup"><span data-stu-id="c085e-112">The Finance and Operations app and Dataverse must support the same number of decimal places in currency values.</span></span> <span data-ttu-id="c085e-113">Sinon, une perte de données peut se produire lorsque ces informations sont synchronisées entre les applications.</span><span class="sxs-lookup"><span data-stu-id="c085e-113">Otherwise, data loss can occur when this information is synced between apps.</span></span> <span data-ttu-id="c085e-114">Le processus de migration reconfigure la façon dont les devises et les taux de change sont stockés, mais il ne modifie aucune donnée.</span><span class="sxs-lookup"><span data-stu-id="c085e-114">The migration process reconfigures the way that currency and exchange rate values are stored, but it doesn't change any data.</span></span> <span data-ttu-id="c085e-115">Une fois la migration terminée, le nombre de décimales pour les codes de devise et la tarification peut être augmenté, et les données que les utilisateurs saisissent et consultent peuvent avoir une précision décimale plus élevée.</span><span class="sxs-lookup"><span data-stu-id="c085e-115">After the migration is completed, the number of decimal places for currency codes and pricing can be increased, and the data that users enter and view can have more decimal precision.</span></span>

<span data-ttu-id="c085e-116">La migration est facultative.</span><span class="sxs-lookup"><span data-stu-id="c085e-116">Migration is optional.</span></span> <span data-ttu-id="c085e-117">Si vous pouvez bénéficier de la prise en charge de davantage de décimales, nous vous recommandons d’envisager la migration.</span><span class="sxs-lookup"><span data-stu-id="c085e-117">If you might benefit from support for more decimal places, we recommend that you consider migration.</span></span> <span data-ttu-id="c085e-118">Les organisations qui ne nécessitent pas de valeurs comportant plus de quatre décimales n’ont pas à migrer.</span><span class="sxs-lookup"><span data-stu-id="c085e-118">Organizations that don't require values that have more than four decimal places don't have to migrate.</span></span>

## <a name="requesting-migration-from-microsoft"></a><span data-ttu-id="c085e-119">Demande de migration à partir de Microsoft</span><span class="sxs-lookup"><span data-stu-id="c085e-119">Requesting migration from Microsoft</span></span>

<span data-ttu-id="c085e-120">Le stockage des champs de devises existants dans Dataverse ne peut pas prendre en charge plus de quatre décimales.</span><span class="sxs-lookup"><span data-stu-id="c085e-120">Storage for existing currency fields in Dataverse can't support more than four decimal places.</span></span> <span data-ttu-id="c085e-121">Par conséquent, pendant le processus de migration, les valeurs monétaires sont copiées dans de nouveaux champs internes de la base de données.</span><span class="sxs-lookup"><span data-stu-id="c085e-121">Therefore, during the migration process, currency values are copied to new internal fields in the database.</span></span> <span data-ttu-id="c085e-122">Ce processus se produit en continu jusqu’à ce que toutes les données aient été migrées.</span><span class="sxs-lookup"><span data-stu-id="c085e-122">This process occurs continuously until all data has been migrated.</span></span> <span data-ttu-id="c085e-123">En interne, à la fin de la migration, les nouveaux types de stockage remplacent les anciens types de stockage, mais les valeurs des données restent inchangées.</span><span class="sxs-lookup"><span data-stu-id="c085e-123">Internally, at the end of migration, the new storage types replace the old storage types, but the data values are unchanged.</span></span> <span data-ttu-id="c085e-124">Les champs monétaires peuvent alors prendre en charge jusqu’à 10 décimales.</span><span class="sxs-lookup"><span data-stu-id="c085e-124">The currency fields can then support up to 10 decimal places.</span></span> <span data-ttu-id="c085e-125">Pendant le processus de migration, Dataverse peut continuer à être utilisé sans interruption.</span><span class="sxs-lookup"><span data-stu-id="c085e-125">During the migration process, Dataverse can continue to be used without interruption.</span></span>

<span data-ttu-id="c085e-126">Dans le même temps, les taux de change sont modifiés de sorte qu’ils prennent en charge jusqu’à 12 décimales au lieu de la limite actuelle de 10.</span><span class="sxs-lookup"><span data-stu-id="c085e-126">At the same time, exchange rates are modified so that they support up to 12 decimal places instead of the current limit of 10.</span></span> <span data-ttu-id="c085e-127">Cette modification est nécessaire pour que le nombre de décimales soit le même dans l’application Finance and Operations et Dataverse.</span><span class="sxs-lookup"><span data-stu-id="c085e-127">This change is required so that the number of decimal places is the same in both the Finance and Operations app and Dataverse.</span></span>

<span data-ttu-id="c085e-128">La migration ne modifie aucune donnée.</span><span class="sxs-lookup"><span data-stu-id="c085e-128">Migration doesn't change any data.</span></span> <span data-ttu-id="c085e-129">Une fois les champs de devise et de taux de change convertis, les administrateurs peuvent configurer le système pour utiliser jusqu’à 10 décimales pour les champs de devise en spécifiant le nombre de décimales pour chaque devise de transaction et pour la tarification.</span><span class="sxs-lookup"><span data-stu-id="c085e-129">After the currency and exchange rate fields are converted, admins can configure the system to use up to 10 decimal places for currency fields by specifying the number of decimal places for each transaction currency and for pricing.</span></span>

### <a name="request-a-migration"></a><span data-ttu-id="c085e-130">Demander une migration</span><span class="sxs-lookup"><span data-stu-id="c085e-130">Request a migration</span></span>

<span data-ttu-id="c085e-131">Pour rendre cette fonctionnalité disponible, envoyez un e-mail à **CDSExpandDecimal@microsoft.com** en fournissant les informations suivantes :</span><span class="sxs-lookup"><span data-stu-id="c085e-131">To make this feature available, email **CDSExpandDecimal@microsoft.com**, and include the following information:</span></span>

+ <span data-ttu-id="c085e-132">**Objet :** Demande d’activation de la prise en charge décimale étendue pour \<organizationID\></span><span class="sxs-lookup"><span data-stu-id="c085e-132">**Subject:** Request to enable expanded decimal support for \<organizationID\></span></span>
+ <span data-ttu-id="c085e-133">**Corps :** Je souhaite activer le support décimal étendu pour mon organisation \<organizationID\>.</span><span class="sxs-lookup"><span data-stu-id="c085e-133">**Body:** I would like to enable expanded decimal support for my org \<organizationID\>.</span></span>

<span data-ttu-id="c085e-134">Un représentant Microsoft vous contactera dans les deux à trois jours ouvrables pour les prochaines étapes.</span><span class="sxs-lookup"><span data-stu-id="c085e-134">A Microsoft representative will contact you within two to three business days for the next steps.</span></span>

<span data-ttu-id="c085e-135">Lorsque vous demandez une migration, vous devez connaître les détails suivants et les planifier en conséquence :</span><span class="sxs-lookup"><span data-stu-id="c085e-135">When you request a migration, you should be aware of the following details and plan for them accordingly:</span></span>

+ <span data-ttu-id="c085e-136">Le temps requis pour migrer les données dépend de la quantité de données dans le système.</span><span class="sxs-lookup"><span data-stu-id="c085e-136">The time that is required to migrate the data depends the amount of data in the system.</span></span> <span data-ttu-id="c085e-137">La migration de grandes bases de données peut prendre plusieurs jours.</span><span class="sxs-lookup"><span data-stu-id="c085e-137">Migration of large databases can take several days.</span></span>
+ <span data-ttu-id="c085e-138">La taille de la base de données augmente temporairement pendant la migration, car un espace supplémentaire est nécessaire pour les index.</span><span class="sxs-lookup"><span data-stu-id="c085e-138">The size of the database temporarily increases while the migration is running, because additional space is needed for indexes.</span></span> <span data-ttu-id="c085e-139">La plupart de l’espace supplémentaire est libéré lorsque la migration est terminée.</span><span class="sxs-lookup"><span data-stu-id="c085e-139">Most of the additional space is freed when the migration is completed.</span></span>
+ <span data-ttu-id="c085e-140">Au cours du processus de migration, si des erreurs se produisent qui empêchent la migration de se terminer, le système envoie des alertes au support Microsoft, afin que le personnel de support puisse intervenir.</span><span class="sxs-lookup"><span data-stu-id="c085e-140">During the migration process, if errors occur that prevent the migration from being completed, the system raise alerts to Microsoft Support, so that Support staff can intervene.</span></span> <span data-ttu-id="c085e-141">Cependant, même si des erreurs se produisent lors de la migration, Dataverse reste entièrement disponible pour une utilisation régulière.</span><span class="sxs-lookup"><span data-stu-id="c085e-141">However, even if errors occur during the migration, Dataverse remains fully available for regular use.</span></span>
+ <span data-ttu-id="c085e-142">Le processus de migration n’est pas réversible.</span><span class="sxs-lookup"><span data-stu-id="c085e-142">The migration process isn't reversible.</span></span>

## <a name="changing-the-number-of-decimal-places"></a><span data-ttu-id="c085e-143">Modification du nombre d’emplacements des décimales</span><span class="sxs-lookup"><span data-stu-id="c085e-143">Changing the number of decimal places</span></span>

<span data-ttu-id="c085e-144">Une fois la migration terminée, Dataverse peut stocker des nombres qui ont plus de décimales.</span><span class="sxs-lookup"><span data-stu-id="c085e-144">After the migration is completed, Dataverse can store numbers that have more decimal places.</span></span> <span data-ttu-id="c085e-145">Les administrateurs peuvent choisir le nombre de décimales à utiliser pour des codes de devise spécifiques et pour la tarification.</span><span class="sxs-lookup"><span data-stu-id="c085e-145">Admins can choose how many decimal places are used for specific currency codes and for pricing.</span></span> <span data-ttu-id="c085e-146">Les utilisateurs de Microsoft Power Apps, Power BI et Power Automate peuvent alors afficher et utiliser des nombres qui ont plus de décimales.</span><span class="sxs-lookup"><span data-stu-id="c085e-146">Users of Microsoft Power Apps, Power BI, and Power Automate can then view and use numbers that have more decimal places.</span></span>

<span data-ttu-id="c085e-147">Pour effectuer cette modification, vous devez mettre à jour les paramètres suivants dans Power Apps :</span><span class="sxs-lookup"><span data-stu-id="c085e-147">To make this change, you must update the following settings in Power Apps:</span></span>

+ <span data-ttu-id="c085e-148">**Paramètres système : précision des devises pour la tarification** - Le champ **Définir la précision de la devise utilisée pour la tarification dans tout le système** définit le comportement de la devise pour l’organisation lorsque **Précision de tarification** est sélectionné.</span><span class="sxs-lookup"><span data-stu-id="c085e-148">**System Settings: Currency precision for pricing** – The **Set the currency precision that is used for pricing throughout the system** field defines how the currency will behave for the organization when **Pricing Precision** is selected.</span></span>
+ <span data-ttu-id="c085e-149">**Gestion d’entreprise : Devises** - Le champ **Précision des devises** vous permet de spécifier un nombre personnalisé de décimales pour une devise spécifique.</span><span class="sxs-lookup"><span data-stu-id="c085e-149">**Business Management: Currencies** – The **Currency Precision** field lets you specify a custom number of decimal places for a specific currency.</span></span> <span data-ttu-id="c085e-150">Il y a un repli dans le cadre à l’échelle de l’organisation.</span><span class="sxs-lookup"><span data-stu-id="c085e-150">There is a fallback to the organization-wide setting.</span></span>

<span data-ttu-id="c085e-151">Il existe certaines limitations :</span><span class="sxs-lookup"><span data-stu-id="c085e-151">There are some limitations:</span></span>

+ <span data-ttu-id="c085e-152">Vous ne pouvez pas configurer le champ de devise sur une entité.</span><span class="sxs-lookup"><span data-stu-id="c085e-152">You can't configure the currency field on an entity.</span></span>
+ <span data-ttu-id="c085e-153">Vous pouvez spécifier plus de quatre décimales uniquement aux niveaux **Tarification** et **Devise de la transaction**.</span><span class="sxs-lookup"><span data-stu-id="c085e-153">You can specify more than four decimal places only at the **Pricing** and **Transaction Currency** levels.</span></span>

### <a name="system-settings-currency-precision-for-pricing"></a><span data-ttu-id="c085e-154">Paramètres système : précision des devises pour la tarification</span><span class="sxs-lookup"><span data-stu-id="c085e-154">System Settings: Currency precision for pricing</span></span>

<span data-ttu-id="c085e-155">Une fois la migration terminée, les administrateurs peuvent définir la précision de la devise.</span><span class="sxs-lookup"><span data-stu-id="c085e-155">After migration is completed, admins can set the currency precision.</span></span> <span data-ttu-id="c085e-156">Accédez à **Paramètres \> Administration** et sélectionnez **Paramètres système**.</span><span class="sxs-lookup"><span data-stu-id="c085e-156">Go to **Settings \> Administration**, and select **System Settings**.</span></span> <span data-ttu-id="c085e-157">Ensuite, dans l’onglet **Général**, modifiez la valeur du champ **Définir la précision de la devise utilisée pour la tarification dans tout le système**, comme indiqué dans l’illustration suivante.</span><span class="sxs-lookup"><span data-stu-id="c085e-157">Then, on the **General** tab, change the value of the **Set the currency precision that is used for pricing throughout the system** field, as shown in the following illustration.</span></span>

![Paramètres système pour la devise](media/currency-system-settings.png)

### <a name="business-management-currencies"></a><span data-ttu-id="c085e-159">Gestion d’entreprise : Devises</span><span class="sxs-lookup"><span data-stu-id="c085e-159">Business Management: Currencies</span></span>

<span data-ttu-id="c085e-160">Si vous souhaitez que la précision de la devise pour une devise spécifique diffère de la précision de la devise utilisée pour la tarification, vous pouvez la modifier.</span><span class="sxs-lookup"><span data-stu-id="c085e-160">If you require that the currency precision for a specific currency differ from the currency precision that is used for pricing, you can change it.</span></span> <span data-ttu-id="c085e-161">Accédez à **Paramètres \> Gestion d’entreprise**, sélectionnez **Devises** et sélectionnez la devise à modifier.</span><span class="sxs-lookup"><span data-stu-id="c085e-161">Go to **Settings \> Business Management**, select **Currencies**, and select the currency to change.</span></span> <span data-ttu-id="c085e-162">Ensuite définissez le champ **Précision des devises** sur le nombre de décimales souhaité, comme indiqué dans l’illustration suivante.</span><span class="sxs-lookup"><span data-stu-id="c085e-162">Then set the **Currency Precision** field to the number of decimal places that you want, as shown in the following illustration.</span></span>

![Paramètres de devise pour un environnement local spécifique](media/specific-currency.png)

### <a name="tables-currency-field"></a><span data-ttu-id="c085e-164">tables : champ Devise</span><span class="sxs-lookup"><span data-stu-id="c085e-164">tables: Currency field</span></span>

<span data-ttu-id="c085e-165">Le nombre de décimales pouvant être configuré pour des champs de devise spécifiques est limité à quatre.</span><span class="sxs-lookup"><span data-stu-id="c085e-165">The number of decimal places that can be configured for specific currency fields is limited to four.</span></span>
