---
title: Concept de société dans Dataverse
description: Cette rubrique décrit l’intégration des données de société entre Finance and Operations et Dataverse.
author: RamaKrishnamoorthy
manager: AnnBe
ms.date: 08/04/2020
ms.topic: article
ms.prod: ''
ms.service: dynamics-ax-applications
ms.technology: ''
ms.search.form: ''
audience: Application User, IT Pro
ms.reviewer: rhaertle
ms.custom: ''
ms.assetid: ''
ms.search.region: global
ms.search.industry: ''
ms.author: ramasri
ms.dyn365.ops.version: ''
ms.search.validFrom: 2019-07-15
ms.openlocfilehash: bbe634b87b3cb30ed993f9b3afeb4321d70f07e6
ms.sourcegitcommit: 7e1be696894731e1c58074d9b5e9c5b3acf7e52a
ms.translationtype: HT
ms.contentlocale: fr-FR
ms.lasthandoff: 12/17/2020
ms.locfileid: "4744877"
---
# <a name="company-concept-in-dataverse"></a><span data-ttu-id="7ed02-103">Concept de société dans Dataverse</span><span class="sxs-lookup"><span data-stu-id="7ed02-103">Company concept in Dataverse</span></span>

[!include [banner](../../includes/banner.md)]

[!include [rename-banner](~/includes/cc-data-platform-banner.md)]


<span data-ttu-id="7ed02-104">Dans Finance and Operations, le concept d’une *société* est à la fois juridique et commercial.</span><span class="sxs-lookup"><span data-stu-id="7ed02-104">In Finance and Operations, the concept of a *company* is both a legal construct and a business construct.</span></span> <span data-ttu-id="7ed02-105">C’est également une limite de sécurité et de visibilité pour les données.</span><span class="sxs-lookup"><span data-stu-id="7ed02-105">It's also a security and visibility boundary for data.</span></span> <span data-ttu-id="7ed02-106">Les utilisateurs travaillent toujours dans le contexte d’une seule société, et la plupart des données sont agrégées par bandes par la société.</span><span class="sxs-lookup"><span data-stu-id="7ed02-106">Users always work in the context of a single company, and most of the data is striped by company.</span></span>

<span data-ttu-id="7ed02-107">Dataverse n’a pas de concept équivalent.</span><span class="sxs-lookup"><span data-stu-id="7ed02-107">Dataverse doesn't have an equivalent concept.</span></span> <span data-ttu-id="7ed02-108">Le concept le plus proche celui d’*unité commerciale*, qui est principalement une limite de sécurité et de visibilité pour les données utilisateur.</span><span class="sxs-lookup"><span data-stu-id="7ed02-108">The closest concept is *business unit*, which is primarily a security and visibility boundary for user data.</span></span> <span data-ttu-id="7ed02-109">Ce concept n’a pas les mêmes implications juridiques ou commerciales que celui de société.</span><span class="sxs-lookup"><span data-stu-id="7ed02-109">This concept doesn't have the same legal or business implications as the company concept.</span></span>

<span data-ttu-id="7ed02-110">Comme les unités commerciales et la société ne sont pas des concepts équivalents, il est impossible de forcer une mise en correspondance un à un (1:1) entre elles dans le cadre de l’intégration de Dataverse.</span><span class="sxs-lookup"><span data-stu-id="7ed02-110">Because business unit and company aren't equivalent concepts, it isn't possible to force a one-to-one (1:1) mapping between them for the purpose of Dataverse integration.</span></span> <span data-ttu-id="7ed02-111">Toutefois, comme les utilisateurs doivent, par défaut, être autorisés à consulter les mêmes lignes dans l’application et Dataverse, Microsoft a introduit une table dans Dataverse nommée cdm\_Company.</span><span class="sxs-lookup"><span data-stu-id="7ed02-111">However, because users must, by default, be able to see the same rows in the application and Dataverse, Microsoft has introduced a new table in Dataverse that is named cdm\_Company.</span></span> <span data-ttu-id="7ed02-112">Cette table est équivalente à la table Société dans l’application.</span><span class="sxs-lookup"><span data-stu-id="7ed02-112">This table is equivalent to the Company table in the application.</span></span> <span data-ttu-id="7ed02-113">Pour garantir que la visibilité des lignes est équivalente entre l’application et Dataverse de manière prédéfinie, il est recommandé d’effectuer le paramétrage suivant pour les données dans Dataverse:</span><span class="sxs-lookup"><span data-stu-id="7ed02-113">To help guarantee that visibility of rows is equivalent between the application and Dataverse out of the box, we recommend the following setup for data in Dataverse:</span></span>

+ <span data-ttu-id="7ed02-114">Pour chaque ligne de société Finance and Operations activé en double écriture, une ligne cdm\_Company associé est créée.</span><span class="sxs-lookup"><span data-stu-id="7ed02-114">For each Finance and Operations Company row that is enabled for dual-write, an associated cdm\_Company row is created.</span></span>
+ <span data-ttu-id="7ed02-115">Lorsqu’une ligne cdm\_Company est créé et activé pour la double écriture, une unité commerciale par défaut ayant le même nom est créé.</span><span class="sxs-lookup"><span data-stu-id="7ed02-115">When a cdm\_Company row is created and enabled for dual-write, a default business unit is created that has the same name.</span></span> <span data-ttu-id="7ed02-116">Bien qu’une équipe par défaut soit automatiquement créée pour cette unité commerciale, cette dernière n’est pas utilisée.</span><span class="sxs-lookup"><span data-stu-id="7ed02-116">Although a default team is automatically created for that business unit, the business unit isn't used.</span></span>
+ <span data-ttu-id="7ed02-117">Une équipe avec un propriétaire distincte est créée avec le même nom.</span><span class="sxs-lookup"><span data-stu-id="7ed02-117">A separate owner team is created that has the same name.</span></span> <span data-ttu-id="7ed02-118">Elle est également associée à l’unité commerciale.</span><span class="sxs-lookup"><span data-stu-id="7ed02-118">It's also associated with the business unit.</span></span>
+ <span data-ttu-id="7ed02-119">Par défaut, le propriétaire de toute ligne créée et doublement écrite dans Dataverse est défini sur l’équipe « Propriétaire de DW » liée à l’unité commerciale associée.</span><span class="sxs-lookup"><span data-stu-id="7ed02-119">By default, the owner of any row that is created and dual-written to Dataverse is set to the "DW Owner" team that is linked to the associated business unit.</span></span>

<span data-ttu-id="7ed02-120">L’illustration suivante montre un exemple de ce paramétrage de données dans Dataverse.</span><span class="sxs-lookup"><span data-stu-id="7ed02-120">The following illustration shows an example of this data setup in Dataverse.</span></span>

![Paramétrage des données dans Dataverse](media/dual-write-company-1.png)

<span data-ttu-id="7ed02-122">En raison de cette configuration, toutes les lignes liées à la société USMF sont détenu par une équipe liée à l’unité commerciale USMF dans Dataverse.</span><span class="sxs-lookup"><span data-stu-id="7ed02-122">Because of this configuration, any row that is related to the USMF company will be owned by a team that is linked to the USMF business unit in Dataverse.</span></span> <span data-ttu-id="7ed02-123">Par conséquent, tout utilisateur ayant accès à cette unité commerciale via un rôle de sécurité défini sur la visibilité au niveau de l’unité commerciale peut à présent voir ces lignes.</span><span class="sxs-lookup"><span data-stu-id="7ed02-123">Therefore, any user who has access to that business unit through a security role that is set to business unit–level visibility can now see those rows.</span></span> <span data-ttu-id="7ed02-124">L’exemple suivant montre comment les équipes peuvent être utilisées pour fournir un accès correct à ces lignes.</span><span class="sxs-lookup"><span data-stu-id="7ed02-124">The following example shows how teams can be used to provide the correct access to those rows.</span></span>

+ <span data-ttu-id="7ed02-125">Le rôle « Responsable des ventes » est affecté aux membres de l’équipe « Ventes USMF ».</span><span class="sxs-lookup"><span data-stu-id="7ed02-125">The "Sales Manager" role is assigned to members of the "USMF Sales" team.</span></span>
+ <span data-ttu-id="7ed02-126">Les utilisateurs qui disposent du rôle « Responsable des ventes » peuvent accéder à toutes les lignes de compte membres de la même unité commerciale dont ils sont membres.</span><span class="sxs-lookup"><span data-stu-id="7ed02-126">Users who have the "Sales Manager" role can access any account rows that are members of the same business unit that they are members of.</span></span>
+ <span data-ttu-id="7ed02-127">L’équipe « Ventes USMF » est liée à l’unité commerciale USMF mentionnée précédemment.</span><span class="sxs-lookup"><span data-stu-id="7ed02-127">The "USMF Sales" team is linked to the USMF business unit that was mentioned earlier.</span></span>
+ <span data-ttu-id="7ed02-128">Par conséquent, les membres de l’équipe « Ventes USMF » peuvent voir les comptes qui appartiennent à l’utilisateur « DW USMF », provenant de la table Société USMF dans Finance and Operations.</span><span class="sxs-lookup"><span data-stu-id="7ed02-128">Therefore, members of the "USMF Sales" team can see any account that is owned by the "USMF DW" user, which would have come from the USMF Company table in Finance and Operations.</span></span>

![Utilisations possibles des équipes](media/dual-write-company-2.png)

<span data-ttu-id="7ed02-130">Comme le montre l’illustration précédente, cette correspondance 1:1 entre l’unité commerciale, la société et l’équipe est uniquement un point de départ.</span><span class="sxs-lookup"><span data-stu-id="7ed02-130">As the preceding illustration shows, this 1:1 mapping between business unit, company, and team is just a starting point.</span></span> <span data-ttu-id="7ed02-131">Dans cet exemple, une unité commerciale « Europe » est créée manuellement dans Dataverse comme parent de DEMF et d’ESMF.</span><span class="sxs-lookup"><span data-stu-id="7ed02-131">In this example, a new "Europe" business unit is manually created in Dataverse as the parent for both DEMF and ESMF.</span></span> <span data-ttu-id="7ed02-132">Cette nouvelle unité commerciale racine est indépendante de la double écriture.</span><span class="sxs-lookup"><span data-stu-id="7ed02-132">This new root business unit is unrelated to dual-write.</span></span> <span data-ttu-id="7ed02-133">Toutefois, elle peut être utilisée pour donner membres de l’équipe « Ventes EUR » l’accès aux données du compte dans DEMF et ESMF en définissant la visibilité des données sur **BU parent/enfant** dans le rôle de sécurité associé.</span><span class="sxs-lookup"><span data-stu-id="7ed02-133">However, it can be used to give members of the "EUR Sales" team access to account data in both DEMF and ESMF by setting the data visibility to **Parent/Child BU** in the associated security role.</span></span>

<span data-ttu-id="7ed02-134">Une rubrique finale pour expliquer comment la double écriture détermine à quelle l’équipe propriétaire elle doit affecter les lignes.</span><span class="sxs-lookup"><span data-stu-id="7ed02-134">A final topic to discuss is how dual-write determines which owner team it should assign rows to.</span></span> <span data-ttu-id="7ed02-135">Ce comportement est contrôlé par la colonne **Équipe propriétaire par défaut** dans la ligne cdm\_Company.</span><span class="sxs-lookup"><span data-stu-id="7ed02-135">This behavior is controlled by the **Default owning team** column on the cdm\_Company row.</span></span> <span data-ttu-id="7ed02-136">Lorsqu’une ligne cdm\_Company est activé pour la double écriture, un plug-in crée automatiquement l’unité commerciale et l’équipe propriétaire associées (si elles n’existent pas encore), et définit la colonne **Équipe propriétaire par défaut**.</span><span class="sxs-lookup"><span data-stu-id="7ed02-136">When a cdm\_Company row is enabled for dual-write, a plug-in automatically creates the associated business unit and owner team (if it doesn't already exist), and sets the **Default owning team** column.</span></span> <span data-ttu-id="7ed02-137">L’administrateur peut modifier cette colonne avec une valeur différente.</span><span class="sxs-lookup"><span data-stu-id="7ed02-137">The admin can change this column to a different value.</span></span> <span data-ttu-id="7ed02-138">Toutefois, l’administrateur ne peut pas désactiver la colonne tant que la table est activée pour la double écriture.</span><span class="sxs-lookup"><span data-stu-id="7ed02-138">However, the admin can't clear the column as long as the table is enabled for dual-write.</span></span>

> [!div class="mx-imgBorder"]
<span data-ttu-id="7ed02-139">![Colonne d’équipe propriétaire par défaut](media/dual-write-default-owning-team.jpg)</span><span class="sxs-lookup"><span data-stu-id="7ed02-139">![Default owning team column](media/dual-write-default-owning-team.jpg)</span></span>

## <a name="company-striping-and-bootstrapping"></a><span data-ttu-id="7ed02-140">Agrégation par bande et amorçage de la société</span><span class="sxs-lookup"><span data-stu-id="7ed02-140">Company striping and bootstrapping</span></span>

<span data-ttu-id="7ed02-141">L’intégration de Dataverse apporte la parité de la société à l’aide d’un identificateur de société pour agréger les données par bande.</span><span class="sxs-lookup"><span data-stu-id="7ed02-141">Dataverse integration brings company parity by using a company identifier to stripe data.</span></span> <span data-ttu-id="7ed02-142">Comme l’illustration suivante le montre, les tables spécifiques à la société sont développées de sorte qu’elles aient une relation plusieurs à un (N:1) avec la table cdm\_Company.</span><span class="sxs-lookup"><span data-stu-id="7ed02-142">As the following illustration shows, all company-specific tables are extended so that they have a many-to-one (N:1) relationship with the cdm\_Company table.</span></span>

> [!div class="mx-imgBorder"]
<span data-ttu-id="7ed02-143">![Relation plusieurs à un (N:1) entre une table spécifique à la société et la table cdm_Company](media/dual-write-bootstrapping.png)</span><span class="sxs-lookup"><span data-stu-id="7ed02-143">![N:1 relationship between a company-specific table and the cdm_Company table](media/dual-write-bootstrapping.png)</span></span>

+ <span data-ttu-id="7ed02-144">Pour les lignes, une fois une société ajoutée et enregistrée, la valeur passe en lecture seule.</span><span class="sxs-lookup"><span data-stu-id="7ed02-144">For rows, after a company is added and saved, the value becomes read-only.</span></span> <span data-ttu-id="7ed02-145">Par conséquent, les utilisateurs doivent s’assurer de sélectionner la société adéquate.</span><span class="sxs-lookup"><span data-stu-id="7ed02-145">Therefore, users should make sure that they select the correct company.</span></span>
+ <span data-ttu-id="7ed02-146">Seules les lignes ayant des données de la société sont admissibles à la double écriture entre l’application et Dataverse.</span><span class="sxs-lookup"><span data-stu-id="7ed02-146">Only rows that have company data are eligible for dual-write between the application and Dataverse.</span></span>
+ <span data-ttu-id="7ed02-147">Pour les données Dataverse existantes, une expérience d’amorçage menée par l’administrateur sera disponible prochainement.</span><span class="sxs-lookup"><span data-stu-id="7ed02-147">For existing Dataverse data, an admin-led bootstrapping experience will soon be available.</span></span>


## <a name="autopopulate-company-name-in-customer-engagement-apps"></a><span data-ttu-id="7ed02-148">Renseigner automatiquement le nom de l’entreprise dans les applications Customer Engagement</span><span class="sxs-lookup"><span data-stu-id="7ed02-148">Autopopulate company name in customer engagement apps</span></span>

<span data-ttu-id="7ed02-149">Il existe plusieurs façons de renseigner automatiquement le nom de l’entreprise dans les applications Customer Engagement.</span><span class="sxs-lookup"><span data-stu-id="7ed02-149">There are several ways to auto-populate the company name in customer engagement apps.</span></span>

+ <span data-ttu-id="7ed02-150">Si vous êtes administrateur système, vous pouvez définir l’entreprise par défaut en accédant à **Paramètres avancés > Système > Sécurité > Utilisateurs**.</span><span class="sxs-lookup"><span data-stu-id="7ed02-150">If you are a system administrator, you can set the default company by navigating to **Advanced Settings > System > Security > Users**.</span></span> <span data-ttu-id="7ed02-151">Ouvrez le formulaire **Utilisateur**, et dans la section **Informations sur l’organisation**, définissez la valeur **Société par défaut sur les formulaires**.</span><span class="sxs-lookup"><span data-stu-id="7ed02-151">Open the **User** form, and in the **Organization Information** section, set the **Company to default on Forms** value.</span></span>

    :::image type="content" source="media/autopopulate-company-name-1.png" alt-text="Définissez la société par défaut dans la section Informations sur l’organisation.":::

+ <span data-ttu-id="7ed02-153">Si vous disposez d’un accès en **Écriture** à la table **SystemUser** pour le niveau **Unité commerciale**, vous pouvez modifier la société par défaut sur n’importe quel formulaire en sélectionnant une société dans le menu déroulant **Société**.</span><span class="sxs-lookup"><span data-stu-id="7ed02-153">If you have **Write** access to the **SystemUser** table for the **Business Unit** level, then you can change the default company on any form by selecting a company from the **Company** drop-down menu.</span></span>

    :::image type="content" source="media/autopopulate-company-name-2.png" alt-text="Modifier le nom de l’entreprise sur un nouveau compte.":::

+ <span data-ttu-id="7ed02-155">Si vous disposez d’un accès en **Écriture** aux données de plusieurs sociétés, vous pouvez alors modifier la société par défaut en choisissant une ligne appartenant à une société différente.</span><span class="sxs-lookup"><span data-stu-id="7ed02-155">If you have **Write** access to data in more than one company, then you can change the default company by choosing a row that belongs to different company.</span></span>

    :::image type="content" source="media/autopopulate-company-name-3.png" alt-text="Choisir une ligne modifie la société par défaut.":::

+ <span data-ttu-id="7ed02-157">Si vous êtes configurateur ou administrateur système et que vous souhaitez renseigner automatiquement les données de l’entreprise sur un formulaire personnalisé, vous pouvez utiliser les [événements de formulaire](https://docs.microsoft.com/powerapps/developer/model-driven-apps/clientapi/events-forms-grids).</span><span class="sxs-lookup"><span data-stu-id="7ed02-157">If you are a system configurator or administrator, and you want to auto-populate company data on a custom form, then you can use [form events](https://docs.microsoft.com/powerapps/developer/model-driven-apps/clientapi/events-forms-grids).</span></span> <span data-ttu-id="7ed02-158">Ajoutez une référence JavaScript à **msdyn_/DefaultCompany.js** et utilisez les événements suivants.</span><span class="sxs-lookup"><span data-stu-id="7ed02-158">Add a JavaScript reference to **msdyn_/DefaultCompany.js** and use the following events.</span></span> <span data-ttu-id="7ed02-159">Vous pouvez utiliser n’importe quel formulaire prêt à l’emploi, par exemple, **Compte**.</span><span class="sxs-lookup"><span data-stu-id="7ed02-159">You can use any out-of-the-box form, for example, the **Account** form.</span></span>

    + <span data-ttu-id="7ed02-160">Événement **OnLoad** pour le formulaire : définissez la colonne **defaultCompany**.</span><span class="sxs-lookup"><span data-stu-id="7ed02-160">**OnLoad** event for the form: Set the **defaultCompany** column.</span></span>
    + <span data-ttu-id="7ed02-161">Événement **OnCharge** pour la colonne **Société** : définissez la colonne **updateDefaultCompany**.</span><span class="sxs-lookup"><span data-stu-id="7ed02-161">**OnChange** event for the **Company** column: Set the **updateDefaultCompany** column.</span></span>

## <a name="apply-filtering-based-on-the-company-context"></a><span data-ttu-id="7ed02-162">Appliquer le filtrage en fonction du contexte de l’entreprise</span><span class="sxs-lookup"><span data-stu-id="7ed02-162">Apply filtering based on the company context</span></span>

<span data-ttu-id="7ed02-163">Pour appliquer un filtrage basé sur le contexte de l’entreprise sur vos formulaires personnalisés ou sur des colonnes de recherche personnalisées ajoutées aux formulaires standard, ouvrez le formulaire et utilisez la section **Filtrage des enregistrements associés** pour appliquer le filtre d’entreprise.</span><span class="sxs-lookup"><span data-stu-id="7ed02-163">To apply filtering based on the company context on your custom forms or on custom lookup columns added to the standard forms, open the form and use the **Related Records Filtering** section to apply the company filter.</span></span> <span data-ttu-id="7ed02-164">Vous devez le définir pour chaque colonne de recherche qui nécessite un filtrage basé sur la société sous-jacente sur une ligne donnée.</span><span class="sxs-lookup"><span data-stu-id="7ed02-164">You must set this for each lookup column that requires filtering based on the underlying company on a given row.</span></span> <span data-ttu-id="7ed02-165">Le paramètre est affiché pour **Compte** dans l’illustration suivante.</span><span class="sxs-lookup"><span data-stu-id="7ed02-165">The setting is shown for **Account** in the following illustration.</span></span>

:::image type="content" source="media/apply-company-context.png" alt-text="Appliquer le contexte de l’entreprise":::

