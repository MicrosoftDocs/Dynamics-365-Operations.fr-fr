---
title: Stockage de sauvegarde des modèles de gestion des états électroniques
description: Cette rubrique décrit l'utilisation du stockage de sauvegarde de gestion des états électroniques pour la récupération des modèles.
author: NickSelin
manager: AnnBe
ms.date: 08/19/2019
ms.topic: article
ms.prod: ''
ms.service: dynamics-ax-platform
ms.technology: ''
ms.search.form: ERWorkspace, ERSolutionTable
audience: Application User, Developer, IT Pro
ms.reviewer: kfend
ms.search.scope: Operations
ms.custom: 27621
ms.assetid: ''
ms.search.region: Global
ms.author: nselin
ms.search.validFrom: 2019-08-13
ms.dyn365.ops.version: 10.0.5
ms.openlocfilehash: 8b4e783f79b02c77a27fc59c2f4be8a192f2f476
ms.sourcegitcommit: 2460d0da812c45fce67a061386db52e0ae46b0f3
ms.translationtype: HT
ms.contentlocale: fr-FR
ms.lasthandoff: 09/30/2019
ms.locfileid: "2248698"
---
# <a name="backup-storage-of-er-templates"></a><span data-ttu-id="88c32-103">Stockage de sauvegarde des modèles de gestion des états électroniques</span><span class="sxs-lookup"><span data-stu-id="88c32-103">Backup storage of ER templates</span></span>

[!include [banner](../includes/banner.md)]

<span data-ttu-id="88c32-104">La [structure de gestion des états électroniques (ER)](general-electronic-reporting.md) permet aux utilisateurs professionnels de configurer des formats pour les documents sortants conformément aux obligations légales de différents pays/régions.</span><span class="sxs-lookup"><span data-stu-id="88c32-104">The [Electronic reporting (ER) framework](general-electronic-reporting.md) lets business users configure formats for outbound documents according to the legal requirements of various countries and regions.</span></span> <span data-ttu-id="88c32-105">Les formats de gestion des états électroniques configurés peuvent utiliser des modèles prédéfinis pour générer les documents sortants dans différents formats, tels que des classeurs Microsoft Excel, des documents Microsoft Word ou des documents PDF.</span><span class="sxs-lookup"><span data-stu-id="88c32-105">Configured ER formats can use predefined templates to generate outbound documents in various formats, such as Microsoft Excel workbooks, Microsoft Word documents, or PDF documents.</span></span> <span data-ttu-id="88c32-106">Les modèles sont complétés avec les données que le flux de données configuré pour les documents générés exige.</span><span class="sxs-lookup"><span data-stu-id="88c32-106">The templates are filled with data that the configured dataflow for generated documents requires.</span></span>

<span data-ttu-id="88c32-107">Chaque format configuré peut être publié dans le cadre d'une solution de gestion des états électroniques.</span><span class="sxs-lookup"><span data-stu-id="88c32-107">Each configured format can be published as part of an ER solution.</span></span> <span data-ttu-id="88c32-108">Chaque solution de gestion des états électroniques peut être exportée d'une instance de Finance and Operations, puis importée vers une autre instance.</span><span class="sxs-lookup"><span data-stu-id="88c32-108">Each ER solution can be exported from one instance of Finance and Operations and imported into another instance.</span></span>

<span data-ttu-id="88c32-109">La structure de gestion des états électroniques utilise le [Cadre de gestion des documents](../../fin-and-ops/organization-administration/configure-document-management.md) pour conserver les modèles requis pour l'instance actuelle de Finance and Operations.</span><span class="sxs-lookup"><span data-stu-id="88c32-109">The ER framework uses the [Document management framework](../../fin-and-ops/organization-administration/configure-document-management.md) to keep the required templates for the current Finance and Operations instance.</span></span> <span data-ttu-id="88c32-110">En fonction des paramètres de la structure de gestion des états électroniques, le stockage d'objets blob Microsoft Azure ou un dossier Microsoft SharePoint peut être sélectionné comme emplacement physique de stockage principal pour les modèles.</span><span class="sxs-lookup"><span data-stu-id="88c32-110">Depending on the settings of the ER framework, Microsoft Azure Blob storage or a Microsoft SharePoint folder can be selected as the physical primary storage location for templates.</span></span> <span data-ttu-id="88c32-111">(Pour plus d'informations, voir [Configuration de la structure de gestion des états électroniques](electronic-reporting-er-configure-parameters.md).) La table de DocuValue tient à jour un enregistrement individuel pour chaque modèle.</span><span class="sxs-lookup"><span data-stu-id="88c32-111">(For more information, see [Configure the ER framework](electronic-reporting-er-configure-parameters.md).) The DocuValue table holds an individual record for each template.</span></span> <span data-ttu-id="88c32-112">Dans chaque enregistrement, le champ **AccessInformation** enregistre le chemin d'un fichier de modèle situé à l'emplacement de stockage configuré.</span><span class="sxs-lookup"><span data-stu-id="88c32-112">In each record, the **AccessInformation** field stores the path of a template file that is located in the configured storage location.</span></span>

<span data-ttu-id="88c32-113">Lorsque vous gérez vos instances Finance and Operations, vous pouvez décider de migrer l'instance actuelle vers un autre emplacement.</span><span class="sxs-lookup"><span data-stu-id="88c32-113">When you manage your Finance and Operations instances, you might decide to migrate the current instance to another location.</span></span> <span data-ttu-id="88c32-114">Par exemple, vous pouvez migrer votre instance de production vers un nouvel environnement de bac à sable.</span><span class="sxs-lookup"><span data-stu-id="88c32-114">For example, you might migrate your production instance to a new sandbox environment.</span></span> <span data-ttu-id="88c32-115">So vous n'avez pas configuré la structure de la gestion des états électroniques pour stocker les modèles dans un stockage d'objets blob, la table DocuValue du nouvel environnement de bac à sable fait référence à l'instance de stockage d'objets blob dans l'environnement de production.</span><span class="sxs-lookup"><span data-stu-id="88c32-115">If you configured the ER framework to store templates in Blob storage, the DocuValue table in the new sandbox environment refers to the instance of Blob storage in the production environment.</span></span> <span data-ttu-id="88c32-116">Cependant, cette instance n'est pas accessible depuis l'environnement de bac à sable, car le processus de migration n'est pas compatible avec la migration des artefacts dans le stockage d'objets blob.</span><span class="sxs-lookup"><span data-stu-id="88c32-116">However, this instance can't be accessed from the sandbox environment, because the migration process doesn't support the migration of artifacts in Blob storage.</span></span> <span data-ttu-id="88c32-117">Par conséquent, si vous essayez d'exécuter un format de gestion d'états électroniques qui utilise un modèle pour générer des documents commerciaux, une exception survient et vous êtes averti du modèle manquant.</span><span class="sxs-lookup"><span data-stu-id="88c32-117">Therefore, if you try to run an ER format that uses a template to generate business documents, an exception occurs, and you're notified about the missing template.</span></span> <span data-ttu-id="88c32-118">Vous êtes également invité à utiliser l'outil de nettoyage des états électroniques pour supprimer, puis réimporter la configuration du format des états électroniques qui contient le modèle.</span><span class="sxs-lookup"><span data-stu-id="88c32-118">You're also guided to use the ER cleanup tool to delete and then re-import the ER format configuration that contains the template.</span></span> <span data-ttu-id="88c32-119">En raison des nombreuses configurations du format de gestion des états électroniques, ce processus peut se révéler chronophage.</span><span class="sxs-lookup"><span data-stu-id="88c32-119">Because you might have several ER format configurations, this process can be time consuming.</span></span>

<span data-ttu-id="88c32-120">Le stockage de sauvegarde de la fonctionnalité des modèles de gestion des états électroniques peut vous permettre de créer vos modèles afin qu'ils soient toujours disponibles pour générer des documents commerciaux.</span><span class="sxs-lookup"><span data-stu-id="88c32-120">The Backup storage of ER templates feature can help you make your templates so that they are always available to generate business documents.</span></span>

> [!NOTE]
> <span data-ttu-id="88c32-121">Cette fonctionnalité peut être utilisée uniquement lorsque le stockage d'objets blob a été sélectionné comme emplacement de stockage physique pour les modèles de gestion des états électroniques.</span><span class="sxs-lookup"><span data-stu-id="88c32-121">This feature can be used only when Blob storage has been selected as the physical storage location for ER templates.</span></span>

<span data-ttu-id="88c32-122">Pour cette fonctionnalité, chaque modèle d'une nouvelle configuration de format de gestion des états électroniques dans l'environnement actuel est automatiquement enregistré sur l'emplacement de stockage de sauvegarde pour les modèles (la table de base de données ERDocuDatabaseStorage) lorsque les événements suivants se produisent :</span><span class="sxs-lookup"><span data-stu-id="88c32-122">For this feature, every template of a new ER format configuration in the current environment is automatically saved to the backup storage location for templates (the ERDocuDatabaseStorage database table) when the following events occur:</span></span>

- <span data-ttu-id="88c32-123">Vous importez une nouvelle configuration du format de gestion des états électroniques qui contient un modèle.</span><span class="sxs-lookup"><span data-stu-id="88c32-123">You import a new ER format configuration that contains a template.</span></span>
- <span data-ttu-id="88c32-124">Vous terminez la version d'ébauche d'une configuration du format de gestion des états électroniques qui contient un modèle.</span><span class="sxs-lookup"><span data-stu-id="88c32-124">You complete the draft version of an ER format configuration that contains a template.</span></span>

<span data-ttu-id="88c32-125">Les copies de sauvegarde des modèles sont migrées vers une nouvelle instance de Finance and Operations dans le cadre de la base de données de l'application.</span><span class="sxs-lookup"><span data-stu-id="88c32-125">Backup copies of templates are migrated to a new instance of Finance and Operations as part of the application database.</span></span>

<span data-ttu-id="88c32-126">Si un modèle d'un format de gestion des états électroniques est requis pour la génération de documents sortants, pour traiter les paiements aux fournisseurs, y compris la génération de conseils de paiement et les rapports de contrôle, par exemple, mais si le modèle requis est introuvable dans le principal emplacement de stockage, les événements suivants se produisent :</span><span class="sxs-lookup"><span data-stu-id="88c32-126">If a template of an ER format is required for generation of outbound documents, to process vendor payments including generation of payment advice and control reports, for example, but the required template isn't found in the primary storage location, the following events occur:</span></span>

- <span data-ttu-id="88c32-127">Si le modèle est disponible dans l'emplacement de stockage de sauvegarde, il est automatiquement extrait de l'emplacement de stockage de sauvegarde, puis restauré à l'emplacement de stockage principal et utilisé pour l'exécution actuelle.</span><span class="sxs-lookup"><span data-stu-id="88c32-127">If the template is available in the backup storage location, it is automatically taken from the backup storage location, restored to the primary storage location, and used for the current execution.</span></span>
- <span data-ttu-id="88c32-128">Chaque utilisateur assigné au rôle de **Développeur gestion des états électroniques** ou d'**administrateur système** reçoit une notification relative au problème de modèle manquant via le centre d'actions.</span><span class="sxs-lookup"><span data-stu-id="88c32-128">Every user who is assigned to the **Electronic reporting developer** or **System administrator** role is notified about the missing template issue through the Action center.</span></span> <span data-ttu-id="88c32-129">Le message qui s'affiche dépend de la valeur du paramètre **Exécuter automatiquement la procédure de restauration des modèles endommagés dans le traitement par lots** :</span><span class="sxs-lookup"><span data-stu-id="88c32-129">The message that appears depends on the value of the **Automatically run the procedure of restoring the broken templates in batch** parameter:</span></span>

    - <span data-ttu-id="88c32-130">Si ce paramètre est défini sur **Désactivé**, le message vous recommande de lancer le processus de traitement par lots pour corriger automatiquement les problèmes similaires pour les autres modèle de configuration du format des états électroniques.</span><span class="sxs-lookup"><span data-stu-id="88c32-130">If this parameter is set to **Off**, the message recommends that you start the batch process to automatically fix similar issues for other ER format configuration templates.</span></span> <span data-ttu-id="88c32-131">Le message contient un lien que vous pouvez utiliser pour lancer le processus de traitement par lots.</span><span class="sxs-lookup"><span data-stu-id="88c32-131">The message includes a link that you can use to start the batch process.</span></span>
    - <span data-ttu-id="88c32-132">Si ce paramètre est défini sur **Activé**, le message vous indique qu'un problème de modèles manquants a été décelé et qu'un nouveau processus de traitement par lots, **Restaurer les modèles endommagés depuis la sauvegarde de la base de données interne**, a été automatiquement planifié.</span><span class="sxs-lookup"><span data-stu-id="88c32-132">If this parameter is set to **On**, the message notifies you that a missing templates issue has been discovered, and that a new batch process, **Restore broken templates from internal database backup**, has been automatically scheduled.</span></span> <span data-ttu-id="88c32-133">Ce processus de traitement par lots corrigera automatiquement les problèmes similaires pour les autres modèles.</span><span class="sxs-lookup"><span data-stu-id="88c32-133">This batch process will automatically fix similar issues for other templates.</span></span>

<span data-ttu-id="88c32-134">Pour configurer le paramètre **Exécuter automatiquement la procédure de restauration des modèles endommagés dans le traitement par lots**, procédez comme suit :</span><span class="sxs-lookup"><span data-stu-id="88c32-134">To set up the he **Automatically run the procedure of restoring the broken templates in batch** parameter, complete the following steps:</span></span>

1. <span data-ttu-id="88c32-135">Dans Finance and Operations, ouvrez la page **Administration d'organisation \> Gestion des états électroniques \> Configurations**.</span><span class="sxs-lookup"><span data-stu-id="88c32-135">In Finance and Operations, open the **Organization administration \> Electronic reporting \> Configurations page**.</span></span>
2. <span data-ttu-id="88c32-136">Dans la page **Configurations**, dans le volet Actions, sous l'onglet **Configurations**, dans le groupe **Paramètres avancés**, sélectionnez **Paramètres utilisateur**.</span><span class="sxs-lookup"><span data-stu-id="88c32-136">On the **Configurations** page, on the Action Pane, on the **Configurations** tab, in the **Advanced settings** group, select **User parameters**.</span></span>
3. <span data-ttu-id="88c32-137">Dans la boîte de dialogue **Paramètres d'utilisateur**, définissez la valeur requise pour le paramètre **Exécuter automatiquement la procédure de restauration des modèles endommagés dans le traitement par lots**.</span><span class="sxs-lookup"><span data-stu-id="88c32-137">In the **User parameters** dialog box, set the required value for the **Automatically run the procedure of restoring the broken templates in batch** parameter.</span></span>

> [!NOTE]
> <span data-ttu-id="88c32-138">Ce paramètre est défini comme spécifique à la société connectée et à l'utilisateur de l'application.</span><span class="sxs-lookup"><span data-stu-id="88c32-138">This parameter is defined as application user and logged company specific.</span></span>

![Page Configurations d'ER](./media/GER-BackupTemplates-1.png)

<span data-ttu-id="88c32-140">L'illustration suivante présente un exemple du message qui s'affiche lorsque le paramètre **Exécuter automatiquement la procédure de restauration des modèles endommagés dans le traitement par lots** est défini sur **Activé**.</span><span class="sxs-lookup"><span data-stu-id="88c32-140">The following illustration shows an example of the message that appears when the **Automatically run the procedure of restoring the broken templates in batch** parameter is set to **On**.</span></span>

![Page du journal des paiements fournisseur](./media/GER-BackupTemplates-2.png)

<span data-ttu-id="88c32-142">L'illustration ci-dessous indique le processus de traitement par lots **Restaurer les modèles endommagés depuis la sauvegarde de la base de données interne** sur la page **Processus de traitement par lots**.</span><span class="sxs-lookup"><span data-stu-id="88c32-142">The following illustration shows the **Restore broken templates from internal database backup** batch process on the **Batch job** page.</span></span>

![Page Traitement par lots](./media/GER-BackupTemplates-3.png)

<span data-ttu-id="88c32-144">Le journal d'exécution du processus de traitement par lots terminé **Restaurer les modèles endommagés depuis la sauvegarde de la base de données interne** contient des informations sur les modèles qui ont été restaurés depuis l'emplacement de stockage de sauvegarde vers l'emplacement de stockage principal.</span><span class="sxs-lookup"><span data-stu-id="88c32-144">The execution log of the completed **Restore broken templates from internal database backup** batch process includes information about the templates that have been restored from the backup storage location to the primary storage location.</span></span>

![Page Historique du traitement par lots](./media/GER-BackupTemplates-4.png)

<span data-ttu-id="88c32-146">Par défaut, le processus de création automatique des copies de sauvegarde des modèles qui résident dans les configurations du format de gestion des états électroniques est activé.</span><span class="sxs-lookup"><span data-stu-id="88c32-146">By default, the process of automatically creating backup copies of templates that reside in ER format configurations is turned on.</span></span> <span data-ttu-id="88c32-147">Pour arrêter de réaliser des copies de sauvegarde des modèles, définissez l'option **Arrêter de créer des copies de sauvegarde des modèles** sur **Activé** sous l'onglet **Pièces jointes** de la page **Paramètres des états électroniques**.</span><span class="sxs-lookup"><span data-stu-id="88c32-147">To stop making backup copies of templates, set the **Stop making backup copies of template** option to **Yes** on the **Attachments** tab of the **Electronic reporting parameters** page.</span></span> <span data-ttu-id="88c32-148">Vous pouvez ouvrir cette page depuis l'espace de travail **Gestion des états électroniques**.</span><span class="sxs-lookup"><span data-stu-id="88c32-148">You can open this page from the **Electronic reporting** workspace.</span></span>

<span data-ttu-id="88c32-149">Si vous définissez l'option **Arrêter de créer des copies de sauvegarde des modèles** sur **Activé** et si vous ne souhaitez pas conserver les copies de sauvegarde précédemment faites de modèles, sélectionnez **Nettoyer le stockage de sauvegarde** sur la page **Paramètres des états électroniques**.</span><span class="sxs-lookup"><span data-stu-id="88c32-149">If you set the **Stop making backup copies of templates** option to **Yes** and don't want to keep the backup copies that were previously made of templates, select **Clean up backup storage** on the **Electronic reporting parameters** page.</span></span>

<span data-ttu-id="88c32-150">Si vous avez mis votre environnement à niveau avec Finance and Operations version 10.0.5 (Octobre 2019) et si vous souhaitez migrer vers un nouvel environnement comprenant des configurations de format de gestion des états électroniques pouvant être exécutées, sélectionnez **Compléter le stockage de sauvegarde** sur la page **Paramètres des états électroniques** avant la migration.</span><span class="sxs-lookup"><span data-stu-id="88c32-150">If you upgraded your environment to Finance and Operations version 10.0.5 (October 2019) and want to migrate to a new environment that includes ER format configurations that can be run, select **Fill in backup storage** on the **Electronic reporting parameters** page before the migration occurs.</span></span> <span data-ttu-id="88c32-151">Ce bouton lance le processus de création de copies de sauvegarde de tous les modèles disponibles afin qu'ils puissent être stockés dans l'emplacement de stockage de sauvegarde de gestion des états électroniques pour les modèles.</span><span class="sxs-lookup"><span data-stu-id="88c32-151">This button starts the process of making backup copies of all available templates, so that they can be stored in the ER backup storage location for templates.</span></span>

![Page Paramètres de la gestion des états électroniques](./media/GER-BackupTemplates-5.png)

## <a name="supported-deployments"></a><span data-ttu-id="88c32-153">Déploiements pris en charge</span><span class="sxs-lookup"><span data-stu-id="88c32-153">Supported deployments</span></span>

<span data-ttu-id="88c32-154">Dans Finance and Operations version 10.0.5, le stockage de sauvegarde de la fonctionnalité des modèles de gestion des états électroniques est disponible uniquement dans les déploiements sur le cloud.</span><span class="sxs-lookup"><span data-stu-id="88c32-154">In Finance and Operations version 10.0.5, the Backup storage of ER templates feature is available only in cloud deployments.</span></span>

## <a name="additional-resources"></a><span data-ttu-id="88c32-155">Ressources supplémentaires</span><span class="sxs-lookup"><span data-stu-id="88c32-155">Additional resources</span></span>

[<span data-ttu-id="88c32-156">Vue d'ensemble des états électroniques</span><span class="sxs-lookup"><span data-stu-id="88c32-156">Electronic reporting overview</span></span>](general-electronic-reporting.md)

[<span data-ttu-id="88c32-157">Configurer la structure de gestion des états électroniques</span><span class="sxs-lookup"><span data-stu-id="88c32-157">Configure the Electronic reporting framework</span></span>](electronic-reporting-er-configure-parameters.md)
