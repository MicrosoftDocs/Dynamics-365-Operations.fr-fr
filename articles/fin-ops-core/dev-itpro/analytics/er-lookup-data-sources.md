---
title: Configurer les sources de données de recherche pour utiliser les paramètres spécifiques à l’application d’états électroniques
description: Cette rubrique explique comment vous pouvez configurer des sources de données de recherche dans les formats de gestion des états électroniques pour utiliser les paramètres propres à une application ER.
author: NickSelin
ms.date: 04/02/2021
ms.topic: article
ms.prod: ''
ms.technology: ''
ms.search.form: ERSolutionTable, EROperationDesigner, ERLookupDesigner, ERComponentLookupStructureEditing
audience: Application User, Developer, IT Pro
ms.reviewer: kfend
ms.custom: ''
ms.assetid: ''
ms.search.region: Global
ms.author: nselin
ms.search.validFrom: 2019-01-01
ms.dyn365.ops.version: Release 8.1.3
ms.openlocfilehash: 131d14f1f1aa329bd71b1f8a4015192736bd8e44
ms.sourcegitcommit: 08ce2a9ca1f02064beabfb9b228717d39882164b
ms.translationtype: HT
ms.contentlocale: fr-FR
ms.lasthandoff: 05/11/2021
ms.locfileid: "6022573"
---
# <a name="configure-lookup-data-sources-to-use-er-application-specific-parameters"></a><span data-ttu-id="a580a-103">Configurer les sources de données de recherche pour utiliser les paramètres spécifiques à l’application d’états électroniques</span><span class="sxs-lookup"><span data-stu-id="a580a-103">Configure Lookup data sources to use ER application-specific parameters</span></span> 

[!include[banner](../includes/banner.md)]

<span data-ttu-id="a580a-104">La [Gestion des états électroniques (ER)](general-electronic-reporting.md) vous permet de configurer le filtrage des données dans un format de gestion des états électroniques de telle sorte qu’il soit basé sur un ensemble de règles abstraites.</span><span class="sxs-lookup"><span data-stu-id="a580a-104">The [Electronic reporting (ER)](general-electronic-reporting.md) application-specific parameters feature lets you configure data filtering in an ER format so that it's based on a set of abstract rules.</span></span> <span data-ttu-id="a580a-105">Cet ensemble de règles peut être configuré pour utiliser la source de données du type **Recherche** disponible dans un format de gestion des états électroniques.</span><span class="sxs-lookup"><span data-stu-id="a580a-105">This set of rules can be configured to use the data source of the **Lookup** type that is available in an ER format.</span></span> <span data-ttu-id="a580a-106">Vous pouvez spécifier des règles réelles au delà des concepteurs de composants de gestion des états électroniques à l’aide de l’interface utilisateur qui est automatiquement générée selon les paramètres de la source de données **Recherche** au format de gestion des états électroniques correspondant et les données actuelles de l’entité juridique.</span><span class="sxs-lookup"><span data-stu-id="a580a-106">You can then specify real rules beyond the ER components designers by using the user interface (UI) that is automatically generated based on the settings of the **Lookup** data source of the corresponding ER format and the current legal entity data.</span></span> <span data-ttu-id="a580a-107">Finalement, les règles spécifiées seront accessibles par la source de données **Recherche** de la gestion des états électroniques lorsque ce format ER est exécuté.</span><span class="sxs-lookup"><span data-stu-id="a580a-107">Eventually, the specified rules will be accessed by the ER format's **Lookup** data source when this ER format is executed.</span></span>

> [!NOTE]
> <span data-ttu-id="a580a-108">Utilisez les sources de données configurées du format ER modifiable pour spécifier quelles données d'application seront utilisées pour configurer les règles réelles.</span><span class="sxs-lookup"><span data-stu-id="a580a-108">Use the configured data sources of the editable ER format to specify what application data is used to configure real rules.</span></span>

<span data-ttu-id="a580a-109">Utilisez le [Concepteur d’opérations de gestion des états électroniques](general-electronic-reporting.md#building-a-format-that-uses-a-data-model-as-a-base) pour convertir une source de données du type **Recherche** dans votre format ER.</span><span class="sxs-lookup"><span data-stu-id="a580a-109">Use the [ER Operations designer](general-electronic-reporting.md#building-a-format-that-uses-a-data-model-as-a-base) to bring a data source of the **Lookup** type in to your ER format.</span></span> <span data-ttu-id="a580a-110">La source de données doit être configurée pour décrire l'apparence de vos règles abstraites, y compris les éléments suivants :</span><span class="sxs-lookup"><span data-stu-id="a580a-110">The data source must be configured to describe how your abstract rules look, including the following:</span></span>

   - <span data-ttu-id="a580a-111">L'ensemble de paramètres d'un certain type de données dont la valeur est fournie pour spécifier une seule règle.</span><span class="sxs-lookup"><span data-stu-id="a580a-111">The parameter set of certain data type whose value is provided to specify a single rule.</span></span>
   - <span data-ttu-id="a580a-112">Le type de valeur d'un certain type de données renvoyé par une règle unique lorsque cette règle est considérée comme la plus appropriée parmi d'autres.</span><span class="sxs-lookup"><span data-stu-id="a580a-112">The value type of certain data type that is returned by a single rule when this rule is considered the most appropriate among others.</span></span>

<span data-ttu-id="a580a-113">Vous pouvez configurer les types suivants de sources de données de **Recherche** en fonction du type de valeur renvoyée par une règle configurée :</span><span class="sxs-lookup"><span data-stu-id="a580a-113">You can configure the following types of **Lookup** data sources depending on the type of value that is returned by any configured rule:</span></span>

   - <span data-ttu-id="a580a-114">Utilisez le type **Modèle de données\Recherche** lorsqu'une valeur d'énumération de modèle doit être renvoyée.</span><span class="sxs-lookup"><span data-stu-id="a580a-114">Use the **Data model\Lookup** type when a model enumeration value must be returned.</span></span>
   - <span data-ttu-id="a580a-115">Utilisez le type **Opérations Dynamics 365\Recherche** lorsqu'une valeur d'énumération d'application ou une valeur de [type de données étendu](../extensibility/extensible-edts.md) d'application doit être renvoyée.</span><span class="sxs-lookup"><span data-stu-id="a580a-115">Use the **Dynamics 365 Operations\Lookup** type when an application enumeration value or an application [extended data type](../extensibility/extensible-edts.md) value must be returned.</span></span>
   - <span data-ttu-id="a580a-116">Utilisez le type **Énumération de format\Recherche** lorsqu'une valeur d'énumération de format doit être renvoyée.</span><span class="sxs-lookup"><span data-stu-id="a580a-116">Use the **Format enumeration\Lookup** type when a format enumeration value must be returned.</span></span>

<span data-ttu-id="a580a-117">L'illustration suivante montre comment une énumération de format peut être configurée dans l'exemple de format ER.</span><span class="sxs-lookup"><span data-stu-id="a580a-117">The following illustration shows how a format enumeration can be configured in the sample ER format.</span></span>

   ![Affichage d'une énumération de format comme base de la source de données de recherche configurée](./media/er-lookup-data-sources-img1.gif)

<span data-ttu-id="a580a-119">L'illustration suivante montre les composants de format qui ont été configurés pour établir le rapport de différents types de taxes dans une section différente d'un rapport généré.</span><span class="sxs-lookup"><span data-stu-id="a580a-119">The following illustration shows the format components that were configured to report different type of taxes in a different section of a generated report.</span></span>

   ![Affichage des sections de format pour rapporter séparément différents types de taxes](./media/er-lookup-data-sources-img2.png)

<span data-ttu-id="a580a-121">L'illustration suivante montre comment le Concepteur d’opérations de gestion des états électroniques permet d'ajouter une source de données du type **Énumération de format\Recherche**.</span><span class="sxs-lookup"><span data-stu-id="a580a-121">The following illustration shows how the ER Operations designer allows the addition of a data source of the **Format enumeration\Lookup** type.</span></span>  <span data-ttu-id="a580a-122">La source de données ajoutée est configurée pour renvoyer une valeur de l'énumération de format `List of taxation levels`.</span><span class="sxs-lookup"><span data-stu-id="a580a-122">The added data source is configured as returning a value of the `List of taxation levels` format enumeration.</span></span>

   ![Ajout d'une source de données ER de type Énumération de format\Recherche](./media/er-lookup-data-sources-img3.gif)

<span data-ttu-id="a580a-124">L'illustration suivante montre comment la source de données ajoutée est configurée pour utiliser le champ **Code** de la liste d'enregistrements **Model.Data.Tax** de la source de données **Modèle** en tant que paramètre qui doit être spécifié pour chaque règle configurée.</span><span class="sxs-lookup"><span data-stu-id="a580a-124">The following illustration shows how the added data source is configured to use the **Code** field of the **Model.Data.Tax** record list of the **Model** data source as a parameter that must be specified for every configured rule.</span></span>

![Configuration des paramètres de la source de données ajoutée du type Énumération de format\Recherche](./media/er-lookup-data-sources-img4.gif)

<span data-ttu-id="a580a-126">La source de données `Model.Data.Tax` ajoutée est configurée pour spécifier un code taxe pour chaque règle configurée en accédant aux enregistrements de la table d'application **TaxTable**.</span><span class="sxs-lookup"><span data-stu-id="a580a-126">The added `Model.Data.Tax` data source is configured to specify a tax code for every configured rule by accessing records of the **TaxTable** application table.</span></span>

   ![Examen de la source de données de recherche d'une seule société du type Énumération de format\Recherche](./media/er-lookup-data-sources-img5.gif)

<span data-ttu-id="a580a-128">Vous pouvez configurer les règles de recherche pour le format ER sélectionné à l'aide de l'interface utilisateur qui est automatiquement alignée sur la structure de la source de données configurée.</span><span class="sxs-lookup"><span data-stu-id="a580a-128">You can set up the lookup rules for the selected ER format by using the UI that is automatically aligned with the structure of the configured data source.</span></span> <span data-ttu-id="a580a-129">Actuellement, cette interface utilisateur requiert que pour chaque règle, vous spécifiiez la valeur renvoyée comme la valeur d'énumération de format `List of taxation levels` ainsi que le code taxe en tant que paramètre.</span><span class="sxs-lookup"><span data-stu-id="a580a-129">Currently, this UI requires that for each rule, you specify the returned value as the `List of taxation levels` format enumeration value as well as the tax code as a parameter.</span></span>

   ![Configurer les règles pour la source de données configurée](./media/er-lookup-data-sources-img6.gif)

<span data-ttu-id="a580a-131">L'illustration suivante montre comment la source de données `Model.Data.Summary.LevelByLookup` du type **Champ calculé** peut être configurée pour appeler la source de données **Recherche** fournissant les paramètres requis.</span><span class="sxs-lookup"><span data-stu-id="a580a-131">The following illustration shows how the `Model.Data.Summary.LevelByLookup` data source of the **Calculated field** type can be configured to call the configured **Lookup** data source providing the required parameters.</span></span> <span data-ttu-id="a580a-132">Pour traiter cet appel au moment de l'exécution, la Gestion des états électroniques parcourt la liste des règles configurées dans l'ordre défini pour localiser la première règle qui satisfait les conditions stipulées.</span><span class="sxs-lookup"><span data-stu-id="a580a-132">To process this call at runtime, ER goes through the list of configured rules in the defined sequence to locate the first rule that satisfies the provided conditions.</span></span> <span data-ttu-id="a580a-133">Dans cet exemple, c'est la règle qui contient le code taxe qui correspond à celui fourni.</span><span class="sxs-lookup"><span data-stu-id="a580a-133">In this example, it's the rule that contains the tax code that matches the provided one.</span></span> <span data-ttu-id="a580a-134">Par conséquent, la règle la plus appropriée est trouvée et la valeur d'énumération configurée pour la règle trouvée est renvoyée par cette source de données.</span><span class="sxs-lookup"><span data-stu-id="a580a-134">As the result, the most appropriate rule is found and the enumeration value that is configured for the found rule is returned by this data source.</span></span>

> [!NOTE]
> <span data-ttu-id="a580a-135">Une exception est levée lorsqu'aucune règle applicable n'est trouvée.</span><span class="sxs-lookup"><span data-stu-id="a580a-135">An exception is thrown when no applicable rule is found.</span></span> <span data-ttu-id="a580a-136">Pour éviter ces exceptions, configurez des règles supplémentaires à la fin de la liste de règles pour gérer les cas où une valeur non configurée ou aucune valeur n'est fournie.</span><span class="sxs-lookup"><span data-stu-id="a580a-136">To prevent these exceptions, configure additional rules at the end of the rules list to handle cases when a non-configured value or no value is provided.</span></span> <span data-ttu-id="a580a-137">Utilisez les options **\*Non vide\*** et **\*Vide\*** en conséquence.</span><span class="sxs-lookup"><span data-stu-id="a580a-137">Use the **\*Not blank**\* and **\*Blank**\* options accordingly.</span></span>  
>
> ![Ajouter une source de données pour appeler la source de données Recherche configurée](./media/er-lookup-data-sources-img7.png)

<span data-ttu-id="a580a-139">Lorsque vous définissez l'option **Intersociétés** sur **Oui** pour la source de données de recherche modifiable, vous ajoutez un nouveau paramètre requis **Société** à l'ensemble de paramètres de cette source de données.</span><span class="sxs-lookup"><span data-stu-id="a580a-139">When you set the **Cross-company** option to **Yes** for the editable lookup data source, you add a new required **Company** parameter to the set of parameters of this data source.</span></span> <span data-ttu-id="a580a-140">La valeur du paramètre **Société** doit être spécifiée au moment de l'exécution lorsque la source de données de recherche est appelée.</span><span class="sxs-lookup"><span data-stu-id="a580a-140">The value of the **Company** parameter must be specified at runtime when the lookup data source is called.</span></span> <span data-ttu-id="a580a-141">Lorsque le code société est spécifié au moment de l'exécution, les règles configurées pour cette société sont utilisées pour rechercher la règle la plus appropriée et la valeur correspondante est renvoyée.</span><span class="sxs-lookup"><span data-stu-id="a580a-141">When the company code is specified at runtime, the rules configured for this company are used to find the most appropriate rule, and the corresponding value is returned.</span></span> <span data-ttu-id="a580a-142">L'illustration suivante montre comment procéder et comment le jeu de paramètres de la source de données modifiable est modifié.</span><span class="sxs-lookup"><span data-stu-id="a580a-142">The following illustration shows how you can do this and how the set of parameters of the editable data source is changed.</span></span>

   ![Examen de la source de données de recherche intersociétés du type Énumération de format\Recherche](./media/er-lookup-data-sources-img8.gif)

> [!NOTE]
> <span data-ttu-id="a580a-144">Sélectionnez chaque société séparément pour configurer l'ensemble de règles pour cette source de données de recherche du format ER modifiable.</span><span class="sxs-lookup"><span data-stu-id="a580a-144">Select every company seperately to configure the set of rules for this lookup data source of the editable ER format.</span></span> <span data-ttu-id="a580a-145">Une exception est levée lors de l'exécution lorsque la recherche intersociétés est appelée avec le code de la société pour laquelle la configuration de la recherche n'a pas été menée à bien.</span><span class="sxs-lookup"><span data-stu-id="a580a-145">An exception is thrown at runtime when the cross-company lookup is called with the code of the company for which the lookup setting was not completed.</span></span>
>
> <span data-ttu-id="a580a-146">Assurez-vous que vous accordez des autorisations à un utilisateur qui exécute le format ER avec la source de données **Recherche** intersociétés pour accéder aux données de chaque société faisant partie de l'étendue de cette source de données.</span><span class="sxs-lookup"><span data-stu-id="a580a-146">Make sure that you grant permissions for a user who runs the ER format with the cross-company **Lookup** data source to access the data of every company that is in scope of this data source.</span></span> <span data-ttu-id="a580a-147">Sinon, une exception est levée au moment de l'exécution.</span><span class="sxs-lookup"><span data-stu-id="a580a-147">Otherwise, an exception is thrown at runtime.</span></span>

<span data-ttu-id="a580a-148">À partir de la version 10.0.19, les fonctionnalités étendues de la source de données **Recherche** sont disponibles.</span><span class="sxs-lookup"><span data-stu-id="a580a-148">Starting in version 10.0.19, the extended capabilities of the **Lookup** data sources are available.</span></span> <span data-ttu-id="a580a-149">Lorsque vous définissez l'option **Étendue** sur **Oui** pour la source de données de recherche modifiable, la source de données de recherche configurée est transformée en source de données structurée qui offre les fonctionnalités supplémentaires d'analyse de l'ensemble de règles configuré.</span><span class="sxs-lookup"><span data-stu-id="a580a-149">When you set the **Extended** option to **Yes** for the editable lookup data source, the configured lookup data source is transformed to the structured data source that offers the additional capabilities to analyze the configured set of rules.</span></span> <span data-ttu-id="a580a-150">L’illustration suivante présente cette transformation.</span><span class="sxs-lookup"><span data-stu-id="a580a-150">The following illustration shows this transformation.</span></span>

   ![Examen de la source de données de recherche structurée du type Énumération de format\Recherche](./media/er-lookup-data-sources-img9.gif)

- <span data-ttu-id="a580a-152">Le sous-élément **Lookup** est conçu comme une fonction permettant de trouver la règle la plus appropriée parmi l'ensemble de règles configurables en fonction de l'ensemble de paramètres fourni.</span><span class="sxs-lookup"><span data-stu-id="a580a-152">The **Lookup** sub-item is designed as a function to find the most appropriate rule from the set of configurable rules based on the provided set of parameters.</span></span>
- <span data-ttu-id="a580a-153">Le sous-élément **IsLookupResultSet** est conçu comme une fonction permettant d'accepter la valeur fournie de la source de données d'énumération de base et de renvoyer la valeur *Booléenne* **True** lorsque l'ensemble de règles contient au moins une règle pour laquelle la valeur d'énumération fournie a été configurée comme valeur renvoyée.</span><span class="sxs-lookup"><span data-stu-id="a580a-153">The **IsLookupResultSet** sub-item is designed as a function to accept the provided value of the base enumeration data source and return the *Boolean* value of **True** when the set of rules contain at least one rule for which the provided enumeration value was configured as a returned value.</span></span> <span data-ttu-id="a580a-154">Cette fonction renvoie la valeur *Booléenne* **False** lorsqu'aucune règle n'est configurée pour renvoyer la valeur d'énumération fournie.</span><span class="sxs-lookup"><span data-stu-id="a580a-154">This function returns the *Boolean* value of **False** when there are no rules configured to return the provided enumeration value.</span></span>
- <span data-ttu-id="a580a-155">Le sous-élément **Setting** est conçu comme une fonction qui renvoie l'ensemble des règles configurées sous forme d'enregistrements d'une liste d'enregistrements.</span><span class="sxs-lookup"><span data-stu-id="a580a-155">The **Setting** sub-item is designed as a function that returns the set of configured rules as records of a record list.</span></span> <span data-ttu-id="a580a-156">Les valeurs renvoyées et l'ensemble des paramètres des règles configurées sont présentés dans chaque enregistrement renvoyé sous forme de champs des types de données pertinents :</span><span class="sxs-lookup"><span data-stu-id="a580a-156">The returned values and the set of parameters of the configured rules are presented in every returned record as fields of the relevant data types:</span></span>

    - <span data-ttu-id="a580a-157">La valeur renvoyée est présentée comme le champ **Résultat de la recherche**.</span><span class="sxs-lookup"><span data-stu-id="a580a-157">The returned value is presented as the **Lookup result** field.</span></span>
    - <span data-ttu-id="a580a-158">Les paramètres configurés sont présentés sous forme de champs ayant des noms de paramètres (champ **Code** dans cet exemple).</span><span class="sxs-lookup"><span data-stu-id="a580a-158">The configured parameters are presented as fields having names of parameters (**Code** field in this example).</span></span>

<span data-ttu-id="a580a-159">Pour plus d'informations sur la configuration de la source de données **Recherche**, voir [Configurer les formats ER pour utiliser les paramètres spécifiés par entité juridique](er-app-specific-parameters-configure-format.md).</span><span class="sxs-lookup"><span data-stu-id="a580a-159">For more information about to how configure the **Lookup** data source, see [Configure ER formats to use parameters that are specified per legal entity](er-app-specific-parameters-configure-format.md).</span></span> <span data-ttu-id="a580a-160">Pour savoir comment définir les règles de recherche, voir [Configurer les paramètres d'un format ER par entité juridique](er-app-specific-parameters-set-up.md).</span><span class="sxs-lookup"><span data-stu-id="a580a-160">To learn how to set the Lookup rules, see [Set up the parameters of an ER format per legal entity](er-app-specific-parameters-set-up.md).</span></span>

## <a name="additional-resources"></a><span data-ttu-id="a580a-161">Ressources supplémentaires</span><span class="sxs-lookup"><span data-stu-id="a580a-161">Additional resources</span></span>

[<span data-ttu-id="a580a-162">Configurer des formats de gestion des états électroniques pour utiliser les paramètres spécifiés par entité juridique</span><span class="sxs-lookup"><span data-stu-id="a580a-162">Configure ER formats to use parameters that are specified per legal entity</span></span>](er-app-specific-parameters-configure-format.md)

[<span data-ttu-id="a580a-163">Définir les paramètres d’un format de gestion des états électroniques par entité juridique</span><span class="sxs-lookup"><span data-stu-id="a580a-163">Set up the parameters of an ER format per legal entity</span></span>](er-app-specific-parameters-set-up.md)
