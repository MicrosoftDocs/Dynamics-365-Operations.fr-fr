---
title: Recherche étendue de format d'état électronique (ER)
description: Cette rubrique décrit comment une référence de format ER peut être configurée dans la recherche de format ER lorsque le format requis est stocké dans le référentiel global.
author: NickSelin
manager: AnnBe
ms.date: 03/17/2020
ms.topic: article
ms.prod: ''
ms.service: dynamics-ax-platform
ms.technology: ''
ms.search.form: ERSolutionTable, ERWorkspace
audience: Application User
ms.reviewer: kfend
ms.search.scope: Core, Operations
ms.custom: 97423
ms.assetid: ''
ms.search.region: Global
ms.author: nselin
ms.search.validFrom: 2020-04-01
ms.dyn365.ops.version: AX 10.0.9
ms.openlocfilehash: 28bdd02c25db27536a489f9e8ab2a91a5ca0f09c
ms.sourcegitcommit: b92c3e1b3403d0455fc4e0bf9132d6bc0d7aba5e
ms.translationtype: HT
ms.contentlocale: fr-FR
ms.lasthandoff: 03/18/2020
ms.locfileid: "3138858"
---
# <a name="allow-users-to-set-up-an-er-format-reference-inquiring-a-format-from-the-global-repository"></a><span data-ttu-id="53fb4-103">Autoriser les utilisateurs à configurer une référence de format ER en demandant un format à partir du référentiel global</span><span class="sxs-lookup"><span data-stu-id="53fb4-103">Allow users to set up an ER format reference inquiring a format from the Global repository</span></span>

[!include [banner](../includes/banner.md)]

<span data-ttu-id="53fb4-104">Vous pouvez utiliser le cadre [État électronique](general-electronic-reporting.md) (ER) pour configurer des [formats](general-electronic-reporting.md#FormatComponentOutbound) pour les documents sortants conformes aux obligations légales de différents pays/régions.</span><span class="sxs-lookup"><span data-stu-id="53fb4-104">You can use the [Electronic reporting](general-electronic-reporting.md) (ER) framework to configure [formats](general-electronic-reporting.md#FormatComponentOutbound) for outbound documents in accordance to the legal requirements of various countries/regions.</span></span> <span data-ttu-id="53fb4-105">Vous pouvez également utiliser le cadre ER pour configurer des [formats](general-electronic-reporting.md#FormatComponentInbound) pour analyser les documents entrants et utiliser les informations de ces documents pour ajouter ou mettre à jour les données d'application.</span><span class="sxs-lookup"><span data-stu-id="53fb4-105">You can also use the ER framework to configure [formats](general-electronic-reporting.md#FormatComponentInbound) for parsing inbound documents and use the information from those documents to append or update application data.</span></span> <span data-ttu-id="53fb4-106">Chacun de ces formats peut être utilisé dans votre instance Dynamics 365 Finance pour la gestion des documents commerciaux entrants ou sortants dans le cadre d'un certain processus commercial.</span><span class="sxs-lookup"><span data-stu-id="53fb4-106">Each of these formats can used in your Dynamics 365 Finance instance for handling inbound or outbound business documents as part of a certain business process.</span></span> 

<span data-ttu-id="53fb4-107">Habituellement, vous devez spécifier le format ER à utiliser dans un processus commercial donné.</span><span class="sxs-lookup"><span data-stu-id="53fb4-107">Usually, you must specify what ER format must be used in a certain business process.</span></span> <span data-ttu-id="53fb4-108">Pour ce faire, sélectionnez un format ER unique dans un champ de recherche configuré dans le cadre de paramètres spécifiques au processus commercial.</span><span class="sxs-lookup"><span data-stu-id="53fb4-108">To do that, select a single ER format in a lookup field that is configured as part of business process-specific parameters.</span></span> <span data-ttu-id="53fb4-109">Ces champs de recherche sont généralement implémentés à l'aide de l'API appropriée du cadre ER.</span><span class="sxs-lookup"><span data-stu-id="53fb4-109">These lookup fields are usually implemented by using the appropriate API of the ER framework.</span></span> <span data-ttu-id="53fb4-110">Pour plus d'informations, voir [API du framework ER - code pour afficher une recherche de mappage de format](er-apis-app73.md#code-to-display-a-format-mapping-lookup).</span><span class="sxs-lookup"><span data-stu-id="53fb4-110">For more information, see [ER framework API - code to display a format mapping lookup](er-apis-app73.md#code-to-display-a-format-mapping-lookup).</span></span>

<span data-ttu-id="53fb4-111">Par exemple, lorsque vous configurez les [paramètres de commerce extérieur](https://docs.microsoft.com/dynamics365/finance/localizations/emea-intrastat#set-up-foreign-trade-parameters), vous devez configurer les références aux formats ER individuels qui seront utilisés pour générer la déclaration Intrastat et le rapport de contrôle de la déclaration Intrastat.</span><span class="sxs-lookup"><span data-stu-id="53fb4-111">For example, when you configure [foreign trade parameters](https://docs.microsoft.com/dynamics365/finance/localizations/emea-intrastat#set-up-foreign-trade-parameters), you need to set up the references to individual ER formats that will be used to generate the Intrastat declaration and the Intrastat declaration control report.</span></span> <span data-ttu-id="53fb4-112">Les captures d'écran ci-dessous montrent à quoi ressemble le champ de recherche des formats ER dans la page **Paramètres de commerce extérieur**.</span><span class="sxs-lookup"><span data-stu-id="53fb4-112">The screenshots below show how the ER formats lookup field looks like in the **Foreign trade parameters** page.</span></span>

<span data-ttu-id="53fb4-113">Si l'instance Finance actuelle ne contient aucun format ER lié au processus commercial Intrastat, ce champ de recherche sera vide.</span><span class="sxs-lookup"><span data-stu-id="53fb4-113">If the current Finance instance contains no Intrastat business process related ER formats, this lookup field will be empty.</span></span>

<span data-ttu-id="53fb4-114">[![Page Paramètres de commerce extérieur](./media/ER-ExtLookup-Lookup1.gif)](./media/ER-ExtLookup-Lookup1.gif)</span><span class="sxs-lookup"><span data-stu-id="53fb4-114">[![Foreign trade parameters page](./media/ER-ExtLookup-Lookup1.gif)](./media/ER-ExtLookup-Lookup1.gif)</span></span>

<span data-ttu-id="53fb4-115">Si l'instance Finance actuelle ne contient aucun format ER lié au processus commercial Intrastat, ce champ de recherche présentera les formats ER.</span><span class="sxs-lookup"><span data-stu-id="53fb4-115">If the current Finance instance contains Intrastat business process related ER formats, this lookup field offers the ER formats.</span></span>

<span data-ttu-id="53fb4-116">[![Page Paramètres de commerce extérieur](./media/ER-ExtLookup-Lookup2.png)](./media/ER-ExtLookup-Lookup2.png)</span><span class="sxs-lookup"><span data-stu-id="53fb4-116">[![Foreign trade parameters page](./media/ER-ExtLookup-Lookup2.png)](./media/ER-ExtLookup-Lookup2.png)</span></span>

<span data-ttu-id="53fb4-117">Cette recherche ne propose que les formats ER qui ont déjà été importés dans l'instance Finance actuelle.</span><span class="sxs-lookup"><span data-stu-id="53fb4-117">This lookup offers only the ER formats that have already been imported to the current Finance instance.</span></span> <span data-ttu-id="53fb4-118">Pour [importer](./tasks/er-import-configuration-lifecycle-services.md) des solutions ER vers l'instance Finance actuelle, vous devez disposer des autorisations pour exécuter la fonction appropriée du cadre ER qui prend en charge le [cycle de la vie ](general-electronic-reporting-manage-configuration-lifecycle.md)des solutions ER contenant les formats ER.</span><span class="sxs-lookup"><span data-stu-id="53fb4-118">To [import](./tasks/er-import-configuration-lifecycle-services.md) ER solutions to the current Finance instance, you need to have permissions to run the appropriate function of the ER framework that supports the [lifecycle](general-electronic-reporting-manage-configuration-lifecycle.md) of ER solutions that contain ER formats.</span></span>

<span data-ttu-id="53fb4-119">À partir de la version Finance 10.0.9 (version d'avril 2020), l'interface utilisateur de la recherche de format ER implémentée à l'aide de l'API du cadre ER a été étendue.</span><span class="sxs-lookup"><span data-stu-id="53fb4-119">Starting in the Finance version 10.0.9 (April 2020 release), the user interface of the ER format lookup that is implemented by using the ER framework API, has been extended.</span></span> <span data-ttu-id="53fb4-120">Vous pouvez toujours sélectionner les formats ER existants, qui sont sur l'organisateur **Sélectionner la configuration du format**.</span><span class="sxs-lookup"><span data-stu-id="53fb4-120">You can still select the existing ER formats, which on the **Select format configuration** FastTab.</span></span> <span data-ttu-id="53fb4-121">En plus de cela, la recherche étendue offre une nouvelle option pour rechercher dans le référentiel global (GR) des formats ER spécifiques.</span><span class="sxs-lookup"><span data-stu-id="53fb4-121">In addition to that, the extended lookup offers the new option to search the Global repository (GR) to locate specific ER formats.</span></span> <span data-ttu-id="53fb4-122">Tous les formats ER du GR sont proposés sur l'organisateur **Importer depuis le référentiel global**.</span><span class="sxs-lookup"><span data-stu-id="53fb4-122">All ER formats of the GR are offered on the **Import from Global repository** FastTab.</span></span>

<span data-ttu-id="53fb4-123">[![Page Paramètres de commerce extérieur](./media/ER-ExtLookup-Lookup3.png)](./media/ER-ExtLookup-Lookup3.png)</span><span class="sxs-lookup"><span data-stu-id="53fb4-123">[![Foreign trade parameters page](./media/ER-ExtLookup-Lookup3.png)](./media/ER-ExtLookup-Lookup3.png)</span></span>

<span data-ttu-id="53fb4-124">Similairement à l'organisateur **Sélectionner la configuration du format**, l'organisateur **Importer depuis le référentiel global**\* affiche uniquement les formats ER applicables au processus commercial pour lequel un format ER est sélectionné dans ce champ de recherche.</span><span class="sxs-lookup"><span data-stu-id="53fb4-124">Similar to the **Select format configuration** FastTab, the **Import from Global repository** FastTab shows only the ER formats that are applicable to the business process for which an ER format is selected in this lookup field.</span></span> <span data-ttu-id="53fb4-125">Dans cet exemple, il s'agit de la génération de la déclaration Intrastat.</span><span class="sxs-lookup"><span data-stu-id="53fb4-125">In this example, the generation of Intrastat declaration.</span></span> <span data-ttu-id="53fb4-126">Le format ER est applicable à l'entreprise à laquelle l'utilisateur est actuellement connecté, selon le contexte du pays de l'entreprise.</span><span class="sxs-lookup"><span data-stu-id="53fb4-126">The ER format is applicable for the company to which the user is currently signed in, depending on the company country context.</span></span>

<span data-ttu-id="53fb4-127">Lorsque vous sélectionnez un format ER sur l'organisateur **Importer depuis le référentiel global**, la [configuration](general-electronic-reporting.md#Configuration) du format ER sélectionné est importée du GR vers l'instance Finance actuelle.</span><span class="sxs-lookup"><span data-stu-id="53fb4-127">When you select an ER format on the **Import from Global repository** FastTab, the selected ER format [configuration](general-electronic-reporting.md#Configuration) is imported from the GR to the current Finance instance.</span></span>

<span data-ttu-id="53fb4-128">[![Page Paramètres de commerce extérieur](./media/ER-ExtLookup-FormatImport.png)](./media/ER-ExtLookup-FormatImport.png)</span><span class="sxs-lookup"><span data-stu-id="53fb4-128">[![Foreign trade parameters page](./media/ER-ExtLookup-FormatImport.png)](./media/ER-ExtLookup-FormatImport.png)</span></span>

<span data-ttu-id="53fb4-129">Ensuite, si l'importation se termine avec succès, la référence au format ER importé est stockée dans ce champ de recherche.</span><span class="sxs-lookup"><span data-stu-id="53fb4-129">Then, if the import completes successfully, the reference to the imported ER format is stored in this lookup field.</span></span> <span data-ttu-id="53fb4-130">Notez que lorsque vous accédez au GR pour la première fois, vous devez suivre le lien fourni pour vous inscrire au [Regulatory Configuration Service](https://aka.ms/rcs) (RCS) qui est utilisé pour gérer l'accès au stockage GR.</span><span class="sxs-lookup"><span data-stu-id="53fb4-130">Note that when you access the GR for the first time, you need to follow the link provided to sign up for the [Regulatory Configuration Service](https://aka.ms/rcs) (RCS) that is used to manage access to the GR storage.</span></span>

<span data-ttu-id="53fb4-131">[![Page Paramètres de commerce extérieur](./media/ER-ExtLookup-RepoSignUp.png)](./media/ER-ExtLookup-RepoSignUp.png)</span><span class="sxs-lookup"><span data-stu-id="53fb4-131">[![Foreign trade parameters page](./media/ER-ExtLookup-RepoSignUp.png)](./media/ER-ExtLookup-RepoSignUp.png)</span></span>

<span data-ttu-id="53fb4-132">Par défaut, l'organisateur **Importer depuis le référentiel global** présente la liste des formats ER depuis le stockage temporaire qui est automatiquement créé en fonction du contenu GR pour des améliorations de performances.</span><span class="sxs-lookup"><span data-stu-id="53fb4-132">By default, the **Import from Global repository** FastTab presents the list of ER formats from the temporary storage that is automatically created based on the GR content for performance improvements.</span></span> <span data-ttu-id="53fb4-133">Cela se produit lorsque l'organisateur **Importer depuis le référentiel global** est ouvert la première fois, ce qui peut prendre plusieurs secondes.</span><span class="sxs-lookup"><span data-stu-id="53fb4-133">This happens when the **Import from Global repository** FastTab is opened the first time, which may take several seconds.</span></span>

<span data-ttu-id="53fb4-134">Si vous ne voyez pas le format ER requis dans l'organisateur **Importer depuis le référentiel global**, mais vous êtes sûr que ce format ER est stocké dans le GR, sélectionnez l'option **Synchroniser**.</span><span class="sxs-lookup"><span data-stu-id="53fb4-134">If you do not see the required ER format in the **Import from Global repository** FastTab, but you are sure that this ER format is stored in the GR, select the **Synchronize** option.</span></span> <span data-ttu-id="53fb4-135">Cela mettra à jour le stockage temporaire et le synchronisera avec le contenu actuel du GR.</span><span class="sxs-lookup"><span data-stu-id="53fb4-135">This will update the temporary storage and synchronize it with the current content of the GR.</span></span>

## <a name="feature-activation"></a><span data-ttu-id="53fb4-136">Activation des fonctionnalités</span><span class="sxs-lookup"><span data-stu-id="53fb4-136">Feature activation</span></span>

<span data-ttu-id="53fb4-137">La disponibilité de cette fonctionnalité est contrôlée par la fonctionnalité **Recherche étendue des configurations de format ER permettant de consulter le référentiel global** dans la **Gestion des fonctionnalités**.</span><span class="sxs-lookup"><span data-stu-id="53fb4-137">The availability of this functionality is controlled by the feature **Extended lookup of ER format configurations allowing to inquire the Global repository** in the **Feature management**.</span></span> <span data-ttu-id="53fb4-138">Cette fonctionnalité est activée par défaut.</span><span class="sxs-lookup"><span data-stu-id="53fb4-138">This feature is enabled by default.</span></span>

<span data-ttu-id="53fb4-139">[![Page Gestion des fonctions](./media/ER-ExtLookup-FeatureMngt.png)](./media/ER-ExtLookup-FeatureMngt.png)</span><span class="sxs-lookup"><span data-stu-id="53fb4-139">[![Feature management page](./media/ER-ExtLookup-FeatureMngt.png)](./media/ER-ExtLookup-FeatureMngt.png)</span></span>

## <a name="security-considerations"></a><span data-ttu-id="53fb4-140">Considérations de sécurité</span><span class="sxs-lookup"><span data-stu-id="53fb4-140">Security considerations</span></span>

<span data-ttu-id="53fb4-141">Le privilège **Gérer les référentiels de configuration** (**ERMaintainSolutionRepositories**) contrôle l'accès au GR pour un utilisateur lançant la recherche de format ER avec l''organisateur **Importer depuis le référentiel global** activé.</span><span class="sxs-lookup"><span data-stu-id="53fb4-141">The **Maintain configuration repositories** (**ERMaintainSolutionRepositories**) privilege controls access to the GR for a user opening the ER format lookup with the enabled **Import from Global repository** FastTab.</span></span> <span data-ttu-id="53fb4-142">Pour permettre aux utilisateurs d'accéder au contenu GR à partir des recherches au format ER, vous devez modifier les paramètres de sécurité en accordant le privilège **ERMaintainSolutionRepositories** aux utilisateurs soit directement, soit en utilisant des rôles et des tâches déjà attribués.</span><span class="sxs-lookup"><span data-stu-id="53fb4-142">To allow users to access the GR content from the ER format lookups, you need to change the security settings by granting the **ERMaintainSolutionRepositories** privilege to users either directly or by using already assigned roles and duties.</span></span>

<span data-ttu-id="53fb4-143">La capture d'écran suivante montre comment ce privilège peut être accordé aux utilisateurs affectés au rôle **Comptable**.</span><span class="sxs-lookup"><span data-stu-id="53fb4-143">The following screenshot shows how this privilege can be granted to users who are assigned to the **Accountant** role.</span></span> <span data-ttu-id="53fb4-144">Ce rôle permet aux utilisateurs de configurer les paramètres de commerce extérieur et de définir des références aux formats ER dans les champs **Mappage de format de fichier** et **Mappage de format de rapport** sur la page **Paramètres de commerce extérieur**.</span><span class="sxs-lookup"><span data-stu-id="53fb4-144">This role makes allows users to configure foreign trade parameters and set up references to the ER formats in the **File format mapping** and **Report format mapping** fields on the **Foreign trade parameters** page.</span></span>

<span data-ttu-id="53fb4-145">[![Page Configuration de sécurité](./media/ER-ExtLookup-SecuritySetting.png)](./media/ER-ExtLookup-SecuritySetting.png)</span><span class="sxs-lookup"><span data-stu-id="53fb4-145">[![Security configuration page](./media/ER-ExtLookup-SecuritySetting.png)](./media/ER-ExtLookup-SecuritySetting.png)</span></span>

## <a name="limitations"></a><span data-ttu-id="53fb4-146">Limites</span><span class="sxs-lookup"><span data-stu-id="53fb4-146">Limitations</span></span>

<span data-ttu-id="53fb4-147">L'accès au GR dans la recherche de format ER n'est actuellement pris en charge que pour la sélection des formats ER utilisés pour générer des documents sortants.</span><span class="sxs-lookup"><span data-stu-id="53fb4-147">Access to the GR in the ER format lookup is currently only supported for the selection of ER formats that are used to generate outbound documents.</span></span>

## <a name="frequently-asked-questions"></a><span data-ttu-id="53fb4-148">Forum aux questions</span><span class="sxs-lookup"><span data-stu-id="53fb4-148">Frequently asked questions</span></span>

### <a name="why-cant-i-access-the-global-repository-from-the-er-format-lookup"></a><span data-ttu-id="53fb4-149">Pourquoi ne puis-je pas accéder au référentiel global à partir de la recherche au format ER ?</span><span class="sxs-lookup"><span data-stu-id="53fb4-149">Why can't I access the Global repository from the ER format lookup?</span></span>

<span data-ttu-id="53fb4-150">Si vous avez activé la fonction **Recherche étendue des configurations de format ER permettant de consulter le référentiel global** dans la page **Gestion des fonctionnalités**, mais les utilisateurs ne peuvent pas voir les formats ER sur l'organisateur **Importer depuis le référentiel global** et l'option **Synchroniser** est visible mais désactivée, assurez-vous que le privilège **Gérer les référentiels de configuration** (**ERMaintainSolutionRepositories**) a été accordé à l'utilisateur.</span><span class="sxs-lookup"><span data-stu-id="53fb4-150">If you have enabled the **Extended lookup of ER format configurations allowing to inquire the Global repository** feature on the **Feature management** page, but users can't see ER formats on the **Import from Global repository** FastTab and the **Synchronize** option is visible but disabled, make sure that the **Maintain configuration repositories** (**ERMaintainSolutionRepositories**) privilege has been granted to the user.</span></span> <span data-ttu-id="53fb4-151">Contactez votre administrateur système pour obtenir ce privilège.</span><span class="sxs-lookup"><span data-stu-id="53fb4-151">Contact your system administrator to receive this privilege.</span></span>

## <a name="additional-resources"></a><span data-ttu-id="53fb4-152">Ressources supplémentaires</span><span class="sxs-lookup"><span data-stu-id="53fb4-152">Additional resources</span></span>

- [<span data-ttu-id="53fb4-153">Vue d'ensemble des états électroniques</span><span class="sxs-lookup"><span data-stu-id="53fb4-153">Electronic reporting (ER) overview</span></span>](general-electronic-reporting.md)
- [<span data-ttu-id="53fb4-154">AP du cadre des états électroniques (ER)</span><span class="sxs-lookup"><span data-stu-id="53fb4-154">Electronic reporting (ER) framework API</span></span>](er-apis-app73.md)
- [<span data-ttu-id="53fb4-155">Gérer le cycle de vie des configurations des états électroniques (ER)</span><span class="sxs-lookup"><span data-stu-id="53fb4-155">Manage Electronic reporting (ER) configurations lifecycle</span></span>](general-electronic-reporting-manage-configuration-lifecycle.md)
