---
title: Configurer des formats de gestion des états électroniques pour utiliser les paramètres spécifiés par entité juridique
description: Cette rubrique explique comment vous pouvez configurer des formats de gestion des états électroniques pour utiliser les paramètres propres à une entité juridique.
author: NickSelin
manager: AnnBe
ms.date: 04/02/2021
ms.topic: article
ms.prod: ''
ms.technology: ''
ms.search.form: ERSolutionTable, EROperationDesigner, ERLookupDesigner, ERComponentLookupStructureEditing
audience: Application User, Developer, IT Pro
ms.reviewer: kfend
ms.custom: ''
ms.assetid: ''
ms.search.region: Global
ms.author: nselin
ms.search.validFrom: 2019-01-01
ms.dyn365.ops.version: Release 8.1.3
ms.openlocfilehash: 3802675b2fe0615f4c2ad682462a233c67f18f1a
ms.sourcegitcommit: 74f5b04b482b2ae023c728e0df0eb78305493c6a
ms.translationtype: HT
ms.contentlocale: fr-FR
ms.lasthandoff: 04/02/2021
ms.locfileid: "5853491"
---
# <a name="configure-er-formats-to-use-parameters-that-are-specified-per-legal-entity"></a><span data-ttu-id="b5ba2-103">Configurer des formats de gestion des états électroniques pour utiliser les paramètres spécifiés par entité juridique</span><span class="sxs-lookup"><span data-stu-id="b5ba2-103">Configure ER formats to use parameters that are specified per legal entity</span></span>

[!include[banner](../includes/banner.md)]

## <a name="overview"></a><span data-ttu-id="b5ba2-104">Vue d’ensemble</span><span class="sxs-lookup"><span data-stu-id="b5ba2-104">Overview</span></span>

<span data-ttu-id="b5ba2-105">Dans de nombreux formats de gestion de données électroniques que vous concevrez, vous devez filtrer les données à l’aide d’un ensemble de valeurs propres à chaque entité juridique de votre instance (par exemple, un ensemble de codes taxe pour filtrer les transactions de taxe).</span><span class="sxs-lookup"><span data-stu-id="b5ba2-105">In many of the Electronic reporting (ER) formats that you will design, you must filter data by using a set of values that are specific to each legal entity of your instance (for example, a set of tax codes to filter tax transactions).</span></span> <span data-ttu-id="b5ba2-106">Actuellement, lorsque le filtrage de ce type est configuré dans un format de gestion des états électroniques, les valeurs qui dépendent de l’entité juridique (par exemple, les codes taxe) sont utilisées dans des expressions du format de gestion des états électroniques pour préciser les règles de filtrage des données.</span><span class="sxs-lookup"><span data-stu-id="b5ba2-106">Currently, when filtering of this type is configured in an ER format, values that are dependent on the legal entity (for example, tax codes) are used in expressions of the ER format to specify data filtering rules.</span></span> <span data-ttu-id="b5ba2-107">Par conséquent, le format de gestion des états électroniques est rendu spécifique à une entité juridique, et pour générer les états requis, vous devez créer des copies dérivées du format d’origine de gestion des états électroniques pour chaque entité juridique dans laquelle vous devez exécuter le format de gestion des états électroniques.</span><span class="sxs-lookup"><span data-stu-id="b5ba2-107">Therefore, the ER format is made legal entity–specific, and to generate the required reports, you must create derived copies of the original ER format for each legal entity where you have to run the ER format.</span></span> <span data-ttu-id="b5ba2-108">Chaque format de gestion des états électroniques (ER) dérivé doit être modifié pour y insérer des valeurs propres à l’entité juridique, rebasé lorsque la version d’origine (de base) a été mise à jour, exporté d’un environnement de test, puis importé dans un environnement de production lorsqu’il doit être déployé pour un usage en production, etc.</span><span class="sxs-lookup"><span data-stu-id="b5ba2-108">Each derived ER format must be edited to bring legal entity–specific values into it, rebased whenever the original (base) version has been updated, exported from a test environment, and imported into a production environment when it must be deployed for production use, and so on.</span></span> <span data-ttu-id="b5ba2-109">Par conséquent, la maintenance de ce type de solution de gestion des états électroniques configurée est complexe et chronophage pour plusieurs raisons :</span><span class="sxs-lookup"><span data-stu-id="b5ba2-109">Therefore, maintenance of this type of configured ER solution is complex and time-consuming for several reasons:</span></span>

-   <span data-ttu-id="b5ba2-110">Plus il y a d’entités juridiques, plus il y a de mises à jour des configurations de format de gestion des états électroniques à faire.</span><span class="sxs-lookup"><span data-stu-id="b5ba2-110">The more legal entities there are, the more ER format configurations must be maintained.</span></span>
-   <span data-ttu-id="b5ba2-111">La mise à jour des configurations de gestion des états électroniques exige des utilisateurs professionnels des connaissances en matière de gestion des états électroniques.</span><span class="sxs-lookup"><span data-stu-id="b5ba2-111">Maintenance of ER configurations requires that business users have ER knowledge.</span></span>

<span data-ttu-id="b5ba2-112">La fonctionnalité des paramètres propres à l’application de gestion des états électroniques permet aux utilisateurs avancés de configurer le filtrage des données dans un format de gestion des états électroniques de telle sorte qu’il soit basé sur un ensemble de règles non valides.</span><span class="sxs-lookup"><span data-stu-id="b5ba2-112">The ER application-specific parameters feature lets power users configure data filtering in an ER format so that it's based on a set of abstract rules.</span></span> <span data-ttu-id="b5ba2-113">Cet ensemble de règles peut être configuré pour utiliser les sources de données disponibles dans un format de gestion des états électroniques.</span><span class="sxs-lookup"><span data-stu-id="b5ba2-113">This set of rules can be configured to use the data sources that are available in an ER format.</span></span> <span data-ttu-id="b5ba2-114">Les utilisateurs professionnels peuvent spécifier de règles réelles au delà de la structure de gestion des états électroniques à l’aide de l’interface utilisateur qui est automatiquement générée selon les paramètres du format de gestion des états électroniques correspondant et les données actuelles de l’entité juridique qui seront accessibles par les sources de données du format de gestion des états électroniques.</span><span class="sxs-lookup"><span data-stu-id="b5ba2-114">Business users can then specify real rules beyond the ER framework by using the user interface (UI) that is automatically generated based on the settings of the corresponding ER format and the current legal entity data that will be accessed by the ER format's data sources.</span></span> <span data-ttu-id="b5ba2-115">L’ensemble de règles qui est spécifié pour un format de gestion des états électroniques peut être exporté depuis l’entité juridique actuelle de l’instance de Dynamics 365 Finance (Finance).</span><span class="sxs-lookup"><span data-stu-id="b5ba2-115">The set of rules that is specified for an ER format can be exported from the current legal entity of the Dynamics 365 Finance (Finance) instance.</span></span> <span data-ttu-id="b5ba2-116">Il peut être ensuite importé dans une autre entité juridique de la même instance de Finance ou d’une autre instance en tant qu’ensemble de règles pour le même format de gestion des états électroniques.</span><span class="sxs-lookup"><span data-stu-id="b5ba2-116">It can then be imported into another legal entity of either the same Finance instance or a different instance as a set of rules for the same ER format.</span></span>

## <a name="prerequisites"></a><span data-ttu-id="b5ba2-117">Conditions préalables</span><span class="sxs-lookup"><span data-stu-id="b5ba2-117">Prerequisites</span></span>

<span data-ttu-id="b5ba2-118">Pour exécuter les exemples de cette rubrique, vous devez avoir accès à l’instance de Regulatory Configuration Service (RCS) qui a été mise en service pour le même locataire que Finance and Operations, pour un des rôles suivants :</span><span class="sxs-lookup"><span data-stu-id="b5ba2-118">To complete the examples in this topic, you must have access to the instance of Regulatory Configuration Services (RCS) that has been provisioned for the same tenant as Finance for one of the following roles:</span></span>

- <span data-ttu-id="b5ba2-119">Développeur d’états électroniques</span><span class="sxs-lookup"><span data-stu-id="b5ba2-119">Electronic reporting developer</span></span>
- <span data-ttu-id="b5ba2-120">Consultant fonctionnel des états électroniques</span><span class="sxs-lookup"><span data-stu-id="b5ba2-120">Electronic reporting functional consultant</span></span>
- <span data-ttu-id="b5ba2-121">Administrateur système</span><span class="sxs-lookup"><span data-stu-id="b5ba2-121">System administrator</span></span>

<span data-ttu-id="b5ba2-122">Nous vous recommandons d’effectuer les étapes de la rubrique [Prendre en charge les appels paramétrés des sources de données des états électroniques de type de CHAMP CALCULÉ](er-calculated-field-type.md).</span><span class="sxs-lookup"><span data-stu-id="b5ba2-122">We recommend that you complete the steps in the [Support parameterized calls of ER data sources of CALCULATED FIELD type](er-calculated-field-type.md) topic.</span></span> <span data-ttu-id="b5ba2-123">Si vous avez déjà procédé comme suit, vous pouvez ignorer les étapes suivantes de la section **Importer les configurations de gestion des états électroniques dans RCS**.</span><span class="sxs-lookup"><span data-stu-id="b5ba2-123">If you've already completed those steps, you can skip the steps in the **Import ER configurations into RCS** section that follows.</span></span>

## <a name="import-er-configurations-into-rcs"></a><span data-ttu-id="b5ba2-124">Importer les configurations de gestion des états électroniques dans RCS</span><span class="sxs-lookup"><span data-stu-id="b5ba2-124">Import ER configurations into RCS</span></span>

<span data-ttu-id="b5ba2-125">Téléchargez et stockez localement les configurations ER suivantes.</span><span class="sxs-lookup"><span data-stu-id="b5ba2-125">Download and locally store the following ER configurations.</span></span>

| <span data-ttu-id="b5ba2-126">**Description du contenu**</span><span class="sxs-lookup"><span data-stu-id="b5ba2-126">**Content description**</span></span>                        | <span data-ttu-id="b5ba2-127">**Nom de fichier**</span><span class="sxs-lookup"><span data-stu-id="b5ba2-127">**File name**</span></span>                                        |
|------------------------------------------------|------------------------------------------------------|
| <span data-ttu-id="b5ba2-128">Exemple de fichier de configuration **Modèle de données de gestion des états électroniques**</span><span class="sxs-lookup"><span data-stu-id="b5ba2-128">Sample **ER data model** configuration file</span></span>    | [<span data-ttu-id="b5ba2-129">Model to learn parameterized calls.version.1.xml</span><span class="sxs-lookup"><span data-stu-id="b5ba2-129">Model to learn parameterized calls.version.1.xml</span></span>](https://download.microsoft.com/download/2/d/b/2db913a0-3622-494e-91a2-97fc494af9b9/Modeltolearnparameterizedcalls.version.1.xml)     |
| <span data-ttu-id="b5ba2-130">Exemple de fichier de configuration **Métadonnées de gestion des états électroniques**</span><span class="sxs-lookup"><span data-stu-id="b5ba2-130">Sample **ER metadata** configuration file</span></span>      | [<span data-ttu-id="b5ba2-131">Metadata to learn parameterized calls.version.1.xml</span><span class="sxs-lookup"><span data-stu-id="b5ba2-131">Metadata to learn parameterized calls.version.1.xml</span></span>](https://download.microsoft.com/download/1/b/3/1b343968-5a47-4000-b5a8-6487698ef4c0/Metadatatolearnparameterizedcalls.version.1.xml)  |
| <span data-ttu-id="b5ba2-132">Exemple de fichier de configuration **Mise en correspondance de modèle de gestion des états électroniques**</span><span class="sxs-lookup"><span data-stu-id="b5ba2-132">Sample **ER model mapping** configuration file</span></span> | [<span data-ttu-id="b5ba2-133">Mapping to learn parameterized calls.version.1.1.xml</span><span class="sxs-lookup"><span data-stu-id="b5ba2-133">Mapping to learn parameterized calls.version.1.1.xml</span></span>](https://download.microsoft.com/download/8/6/6/866e0ab6-2e05-4d98-9d52-d2da2038f6e4/Mappingtolearnparameterizedcalls.version.1.1.xml) |
| <span data-ttu-id="b5ba2-134">Exemple de configuration **Format de gestion des états électroniques**</span><span class="sxs-lookup"><span data-stu-id="b5ba2-134">Sample **ER format** configuration</span></span>             | [<span data-ttu-id="b5ba2-135">Format to learn parameterized calls.version.1.1.xml</span><span class="sxs-lookup"><span data-stu-id="b5ba2-135">Format to learn parameterized calls.version.1.1.xml</span></span>](https://download.microsoft.com/download/e/3/9/e392eadc-b9b4-4834-95c3-b8066dd00b9c/Formattolearnparameterizedcalls.version.1.1.xml)  |

<span data-ttu-id="b5ba2-136">Ensuite, connectez-vous à votre instance RCS.</span><span class="sxs-lookup"><span data-stu-id="b5ba2-136">Next, sign in to your RCS instance.</span></span>

<span data-ttu-id="b5ba2-137">Dans cet exemple, vous créerez une configuration pour la société fictive, Litware, Inc.</span><span class="sxs-lookup"><span data-stu-id="b5ba2-137">In this example, you will create a configuration for the Litware, Inc sample company.</span></span> <span data-ttu-id="b5ba2-138">Avant de pouvoir réaliser les étapes de cette procédure, vous devez commencer par effectuer la procédure, [Créer un fournisseur de configuration et le marquer comme actif](tasks/er-configuration-provider-mark-it-active-2016-11.md) dans RCS.</span><span class="sxs-lookup"><span data-stu-id="b5ba2-138">Before you can complete this procedure, you must complete the steps in the [Create a configuration provider and mark it as active](tasks/er-configuration-provider-mark-it-active-2016-11.md) topic in RCS.</span></span>

1.  <span data-ttu-id="b5ba2-139">Dans le tableau de bord par défaut, sélectionnez **Gestion des états électroniques**.</span><span class="sxs-lookup"><span data-stu-id="b5ba2-139">On the default dashboard, select **Electronic reporting**.</span></span>
2.  <span data-ttu-id="b5ba2-140">Sélectionnez **Configurations des états**.</span><span class="sxs-lookup"><span data-stu-id="b5ba2-140">Select **Reporting configurations**.</span></span>
3.  <span data-ttu-id="b5ba2-141">Importez les configurations de gestion des états électroniques téléchargées précédemment dans RCS, dans l’ordre suivant : modèle de données, métadonnées, mise en correspondance des modèles et format.</span><span class="sxs-lookup"><span data-stu-id="b5ba2-141">Import the ER configurations that you downloaded earlier into RCS, in the following order: data model, metadata, model mapping, and format.</span></span> <span data-ttu-id="b5ba2-142">Pour chaque configuration de gestion des états électroniques, procédez comme suit :</span><span class="sxs-lookup"><span data-stu-id="b5ba2-142">For each ER configuration, follow these steps:</span></span>

    1.  <span data-ttu-id="b5ba2-143">Sélectionnez **Exchange**.</span><span class="sxs-lookup"><span data-stu-id="b5ba2-143">Select **Exchange**.</span></span>
    2.  <span data-ttu-id="b5ba2-144">Sélectionnez **Charger depuis le fichier XML**.</span><span class="sxs-lookup"><span data-stu-id="b5ba2-144">Select **Load from XML file**.</span></span>
    3.  <span data-ttu-id="b5ba2-145">Sélectionnez **Parcourir** pour sélectionner le fichier pour la configuration de gestion des états électroniques requise au format XML.</span><span class="sxs-lookup"><span data-stu-id="b5ba2-145">Select **Browse** to select the file for the required ER configuration in XML format.</span></span>
    4.  <span data-ttu-id="b5ba2-146">Cliquez sur **OK**.</span><span class="sxs-lookup"><span data-stu-id="b5ba2-146">Select **OK**.</span></span>

## <a name="review-the-er-solution-that-is-provided"></a><span data-ttu-id="b5ba2-147">Examen de la solution de gestion des états électroniques fournie</span><span class="sxs-lookup"><span data-stu-id="b5ba2-147">Review the ER solution that is provided</span></span>

1.  <span data-ttu-id="b5ba2-148">Dans l’arborescence de configuration, développez les contenus de l’article **Modèle pour apprendre les appels paramétrés**.</span><span class="sxs-lookup"><span data-stu-id="b5ba2-148">In the configuration tree, expand the contents of the **Model to learn parameterized calls** item.</span></span>
2.  <span data-ttu-id="b5ba2-149">Sélectionnez l’article **Format pour apprendre les appels paramétrés**.</span><span class="sxs-lookup"><span data-stu-id="b5ba2-149">Select the **Format to learn parameterized calls** item.</span></span>
3.  <span data-ttu-id="b5ba2-150">Sélectionnez **Concepteur**.</span><span class="sxs-lookup"><span data-stu-id="b5ba2-150">Select **Designer**.</span></span>
4.  <span data-ttu-id="b5ba2-151">Sélectionnez **Développer/Réduire**.</span><span class="sxs-lookup"><span data-stu-id="b5ba2-151">Select **Expand/Collapse**.</span></span>

    <span data-ttu-id="b5ba2-152">Le format de gestion des états électroniques **Format pour apprendre les appels paramétrés** est conçu pour générer une déclaration de taxe au format XML qui présente plusieurs niveaux d’imposition (normale, réduite et aucune).</span><span class="sxs-lookup"><span data-stu-id="b5ba2-152">The **Format to learn parameterized calls** ER format is designed to generate a tax statement in XML format that presents several levels of taxation (regular, reduced, and none).</span></span> <span data-ttu-id="b5ba2-153">Chaque niveau se distingue par un nombre différent de détails.</span><span class="sxs-lookup"><span data-stu-id="b5ba2-153">Each level has a different number of details.</span></span>

    ![Plusieurs niveaux de format ER, Format pour l’apprentissage des appels paramétrés](./media/RCS-AppSpecParms-ReviewFormat.PNG)

5.  <span data-ttu-id="b5ba2-155">Dans l’onglet **Mise en correspondance**, développez **Modèle**, **Données**, et les éléments **Synthèse**.</span><span class="sxs-lookup"><span data-stu-id="b5ba2-155">On the **Mapping** tab, expand the **Model**, **Data**, and **Summary** items.</span></span>

    <span data-ttu-id="b5ba2-156">La source de données **Model.Data.Summary** renvoie la liste des transactions de taxe.</span><span class="sxs-lookup"><span data-stu-id="b5ba2-156">The **Model.Data.Summary** data source returns the list of tax transactions.</span></span> <span data-ttu-id="b5ba2-157">Ces transactions sont répertoriées par code taxe.</span><span class="sxs-lookup"><span data-stu-id="b5ba2-157">These transactions are summarized by tax code.</span></span> <span data-ttu-id="b5ba2-158">Pour cette source de données, le champ calculé **Model.Data.Summary.Level** a été configuré pour renvoyer le code pour le niveau d’imposition de chaque enregistrement résumé.</span><span class="sxs-lookup"><span data-stu-id="b5ba2-158">For this data source, the **Model.Data.Summary.Level** calculated field has been configured to return the code for the taxation level of each summarized record.</span></span> <span data-ttu-id="b5ba2-159">Pour tout code taxe qui peut être récupéré depuis la source de données **Model.Data.Summary** au moment de l’exécution, le champ calculé renvoie le code du niveau d’imposition (**Normale**, **Réduite**, **Aucune** ou **Autre**) comme valeur de texte.</span><span class="sxs-lookup"><span data-stu-id="b5ba2-159">For any tax code that can be retrieved from the **Model.Data.Summary** data source at runtime, the calculated field returns the taxation level code (**Regular**, **Reduced**, **None**, or **Other**) as a text value.</span></span> <span data-ttu-id="b5ba2-160">Le champ calculé **Model.Data.Summary.Level** permet de filtrer les enregistrements de la source de données **Model.Data.Summary** et de saisir les données filtrées dans chaque élément XML qui représente un niveau d’imposition à l’aide des champs **Model.Data2.Level1**, **Model.Data2.Level2** et **Model.Data2.Level3**.</span><span class="sxs-lookup"><span data-stu-id="b5ba2-160">The **Model.Data.Summary.Level** calculated field is used to filter records of the **Model.Data.Summary** data source and enter the filtered data in each XML element that represents a taxation level by using the **Model.Data2.Level1**, **Model.Data2.Level2**, and **Model.Data2.Level3** fields.</span></span>

    ![La liste des transactions de taxe de la source de données Model.Data.Summary](./media/RCS-AppSpecParms-ReviewFormat-Data2Fld.PNG)

    <span data-ttu-id="b5ba2-162">Le champ calculé **Model.Data.Summary.Level** a été configuré de manière à ce que il contienne une expression de gestion des états électroniques.</span><span class="sxs-lookup"><span data-stu-id="b5ba2-162">The **Model.Data.Summary.Level** calculated field has been configured so that it contains an ER expression.</span></span> <span data-ttu-id="b5ba2-163">Les codes taxe (**VAT19**, **InVAT19**, **VAT7**, **InVAT7**, **THIRD** et **InVAT0**) sont codés en dur dans cette configuration.</span><span class="sxs-lookup"><span data-stu-id="b5ba2-163">Tax codes (**VAT19**, **InVAT19**, **VAT7**, **InVAT7**, **THIRD**, and **InVAT0**) are hardcoded into this configuration.</span></span> <span data-ttu-id="b5ba2-164">Par conséquent, ce format de gestion des états électroniques dépend de l’entité juridique où ces codes taxe ont été configurés.</span><span class="sxs-lookup"><span data-stu-id="b5ba2-164">Therefore, this ER format is dependent on the legal entity where these tax codes were configured.</span></span>

    ![Le champ calculé Model.Data.Summary.Level avec des codes taxe codés en dur](./media/RCS-AppSpecParms-ReviewFormat-LevelFld.PNG)

    <span data-ttu-id="b5ba2-166">Pour prendre en charge un ensemble de différents codes taxe pour chaque entité juridique, procédez comme suit :</span><span class="sxs-lookup"><span data-stu-id="b5ba2-166">To support a different set of tax codes for each legal entity, you must follow these steps:</span></span>

    - <span data-ttu-id="b5ba2-167">Créez une version dérivée du format de gestion des états électroniques pour chaque entité juridique.</span><span class="sxs-lookup"><span data-stu-id="b5ba2-167">Create a derived version of the ER format for each legal entity.</span></span>
    - <span data-ttu-id="b5ba2-168">Mettez les codes taxe à jour dans le champ calculé **Model.Data.Summary.Level**, selon le paramètre d’entité juridique.</span><span class="sxs-lookup"><span data-stu-id="b5ba2-168">Update the tax codes in the **Model.Data.Summary.Level** calculated field, based on the legal entity setting.</span></span>

6.  <span data-ttu-id="b5ba2-169">Fermez la page **Concepteur de format**.</span><span class="sxs-lookup"><span data-stu-id="b5ba2-169">Close the **Format designer** page.</span></span>

## <a name="create-a-derived-format"></a><span data-ttu-id="b5ba2-170">Créer un format dérivé</span><span class="sxs-lookup"><span data-stu-id="b5ba2-170">Create a derived format</span></span>

<span data-ttu-id="b5ba2-171">Ensuite, vous utiliserez les paramètres spécifiques à l’application de gestion des états électroniques pour prendre en charge un ensemble différent de codes taxe pour chaque entité juridique dans un format de gestion des états électroniques simple.</span><span class="sxs-lookup"><span data-stu-id="b5ba2-171">Next, you will use the ER application-specific parameters feature to support a different set of tax codes for each legal entity in a single ER format.</span></span>

1.  <span data-ttu-id="b5ba2-172">Dans l’arborescence de configuration, développez les contenus de l’article **Modèle pour apprendre les appels paramétrés**.</span><span class="sxs-lookup"><span data-stu-id="b5ba2-172">In the configuration tree, expand the contents of the **Model to learn parameterized calls** item.</span></span>
2.  <span data-ttu-id="b5ba2-173">Sélectionnez l’article **Format pour apprendre les appels paramétrés**.</span><span class="sxs-lookup"><span data-stu-id="b5ba2-173">Select the **Format to learn parameterized calls** item.</span></span>
3.  <span data-ttu-id="b5ba2-174">Sélectionnez **Créer une configuration**.</span><span class="sxs-lookup"><span data-stu-id="b5ba2-174">Select **Create configuration**.</span></span>
4.  <span data-ttu-id="b5ba2-175">Sélectionnez l’option **Provenant du nom : Format pour apprendre les appels paramétrés, Microsoft**.</span><span class="sxs-lookup"><span data-stu-id="b5ba2-175">Select the **Derive from Name: Format to learn parameterized calls, Microsoft** option.</span></span>
5.  <span data-ttu-id="b5ba2-176">Dans le champ **Nom**, entrez **Format pour apprendre comment rechercher les données LE**.</span><span class="sxs-lookup"><span data-stu-id="b5ba2-176">In the **Name** field, enter **Format to learn how to lookup LE data**.</span></span>
6.  <span data-ttu-id="b5ba2-177">Sélectionnez **Créer une configuration**.</span><span class="sxs-lookup"><span data-stu-id="b5ba2-177">Select **Create configuration**.</span></span>

## <a name="configure-a-derived-format"></a><span data-ttu-id="b5ba2-178">Configurer un format dérivé</span><span class="sxs-lookup"><span data-stu-id="b5ba2-178">Configure a derived format</span></span>

### <a name="add-a-format-enumeration"></a><span data-ttu-id="b5ba2-179">Ajouter une énumération de format</span><span class="sxs-lookup"><span data-stu-id="b5ba2-179">Add a format enumeration</span></span>

<span data-ttu-id="b5ba2-180">Ensuite, vous ajoutez une nouvelle énumération de format de gestion des états électroniques.</span><span class="sxs-lookup"><span data-stu-id="b5ba2-180">Next, you will add a new ER format enumeration.</span></span> <span data-ttu-id="b5ba2-181">Les valeurs de cette énumération de format seront présentées aux utilisateurs professionnels, qui spécifieront les ensembles de codes taxe dépendant de l’entité juridique pour les différents niveaux d’imposition utilisés dans le format de gestion des états électroniques.</span><span class="sxs-lookup"><span data-stu-id="b5ba2-181">The values of this format enumeration will be presented to business users, who will specify legal entity–dependent sets of tax codes for the various taxation levels that are used in the ER format.</span></span>

1.  <span data-ttu-id="b5ba2-182">Sélectionnez **Concepteur**.</span><span class="sxs-lookup"><span data-stu-id="b5ba2-182">Select **Designer**.</span></span>
2.  <span data-ttu-id="b5ba2-183">Sélectionnez **Énumérations de format**.</span><span class="sxs-lookup"><span data-stu-id="b5ba2-183">Select **Format enumerations**.</span></span>
3.  <span data-ttu-id="b5ba2-184">Sélectionnez **Ajouter**.</span><span class="sxs-lookup"><span data-stu-id="b5ba2-184">Select **Add**.</span></span>
4.  <span data-ttu-id="b5ba2-185">Dans le champ **Nom**, entrez **Liste des niveaux d’imposition**.</span><span class="sxs-lookup"><span data-stu-id="b5ba2-185">In the **Name** field, enter **List of taxation levels**.</span></span>
5.  <span data-ttu-id="b5ba2-186">Sélectionnez **Enregistrer**.</span><span class="sxs-lookup"><span data-stu-id="b5ba2-186">Select **Save**.</span></span>
6.  <span data-ttu-id="b5ba2-187">Dans l’onglet **Formater les valeurs d’énumération**, sélectionnez **Ajouter**.</span><span class="sxs-lookup"><span data-stu-id="b5ba2-187">On the **Format enumeration values** tab, select **Add**.</span></span>
7.  <span data-ttu-id="b5ba2-188">Dans le champ **Nom**, entrez **Imposition normale**.</span><span class="sxs-lookup"><span data-stu-id="b5ba2-188">In the **Name** field, enter **Regular taxation**.</span></span>
8.  <span data-ttu-id="b5ba2-189">Sélectionnez à nouveau **Ajouter**.</span><span class="sxs-lookup"><span data-stu-id="b5ba2-189">Select **Add** again.</span></span>
9.  <span data-ttu-id="b5ba2-190">Dans le champ **Nom**, entrez **Imposition réduite**.</span><span class="sxs-lookup"><span data-stu-id="b5ba2-190">In the **Name** field, enter **Reduced taxation**.</span></span>
10. <span data-ttu-id="b5ba2-191">Sélectionnez à nouveau **Ajouter**.</span><span class="sxs-lookup"><span data-stu-id="b5ba2-191">Select **Add** again.</span></span>
11. <span data-ttu-id="b5ba2-192">Dans le champ **Nom**, entrez **Aucune imposition**.</span><span class="sxs-lookup"><span data-stu-id="b5ba2-192">In the **Name** field, enter **No taxation**.</span></span>
12. <span data-ttu-id="b5ba2-193">Sélectionnez à nouveau **Ajouter**.</span><span class="sxs-lookup"><span data-stu-id="b5ba2-193">Select **Add** again.</span></span>
13. <span data-ttu-id="b5ba2-194">Dans le champ **Nom**, entrez **Autre**.</span><span class="sxs-lookup"><span data-stu-id="b5ba2-194">In the **Name** field, enter **Other**.</span></span>

    ![Nouvel enregistrement sur la page Énumérations de format](./media/RCS-AppSpecParms-ConfigureFormat-Enum.PNG)

    <span data-ttu-id="b5ba2-196">Comme les utilisateurs professionnels peuvent utiliser différentes langues pour spécifier les ensembles de codes taxe dépendant de l’entité juridique, nous vous recommandons de traduire les valeurs de cette énumération dans les langues qui sont configurées comme langues préférées pour ces utilisateurs de Finance.</span><span class="sxs-lookup"><span data-stu-id="b5ba2-196">Because the business users might use different languages to specify legal entity–dependent sets of tax codes, we recommend that you translate the values of this enumeration into the languages that are configured as the preferred languages for those users in Finance.</span></span>

14. <span data-ttu-id="b5ba2-197">Sélectionnez l’enregistrement **Aucune imposition**.</span><span class="sxs-lookup"><span data-stu-id="b5ba2-197">Select the **No taxation** record.</span></span>
15. <span data-ttu-id="b5ba2-198">Cliquez sur le champ **Libellé**.</span><span class="sxs-lookup"><span data-stu-id="b5ba2-198">Click in the **Label** field.</span></span>
16. <span data-ttu-id="b5ba2-199">Sélectionnez **Traduire**.</span><span class="sxs-lookup"><span data-stu-id="b5ba2-199">Select **Translate**.</span></span>
17. <span data-ttu-id="b5ba2-200">Dans le volet **Traduction de texte**, dans le champ **ID de libellé**, saisissez **LBL_LEVELENUM_NO**.</span><span class="sxs-lookup"><span data-stu-id="b5ba2-200">In the **Text translation** pane, in the **Label ID** field, enter **LBL_LEVELENUM_NO**.</span></span>
18. <span data-ttu-id="b5ba2-201">Dans le champ **Texte de la langue par défaut**, entrez **Aucune imposition**.</span><span class="sxs-lookup"><span data-stu-id="b5ba2-201">In the **Text in default language** field, enter **No taxation**.</span></span>
19. <span data-ttu-id="b5ba2-202">Dans le champ **Langue**, sélectionnez **DE**.</span><span class="sxs-lookup"><span data-stu-id="b5ba2-202">In the **Language** field, select **DE**.</span></span>
20. <span data-ttu-id="b5ba2-203">Entrez le texte dans le champ **Texte traduit**, saisissez **keine Besteuerung**.</span><span class="sxs-lookup"><span data-stu-id="b5ba2-203">In the **Translated text** field, enter **keine Besteuerung**.</span></span>
21. <span data-ttu-id="b5ba2-204">Sélectionnez **Traduire**.</span><span class="sxs-lookup"><span data-stu-id="b5ba2-204">Select **Translate**.</span></span>

    ![Menu coulissant de traduction de texte](./media/RCS-AppSpecParms-ConfigureFormat-EnumTranslate.PNG)

22. <span data-ttu-id="b5ba2-206">Sélectionnez **Enregistrer**.</span><span class="sxs-lookup"><span data-stu-id="b5ba2-206">Select **Save**.</span></span>
23. <span data-ttu-id="b5ba2-207">Fermez la page **Énumérations de format**.</span><span class="sxs-lookup"><span data-stu-id="b5ba2-207">Close the **Format enumerations** page.</span></span>

### <a name="add-a-new-lookup-data-source"></a><span data-ttu-id="b5ba2-208">Ajouter une nouvelle source de données de recherche</span><span class="sxs-lookup"><span data-stu-id="b5ba2-208">Add a new lookup data source</span></span>

<span data-ttu-id="b5ba2-209">Ensuite, vous ajouterez une nouvelle source de données pour préciser comment les utilisateurs professionnels préciseront des règles selon l’entité juridique pour reconnaître le niveau d’imposition approprié pour chaque enregistrement de transaction résumé.</span><span class="sxs-lookup"><span data-stu-id="b5ba2-209">Next, you will add a new data source to specify how business users will specify legal entity–dependent rules to recognize the correct taxation level for each summarized transaction record.</span></span>

1.  <span data-ttu-id="b5ba2-210">Dans l’onglet **Mise en correspondance**, sélectionnez **Ajouter**.</span><span class="sxs-lookup"><span data-stu-id="b5ba2-210">On the **Mapping** tab, select **Add**.</span></span>
2.  <span data-ttu-id="b5ba2-211">Sélectionnez **Énumération de format\Rechercher**.</span><span class="sxs-lookup"><span data-stu-id="b5ba2-211">Select **Format enumeration\Lookup**.</span></span>

    <span data-ttu-id="b5ba2-212">Vous venez d’identifier que chaque règle que les utilisateurs professionnels spécifient pour la reconnaissance du niveau d’imposition renverra une valeur d’énumération au format de gestion des états électroniques.</span><span class="sxs-lookup"><span data-stu-id="b5ba2-212">You just identified that each rule that business users specify for taxation level recognition will return a value of an ER format enumeration.</span></span> <span data-ttu-id="b5ba2-213">Notez que le type de source de données **Recherche** est accessible sous **Modèle de données** ainsi que sous les blocs **Dynamics 365 for Operations**, en plus du bloc **Énumération de format**.</span><span class="sxs-lookup"><span data-stu-id="b5ba2-213">Notice that the **Lookup** data source type can be accessed under the **Data model** and **Dynamics 365 for Operations** blocks in addition to the **Format enumeration** block.</span></span> <span data-ttu-id="b5ba2-214">Par conséquent, les énumérations de modèle de données de gestion des états électroniques et les énumérations d’application peuvent être utilisées pour spécifier le type de valeurs renvoyées pour les sources de données de ce type.</span><span class="sxs-lookup"><span data-stu-id="b5ba2-214">Therefore, ER data model enumerations and application enumerations can be used to specify the type of values that are returned for data sources of that type.</span></span> <span data-ttu-id="b5ba2-215">Pour en savoir plus sur la source de données de **Recherche**, voir [Configurer les sources de données de Recherche pour utiliser les paramètres spécifiques à la fonction de gestion des états électroniques](er-lookup-data-sources.md).</span><span class="sxs-lookup"><span data-stu-id="b5ba2-215">To learn more about the **Lookup** data sources, see [Configure Lookup data sources to use the ER application-specific parameters feature](er-lookup-data-sources.md).</span></span>
    
3.  <span data-ttu-id="b5ba2-216">Dans le champ **Nom**, entrez **Sélecteur**.</span><span class="sxs-lookup"><span data-stu-id="b5ba2-216">In the **Name** field, enter **Selector**.</span></span>
4.  <span data-ttu-id="b5ba2-217">Dans le champ **Énumération de format**, sélectionnez **Liste des niveaux d’imposition**.</span><span class="sxs-lookup"><span data-stu-id="b5ba2-217">In the **Format enumeration** field, select **List of taxation levels**.</span></span>

    <span data-ttu-id="b5ba2-218">Vous avez spécifié que, pour chaque règle qui est spécifiée dans cette source de données, un utilisateur professionnel doit sélectionner une des valeurs de l’énumération de format **Liste des niveaux d’imposition** comme une valeur retournée.</span><span class="sxs-lookup"><span data-stu-id="b5ba2-218">You specified that, for each rule that is specified in this data source, a business user must select one of the values of the **List of taxation levels** format enumeration as a returned value.</span></span>
    
5.  <span data-ttu-id="b5ba2-219">Sélectionnez **Modifier la recherche**.</span><span class="sxs-lookup"><span data-stu-id="b5ba2-219">Select **Edit lookup**.</span></span>
6.  <span data-ttu-id="b5ba2-220">Sélectionnez **Colonnes**.</span><span class="sxs-lookup"><span data-stu-id="b5ba2-220">Select **Columns**.</span></span>
7.  <span data-ttu-id="b5ba2-221">Développez l’article **Modèle**.</span><span class="sxs-lookup"><span data-stu-id="b5ba2-221">Expand the **Model** item.</span></span>
8.  <span data-ttu-id="b5ba2-222">Développez l’article **Données**.</span><span class="sxs-lookup"><span data-stu-id="b5ba2-222">Expand the **Data** item.</span></span>
9.  <span data-ttu-id="b5ba2-223">Développez l’article **Taxe**.</span><span class="sxs-lookup"><span data-stu-id="b5ba2-223">Expand the **Tax** item.</span></span>
10. <span data-ttu-id="b5ba2-224">Sélectionnez l’article **Model.Data.Tax.Code**.</span><span class="sxs-lookup"><span data-stu-id="b5ba2-224">Select the **Model.Data.Tax.Code** item.</span></span>
11. <span data-ttu-id="b5ba2-225">Sélectionnez le bouton **Ajouter** (la flèche droite).</span><span class="sxs-lookup"><span data-stu-id="b5ba2-225">Select the **Add** button (the right arrow).</span></span>

    ![Menu coulissant de colonnes](./media/RCS-AppSpecParms-ConfigureFormat-Lookup1.PNG)

    <span data-ttu-id="b5ba2-227">Vous venez de spécifier que, pour chaque règle qui est spécifiée dans cette source de données pour identifier le niveau d’imposition, un utilisateur professionnel doit sélectionner une des valeurs de l’énumération de format comme condition.</span><span class="sxs-lookup"><span data-stu-id="b5ba2-227">You just specified that, for each rule that is specified in this data source for taxation level recognition, a business user must select one of the tax codes as a condition.</span></span> <span data-ttu-id="b5ba2-228">La liste des codes taxe que l’utilisateur professionnel peut sélectionner sera renvoyée par la source de données **Model.Data.Tax**.</span><span class="sxs-lookup"><span data-stu-id="b5ba2-228">The list of tax codes that the business user can select will be returned by the **Model.Data.Tax** data source.</span></span> <span data-ttu-id="b5ba2-229">Parce que cette source de données contient le champ **Nom**, le nom du code taxe est affiché pour chaque valeur de code taxe dans la recherche qui est présentée à l’utilisateur professionnel.</span><span class="sxs-lookup"><span data-stu-id="b5ba2-229">Because this data source contains the **Name** field, the name of the tax code will be shown for each tax code value in the lookup that is presented to the business user.</span></span>
    
12. <span data-ttu-id="b5ba2-230">Cliquez sur **OK**.</span><span class="sxs-lookup"><span data-stu-id="b5ba2-230">Select **OK**.</span></span>

    ![Page du concepteur de recherche](./media/RCS-AppSpecParms-ConfigureFormat-Lookup2.PNG)

    <span data-ttu-id="b5ba2-232">Les utilisateurs professionnels peuvent ajouter plusieurs règles en tant qu’enregistrements de cette source de données.</span><span class="sxs-lookup"><span data-stu-id="b5ba2-232">Business users can add multiple rules as records of this data source.</span></span> <span data-ttu-id="b5ba2-233">Chaque enregistrement sera calculé par un code de ligne.</span><span class="sxs-lookup"><span data-stu-id="b5ba2-233">Each record will be numbered by a line code.</span></span> <span data-ttu-id="b5ba2-234">Les règles seront évaluées afin d’augmenter le numéro de ligne.</span><span class="sxs-lookup"><span data-stu-id="b5ba2-234">Rules will be evaluated in order of increasing line number.</span></span>

    <span data-ttu-id="b5ba2-235">Comme vous avez sélectionné le champ **Code taxe** comme condition pour les règles de cette source de données de recherche, et parce que le champ **Code taxe** est paramétré comme champ de type de données **Chaîne**, chaque règle sera évaluée au moment de l’exécution en comparant le code taxe transmis à la source de données au code taxe défini dans cet enregistrement de la source de données.</span><span class="sxs-lookup"><span data-stu-id="b5ba2-235">Because you selected the **Tax code** field as a condition for rules in this lookup data source, and because **Tax code** is set up as a field of the **String** data type, each rule will be evaluated at runtime by comparing the tax code that is passed to the data source with the tax code that is defined in this record of the data source.</span></span>

    <span data-ttu-id="b5ba2-236">Lorsqu’une règle qui répond à la condition configurée est détectée, cette source de données renvoie la valeur de recherche de la règle définie dans le champ **Résultat de la recherche**.</span><span class="sxs-lookup"><span data-stu-id="b5ba2-236">When a rule that satisfies the configured condition is found, this data source returns the lookup value of the rule that is defined in the **Lookup result** field.</span></span> <span data-ttu-id="b5ba2-237">Si aucune règle n’est détectée, une exception est levée pour informer l’utilisateur que la source de données actuelle ne peut pas renvoyer une valeur appropriée.</span><span class="sxs-lookup"><span data-stu-id="b5ba2-237">If no rule is found, an exception is thrown to notify the user that the current data source can't return a correct value.</span></span>

13. <span data-ttu-id="b5ba2-238">Sélectionnez **Enregistrer**.</span><span class="sxs-lookup"><span data-stu-id="b5ba2-238">Select **Save**.</span></span>
14. <span data-ttu-id="b5ba2-239">Fermez la page **Concepteur de recherche**.</span><span class="sxs-lookup"><span data-stu-id="b5ba2-239">Close the **Lookup designer** page.</span></span>
15. <span data-ttu-id="b5ba2-240">Cliquez sur **OK**.</span><span class="sxs-lookup"><span data-stu-id="b5ba2-240">Select **OK**.</span></span>

    <span data-ttu-id="b5ba2-241">Notez que vous avez ajouté une nouvelle source de données qui renvoie le niveau d’imposition comme valeur de l’énumération de format **Liste des niveaux d’imposition** pour tout code taxe transmis à la source de données comme argument du paramètre **Code** du type de données **Chaîne**.</span><span class="sxs-lookup"><span data-stu-id="b5ba2-241">Notice that you added a new data source that will return the taxation level as the value of the **List of taxation levels** format enumeration for any tax code that is passed to the data source as the argument of the **Code** parameter of the **String** data type.</span></span>
    
    ![Page du concepteur de format avec une nouvelle source de données](./media/RCS-AppSpecParms-ConfigureFormat-SelectorFld.PNG)

    <span data-ttu-id="b5ba2-243">L’évaluation des règles configurées dépend du type de données des champs sélectionnés pour définir les conditions de ces règles.</span><span class="sxs-lookup"><span data-stu-id="b5ba2-243">The evaluation of configured rules depends on the data type of the fields that have been selected to define conditions of those rules.</span></span> <span data-ttu-id="b5ba2-244">Lorsque vous sélectionnez un champ qui est configuré comme un champ de type **Numérique** ou **Date**, les critères différeront des critères qui ont été décrits plus tôt pour le type de données **Chaîne**.</span><span class="sxs-lookup"><span data-stu-id="b5ba2-244">When you select a field that is configured as a field of either the **Numeric** or **Date** data type, the criteria will differ from the criteria that were described earlier for the **String** data type.</span></span> <span data-ttu-id="b5ba2-245">Pour les champs **Numérique** et **Date**, la règle doit être spécifiée comme plage de valeurs.</span><span class="sxs-lookup"><span data-stu-id="b5ba2-245">For **Numeric** and **Date** fields, the rule must be specified as a range of values.</span></span> <span data-ttu-id="b5ba2-246">La condition de la règle sera alors considérée remplie lorsqu’une valeur transmise à la source de données est comprise dans la plage de configuration.</span><span class="sxs-lookup"><span data-stu-id="b5ba2-246">The condition of the rule will then be considered satisfied when a value that is passed to the data source is in the configured range.</span></span>
    
    <span data-ttu-id="b5ba2-247">L’illustration suivante montre un exemple de ce type de configuration.</span><span class="sxs-lookup"><span data-stu-id="b5ba2-247">The following illustration shows an example of this type of setup.</span></span> <span data-ttu-id="b5ba2-248">Outre le champ **Model.Data.Tax.Code** du type de données **Chaîne**, le champ **Model.Tax.Summary.Base** du type de données **Réel** permet de spécifier des conditions pour une source de données de recherche.</span><span class="sxs-lookup"><span data-stu-id="b5ba2-248">In addition to the **Model.Data.Tax.Code** field of the **String** data type, the **Model.Tax.Summary.Base** field of the **Real** data type is used to specify conditions for a lookup data source.</span></span>
    
    ![Page du concepteur de recherche avec des colonnes supplémentaires](./media/RCS-AppSpecParms-ConfigureFormat-SelectorFld2.PNG)

    <span data-ttu-id="b5ba2-250">Parce que les champs **Model.Data.Tax.Code** et **Model.Tax.Summary.Base** sont sélectionnés pour cette source de données de recherche, chaque règle de cette source de données est configurée de la façon suivante :</span><span class="sxs-lookup"><span data-stu-id="b5ba2-250">Because the **Model.Data.Tax.Code** and **Model.Tax.Summary.Base** fields are selected for this lookup data source, each rule of this data source will be configured in the following way:</span></span>
    
    -   <span data-ttu-id="b5ba2-251">Dans la liste qui s’affiche, la valeur de l’énumération de format **Liste des niveaux d’imposition** doit être sélectionnée comme valeur renvoyée.</span><span class="sxs-lookup"><span data-stu-id="b5ba2-251">In the list that is presented, the value of the **List of taxation levels** format enumeration must be selected as a returned value.</span></span>
    -   <span data-ttu-id="b5ba2-252">Un code taxe doit être entré comme condition de cette règle.</span><span class="sxs-lookup"><span data-stu-id="b5ba2-252">The tax code must be entered as a condition of this rule.</span></span> <span data-ttu-id="b5ba2-253">Seuls les codes taxe indiqués par la source de données **Model.Data.Tax** s’appliquent.</span><span class="sxs-lookup"><span data-stu-id="b5ba2-253">Only tax codes that are provided by the **Model.Data.Tax** data source are applicable.</span></span>
    -   <span data-ttu-id="b5ba2-254">Les valeurs minimale et maximale du montant de base de taxe doivent être entrées comme des conditions de cette règle.</span><span class="sxs-lookup"><span data-stu-id="b5ba2-254">Minimum and maximum values of the tax base amount must be entered as conditions of this rule.</span></span>

    <span data-ttu-id="b5ba2-255">Voici la manière dont chaque règle de cette source de données est évaluée au moment de l’exécution :</span><span class="sxs-lookup"><span data-stu-id="b5ba2-255">Here is how each rule of this data source will be evaluated at runtime:</span></span>
    -   <span data-ttu-id="b5ba2-256">Le code du type de données **Chaîne** qui a été transmis à cette source de données est-il égal au code taxe d’une règle ?</span><span class="sxs-lookup"><span data-stu-id="b5ba2-256">Does the code of the **String** data type that was passed to this data source equal the tax code of a rule?</span></span>
    -   <span data-ttu-id="b5ba2-257">La valeur du type de données **Réel** transmise à cette source de données tombe-t-elle dans la plage de valeurs minimale et maximale spécifiques ?</span><span class="sxs-lookup"><span data-stu-id="b5ba2-257">Does the value of the **Real** data type that was passed to this data source fall between specific minimum and maximum values?</span></span>

    <span data-ttu-id="b5ba2-258">Une règle sera considérée comme applicable lorsque les deux conditions seront satisfaites.</span><span class="sxs-lookup"><span data-stu-id="b5ba2-258">A rule will be considered applicable when both conditions are satisfied.</span></span>

### <a name="translate-the-label-of-the-lookup-data-source-that-was-added"></a><span data-ttu-id="b5ba2-259">Traduire le libellé de la source de données de recherche qui a été ajouté</span><span class="sxs-lookup"><span data-stu-id="b5ba2-259">Translate the label of the lookup data source that was added</span></span>

<span data-ttu-id="b5ba2-260">Comme les utilisateurs professionnels peuvent utiliser différentes langues pour spécifier les ensembles de codes taxe dépendant de l’entité juridique, nous vous recommandons de traduire le libellé de toute source de données de recherche que vous ajoutez, de telle sorte qu’il soit présenté dans chaque langue préférée de l’utilisateur sur la page correspondante.</span><span class="sxs-lookup"><span data-stu-id="b5ba2-260">Because business users might use different languages to specify legal entity–dependent sets of tax codes, we recommend that you translate the label of any lookup data source that you add, so that it's presented in each user's preferred language on the corresponding page.</span></span>

1.  <span data-ttu-id="b5ba2-261">Sélectionnez la source de données **Model.Data.Selector**.</span><span class="sxs-lookup"><span data-stu-id="b5ba2-261">Select the **Model.Data.Selector** data source.</span></span>
2.  <span data-ttu-id="b5ba2-262">Sélectionnez **Modifier**.</span><span class="sxs-lookup"><span data-stu-id="b5ba2-262">Select **Edit**.</span></span>
3.  <span data-ttu-id="b5ba2-263">Cliquez sur le champ **Libellé**.</span><span class="sxs-lookup"><span data-stu-id="b5ba2-263">Click in the **Label** field.</span></span>
4.  <span data-ttu-id="b5ba2-264">Sélectionnez **Traduire**.</span><span class="sxs-lookup"><span data-stu-id="b5ba2-264">Select **Translate**.</span></span>
5.  <span data-ttu-id="b5ba2-265">Dans le volet **Traduction de texte**, dans le champ **ID de libellé**, saisissez **LBL_SELECTOR_DS**.</span><span class="sxs-lookup"><span data-stu-id="b5ba2-265">In the **Text translation** pane, in the **Label ID** field, enter **LBL_SELECTOR_DS**.</span></span>
6.  <span data-ttu-id="b5ba2-266">Dans le champ **Texte de la langue par défaut**, entrez **Sélectionner le niveau d’imposition par code taxe**.</span><span class="sxs-lookup"><span data-stu-id="b5ba2-266">In the **Text in default language** field, enter **Select tax level by tax code**.</span></span>
7.  <span data-ttu-id="b5ba2-267">Dans le champ **Langue**, sélectionnez **DE**.</span><span class="sxs-lookup"><span data-stu-id="b5ba2-267">In the **Language** field, select **DE**.</span></span>
8.  <span data-ttu-id="b5ba2-268">Dans le champ **Texte traduit**, entrez **Steuerebene für Steuerkennzeichen auswählen**.</span><span class="sxs-lookup"><span data-stu-id="b5ba2-268">In the **Translated text** field, enter **Steuerebene für Steuerkennzeichen auswählen**.</span></span>
9.  <span data-ttu-id="b5ba2-269">Sélectionnez **Traduire**.</span><span class="sxs-lookup"><span data-stu-id="b5ba2-269">Select **Translate**.</span></span>
10. <span data-ttu-id="b5ba2-270">Cliquez sur **OK**.</span><span class="sxs-lookup"><span data-stu-id="b5ba2-270">Select **OK**.</span></span>

    ![Menu coulissant de propriétés de la source de données](./media/RCS-AppSpecParms-ConfigureFormat-SelectorFldTranslate.PNG)

### <a name="add-a-new-field-to-consume-the-configured-lookup"></a><span data-ttu-id="b5ba2-272">Ajouter un nouveau champ pour utiliser la recherche configurée</span><span class="sxs-lookup"><span data-stu-id="b5ba2-272">Add a new field to consume the configured lookup</span></span>

1.  <span data-ttu-id="b5ba2-273">Développez l’article **Modèle.Data**.</span><span class="sxs-lookup"><span data-stu-id="b5ba2-273">Expand the **Model.Data** item.</span></span>
2.  <span data-ttu-id="b5ba2-274">Sélectionnez l’article **Model.Data.Summary**.</span><span class="sxs-lookup"><span data-stu-id="b5ba2-274">Select the **Model.Data.Summary** item.</span></span>
3.  <span data-ttu-id="b5ba2-275">Sélectionnez **Ajouter**.</span><span class="sxs-lookup"><span data-stu-id="b5ba2-275">Select **Add**.</span></span>
4.  <span data-ttu-id="b5ba2-276">Sélectionnez **Fonctions/Champ calculé**.</span><span class="sxs-lookup"><span data-stu-id="b5ba2-276">Select **Functions/Calculated field**.</span></span>
5.  <span data-ttu-id="b5ba2-277">Dans le champ **Nom**, entrez **LevelByLookup**.</span><span class="sxs-lookup"><span data-stu-id="b5ba2-277">In the **Name** field, enter **LevelByLookup**.</span></span>
6.  <span data-ttu-id="b5ba2-278">Sélectionnez **Modifier la formule**.</span><span class="sxs-lookup"><span data-stu-id="b5ba2-278">Select **Edit formula**.</span></span>
7.  <span data-ttu-id="b5ba2-279">Dans le **champ Formule**, entrez **Model.Selector(Model.Data.Summary.Code)**.</span><span class="sxs-lookup"><span data-stu-id="b5ba2-279">In the **Formula field**, enter **Model.Selector(Model.Data.Summary.Code)**.</span></span>
8.  <span data-ttu-id="b5ba2-280">Sélectionnez **Enregistrer**.</span><span class="sxs-lookup"><span data-stu-id="b5ba2-280">Select **Save**.</span></span>

    ![Ajout de Model.Selector (Model.Data.Summary.Code) à la page Concepteur de formule](./media/RCS-AppSpecParms-ConfigureFormat-AddLevelByLookupFld.PNG)

9.  <span data-ttu-id="b5ba2-282">Fermez la page **Éditeur de formule**.</span><span class="sxs-lookup"><span data-stu-id="b5ba2-282">Close the **Formula editor** page.</span></span>
10. <span data-ttu-id="b5ba2-283">Cliquez sur **OK**.</span><span class="sxs-lookup"><span data-stu-id="b5ba2-283">Select **OK**.</span></span>

    ![Page du concepteur de format avec une nouvelle formule ajoutée](./media/RCS-AppSpecParms-ConfigureFormat-AddLevelByLookupFld2.PNG)

    <span data-ttu-id="b5ba2-285&quot;>Notez que le champ calculé **LevelByLookup** que vous avez ajouté renverra le niveau d’imposition comme valeur de l’énumération de format **Liste des niveaux d’imposition** pour chaque enregistrement résumé des transactions de taxe.</span><span class=&quot;sxs-lookup&quot;><span data-stu-id=&quot;b5ba2-285&quot;>Notice that the **LevelByLookup** calculated field that you added will return the taxation level as the value of the **List of taxation levels** format enumeration for each summarized tax transactions record.</span></span> <span data-ttu-id=&quot;b5ba2-286&quot;>Le code taxe de l’enregistrement sera transmis à la source de données de recherche **Model.Selector**, ainsi que l’ensemble de règles pour cette source de données sera utilisé pour sélectionner le niveau d’imposition approprié.</span><span class=&quot;sxs-lookup&quot;><span data-stu-id=&quot;b5ba2-286&quot;>The tax code of the record will be passed to the **Model.Selector** lookup data source, and the set of rules for this data source will be used to select the correct taxation level.</span></span>

### <a name=&quot;add-a-new-format-enumeration-based-data-source&quot;></a><span data-ttu-id=&quot;b5ba2-287&quot;>Ajouter une nouvelle source de données basée sur l’énumération de format</span><span class=&quot;sxs-lookup&quot;><span data-stu-id=&quot;b5ba2-287&quot;>Add a new format enumeration-based data source</span></span>

<span data-ttu-id=&quot;b5ba2-288&quot;>Ensuite, vous ajouterez une nouvelle source de données qui fait référence à l’énumération de format que vous avez entrée précédemment.</span><span class=&quot;sxs-lookup&quot;><span data-stu-id=&quot;b5ba2-288&quot;>Next, you will add a new data source that refers to the format enumeration that you added earlier.</span></span> <span data-ttu-id=&quot;b5ba2-289&quot;>Les valeurs de cette source de données seront utilisées dans une expression de format de gestion des états électroniques ultérieurement.</span><span class=&quot;sxs-lookup&quot;><span data-stu-id=&quot;b5ba2-289&quot;>Values of this data source will be used in an ER format expression later.</span></span>

1.  <span data-ttu-id=&quot;b5ba2-290&quot;>Sélectionnez **Ajoutez racine**.</span><span class=&quot;sxs-lookup&quot;><span data-stu-id=&quot;b5ba2-290&quot;>Select **Add root**.</span></span>
2.  <span data-ttu-id=&quot;b5ba2-291&quot;>Sélectionnez **Énumérations de format\Énumération**.</span><span class=&quot;sxs-lookup&quot;><span data-stu-id=&quot;b5ba2-291&quot;>Select **Format enumerations\Enumeration**.</span></span>
3.  <span data-ttu-id=&quot;b5ba2-292&quot;>Dans le champ **Nom**, entrez **TaxationLevel**.</span><span class=&quot;sxs-lookup&quot;><span data-stu-id=&quot;b5ba2-292&quot;>In the **Name** field, enter **TaxationLevel**.</span></span>
4.  <span data-ttu-id=&quot;b5ba2-293&quot;>Dans le champ **Énumération de format**, sélectionnez **Liste des niveaux d’imposition**.</span><span class=&quot;sxs-lookup&quot;><span data-stu-id=&quot;b5ba2-293&quot;>In the **Format enumeration** field, select **List of taxation levels**.</span></span>
5.  <span data-ttu-id=&quot;b5ba2-294&quot;>Sélectionnez **Enregistrer**.</span><span class=&quot;sxs-lookup&quot;><span data-stu-id=&quot;b5ba2-294&quot;>Select **Save**.</span></span>

### <a name=&quot;modify-an-existing-field-to-start-to-use-the-lookup&quot;></a><span data-ttu-id=&quot;b5ba2-295&quot;>Modifier un champ existant pour commencer à utiliser la recherche</span><span class=&quot;sxs-lookup&quot;><span data-stu-id=&quot;b5ba2-295&quot;>Modify an existing field to start to use the lookup</span></span>

<span data-ttu-id=&quot;b5ba2-296&quot;>Ensuite, vous modifierez le champ calculé existant afin qu’il utilise la source de données de recherche configurée pour qu’elle renvoie la bonne valeur de niveau d’imposition, selon le code taxe.</span><span class=&quot;sxs-lookup&quot;><span data-stu-id=&quot;b5ba2-296&quot;>Next, you will modify the existing calculated field so that it uses the configured lookup data source to return the correct taxation level value, depending on the tax code.</span></span>

1.  <span data-ttu-id=&quot;b5ba2-297&quot;>Sélectionnez l’article **Model.Data.Summary.Level**.</span><span class=&quot;sxs-lookup&quot;><span data-stu-id=&quot;b5ba2-297&quot;>Select the **Model.Data.Summary.Level** item.</span></span>
2.  <span data-ttu-id=&quot;b5ba2-298&quot;>Sélectionnez **Modifier**.</span><span class=&quot;sxs-lookup&quot;><span data-stu-id=&quot;b5ba2-298&quot;>Select **Edit**.</span></span>
3.  <span data-ttu-id=&quot;b5ba2-299&quot;>Sélectionnez **Modifier la formule**.</span><span class=&quot;sxs-lookup&quot;><span data-stu-id=&quot;b5ba2-299&quot;>Select **Edit formula**.</span></span>

    <span data-ttu-id=&quot;b5ba2-300&quot;>Notez que l’expression actuelle du champ **Model.Data.Summary.Level** inclut les codes taxe codés en dur suivants :</span><span class=&quot;sxs-lookup&quot;><span data-stu-id=&quot;b5ba2-300&quot;>Notice that the current expression of the **Model.Data.Summary.Level** field includes the following hard-coded tax codes:</span></span>
    
    <span data-ttu-id=&quot;b5ba2-301&quot;>CASE (@.Code, &quot;VAT19&quot;, &quot;Regular&quot;, &quot;InVAT19&quot;, &quot;Regular&quot;, &quot;VAT7&quot;, &quot;Reduced&quot;, &quot;InVAT7&quot;, &quot;Reduced&quot;, &quot;THIRD&quot;, &quot;None&quot;, &quot;InVAT0&quot;, &quot;None&quot;, &quot;Other")</span><span class="sxs-lookup"><span data-stu-id="b5ba2-301">CASE (@.Code, "VAT19", "Regular", "InVAT19", "Regular", "VAT7", "Reduced", "InVAT7", "Reduced", "THIRD", "None", "InVAT0", "None", "Other")</span></span>

4.  <span data-ttu-id="b5ba2-302">Dans le champ **Formule**, saisissez **CASE(@.LevelByLookup, TaxationLevel.’Regular taxation’, "Regular", TaxationLevel.’Reduced taxation’, "Reduced", TaxationLevel.’No taxation’, "None", "Other")**.</span><span class="sxs-lookup"><span data-stu-id="b5ba2-302">In the **Formula** field, enter **CASE(@.LevelByLookup, TaxationLevel.'Regular taxation', "Regular", TaxationLevel.'Reduced taxation', "Reduced", TaxationLevel.'No taxation', "None", "Other")**.</span></span>

    ![Page Concepteur d’opération de gestion des états électroniques](./media/RCS-AppSpecParms-ConfigureFormat-ChangeLookupFld.PNG)
    
    <span data-ttu-id="b5ba2-304">Notez que l’expression du champ **Model.Data.Summary.Level** renvoie à présent le niveau d’imposition, selon le code taxe de l’enregistrement actuel et l’ensemble des règles que l’utilisateur professionnel configure dans la source de données de recherche **Model.Data.Selector**.</span><span class="sxs-lookup"><span data-stu-id="b5ba2-304">Notice that the expression of the **Model.Data.Summary.Level** field will now return the taxation level, based on the tax code of the current record and the set of rules that a business user configures in the **Model.Data.Selector** lookup data source.</span></span>
    
5.  <span data-ttu-id="b5ba2-305">Sélectionnez **Enregistrer**.</span><span class="sxs-lookup"><span data-stu-id="b5ba2-305">Select **Save**.</span></span>
6.  <span data-ttu-id="b5ba2-306">Fermez la page **Concepteur de formule**.</span><span class="sxs-lookup"><span data-stu-id="b5ba2-306">Close **Formula designer** page.</span></span>
7.  <span data-ttu-id="b5ba2-307">Cliquez sur **OK**.</span><span class="sxs-lookup"><span data-stu-id="b5ba2-307">Select **OK**.</span></span>
8.  <span data-ttu-id="b5ba2-308">Sélectionnez **Enregistrer**.</span><span class="sxs-lookup"><span data-stu-id="b5ba2-308">Select **Save**.</span></span>
9.  <span data-ttu-id="b5ba2-309">Fermez la page **Concepteur de formats**.</span><span class="sxs-lookup"><span data-stu-id="b5ba2-309">Close **Format designer** page.</span></span>

## <a name="complete-the-draft-version-of-a-derived-format"></a><span data-ttu-id="b5ba2-310">Terminer la version brouillon d’un format dérivé</span><span class="sxs-lookup"><span data-stu-id="b5ba2-310">Complete the draft version of a derived format</span></span>

1.  <span data-ttu-id="b5ba2-311">Dans le raccourci **Versions**, sélectionnez **Modifier le statut**.</span><span class="sxs-lookup"><span data-stu-id="b5ba2-311">On the **Versions** FastTab, select **Change status**.</span></span>
2.  <span data-ttu-id="b5ba2-312">Sélectionnez **Terminer**.</span><span class="sxs-lookup"><span data-stu-id="b5ba2-312">Select **Complete**.</span></span>
3.  <span data-ttu-id="b5ba2-313">Cliquez sur **OK**.</span><span class="sxs-lookup"><span data-stu-id="b5ba2-313">Select **OK**.</span></span>

## <a name="export-completed-version-of-modified-format"></a><span data-ttu-id="b5ba2-314">Exporter la version terminée d’un format modifié</span><span class="sxs-lookup"><span data-stu-id="b5ba2-314">Export completed version of modified format</span></span>

1.  <span data-ttu-id="b5ba2-315">Dans l’arborescence des configurations, sélectionnez l’élément **Format pour apprendre comment rechercher les données LE**.</span><span class="sxs-lookup"><span data-stu-id="b5ba2-315">In the configuration tree, select the **Format to learn how to look up LE data** item.</span></span>
2.  <span data-ttu-id="b5ba2-316">Dans le raccourci **Versions**, sélectionnez l’enregistrement ayant un statut **Terminé**.</span><span class="sxs-lookup"><span data-stu-id="b5ba2-316">On the **Versions** FastTab, select the record that has a status of **Completed**.</span></span>
3.  <span data-ttu-id="b5ba2-317">Sélectionnez **Exchange**.</span><span class="sxs-lookup"><span data-stu-id="b5ba2-317">Select **Exchange**.</span></span>
4.  <span data-ttu-id="b5ba2-318">Sélectionnez **Exporter en tant que fichier XML**.</span><span class="sxs-lookup"><span data-stu-id="b5ba2-318">Select **Export as XML file**.</span></span>
5.  <span data-ttu-id="b5ba2-319">Cliquez sur **OK**.</span><span class="sxs-lookup"><span data-stu-id="b5ba2-319">Select **OK**.</span></span>
6.  <span data-ttu-id="b5ba2-320">Le navigateur Web télécharge un fichier **Format pour apprendre comment rechercher le fichier LE data.xml**.</span><span class="sxs-lookup"><span data-stu-id="b5ba2-320">The web browser downloads a **Format to learn how to look up LE data.xml** file.</span></span> <span data-ttu-id="b5ba2-321">Enregistrez ce fichier localement.</span><span class="sxs-lookup"><span data-stu-id="b5ba2-321">Store this file locally.</span></span>

<span data-ttu-id="b5ba2-322">Répétez les étapes de cette section pour les articles parents du format **Format pour apprendre comment rechercher les données LE**, et enregistrez les fichiers suivants localement :</span><span class="sxs-lookup"><span data-stu-id="b5ba2-322">Repeat steps in this section for parent items of the **Format to learn how to look up LE data** format, and store the following files locally:</span></span>

-   <span data-ttu-id="b5ba2-323">Format pour apprendre les appels paramétrés.xml</span><span class="sxs-lookup"><span data-stu-id="b5ba2-323">Format to learn parameterized calls.xml</span></span>
-   <span data-ttu-id="b5ba2-324">Mise en correspondance pour apprendre les appels paramétrés.xml</span><span class="sxs-lookup"><span data-stu-id="b5ba2-324">Mapping to learn parameterized calls.xml</span></span>
-   <span data-ttu-id="b5ba2-325">Modèle pour apprendre les appels paramétrés.xml</span><span class="sxs-lookup"><span data-stu-id="b5ba2-325">Model to learn parameterized calls.xml</span></span>

<span data-ttu-id="b5ba2-326">Pour savoir comment utiliser le format de gestion des états électroniques **Format pour apprendre comment rechercher les données LE** configuré pour paramétrer les ensembles de codes taxe selon l’entité juridique pour filtrer les transactions en fonction des différents niveaux d’imposition, procédez comme suit dans la rubrique [Configurer les paramètres d’un format de gestion des états électroniques par entité juridique](er-app-specific-parameters-set-up.md).</span><span class="sxs-lookup"><span data-stu-id="b5ba2-326">To learn how to use the configured **Format to learn how to look up LE data** ER format to set up legal entity–dependent sets of tax codes to filter tax transactions by different taxation levels, complete the steps in the [Set up the parameters of an ER format per legal entity](er-app-specific-parameters-set-up.md) topic.</span></span>

## <a name="additional-resources"></a><span data-ttu-id="b5ba2-327">Ressources supplémentaires</span><span class="sxs-lookup"><span data-stu-id="b5ba2-327">Additional resources</span></span>

[<span data-ttu-id="b5ba2-328">Concepteur de formule dans la gestion des états électroniques</span><span class="sxs-lookup"><span data-stu-id="b5ba2-328">Formula designer in Electronic reporting</span></span>](general-electronic-reporting-formula-designer.md)

[<span data-ttu-id="b5ba2-329">Définir les paramètres d’un format de gestion des états électroniques par entité juridique</span><span class="sxs-lookup"><span data-stu-id="b5ba2-329">Set up the parameters of an ER format per legal entity</span></span>](er-app-specific-parameters-set-up.md)

[<span data-ttu-id="b5ba2-330">Configurer les sources de données de Recherche pour utiliser les paramètres spécifiques à la fonction de gestion des états électroniques</span><span class="sxs-lookup"><span data-stu-id="b5ba2-330">Configure Lookup data sources to use the ER application-specific parameters feature</span></span>](er-lookup-data-sources.md)


[!INCLUDE[footer-include](../../../includes/footer-banner.md)]
