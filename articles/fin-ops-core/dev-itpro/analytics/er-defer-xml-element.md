---
title: Différer l'exécution des éléments XML aux formats ER
description: Cette rubrique explique comment reporter l'exécution d'un élément XML au format d'état électronique (ER).
author: NickSelin
manager: kfend
ms.date: 03/17/2020
ms.topic: article
ms.prod: ''
ms.service: dynamics-ax-platform
ms.technology: ''
ms.search.form: EROperationDesigner
audience: Application User, IT Pro
ms.reviewer: kfend
ms.search.scope: Core, Operations
ms.custom: 58771
ms.assetid: ''
ms.search.region: Global
ms.author: nselin
ms.search.validFrom: 2020-01-01
ms.dyn365.ops.version: AX 10.0.9
ms.openlocfilehash: 58381f491cda199d77e555e5d3da04714b6a5f8f
ms.sourcegitcommit: b92c3e1b3403d0455fc4e0bf9132d6bc0d7aba5e
ms.translationtype: HT
ms.contentlocale: fr-FR
ms.lasthandoff: 03/18/2020
ms.locfileid: "3138921"
---
# <a name="defer-the-execution-of-xml-elements-in-er-formats"></a><span data-ttu-id="7ea17-103">Différer l'exécution des éléments XML aux formats ER</span><span class="sxs-lookup"><span data-stu-id="7ea17-103">Defer the execution of XML elements in ER formats</span></span>

[!include [banner](../includes/banner.md)]

## <a name="overview"></a><span data-ttu-id="7ea17-104">Vue d'ensemble</span><span class="sxs-lookup"><span data-stu-id="7ea17-104">Overview</span></span>

<span data-ttu-id="7ea17-105">Vous pouvez utiliser le concepteur des opérations du cadre [États électroniques (ER)](general-electronic-reporting.md) pour [configurer](./tasks/er-format-configuration-2016-11.md) le [composant de format](general-electronic-reporting.md#FormatComponentOutbound) d'une solution ER utilisée pour générer des documents sortants au format XML.</span><span class="sxs-lookup"><span data-stu-id="7ea17-105">You can use the Operations designer of the [Electronic reporting (ER)](general-electronic-reporting.md) framework to [configure](./tasks/er-format-configuration-2016-11.md) the [format component](general-electronic-reporting.md#FormatComponentOutbound) of an ER solution that is used to generate outbound documents in XML format.</span></span> <span data-ttu-id="7ea17-106">La structure hiérarchique du composant de format configuré se compose d'éléments de format de différents types.</span><span class="sxs-lookup"><span data-stu-id="7ea17-106">The hierarchical structure of the configured format component consists of format elements of various types.</span></span> <span data-ttu-id="7ea17-107">Ces éléments de format sont utilisés pour remplir les documents générés avec les informations requises lors de l'exécution.</span><span class="sxs-lookup"><span data-stu-id="7ea17-107">These format elements are used to fill generated documents with the required information at runtime.</span></span> <span data-ttu-id="7ea17-108">Par défaut, lorsque vous exécutez un format ER, les éléments de format sont exécutés dans le même ordre qu'ils sont présentés dans la hiérarchie des formats : un par un, de haut en bas.</span><span class="sxs-lookup"><span data-stu-id="7ea17-108">By default, when you run an ER format, the format elements are run in the same order as they are presented in the format hierarchy: one by one, from top to bottom.</span></span> <span data-ttu-id="7ea17-109">Cependant, au moment de la conception, vous pouvez modifier l'ordre d'exécution pour tous les éléments XML du composant de format configuré.</span><span class="sxs-lookup"><span data-stu-id="7ea17-109">However, at design time, you can change the execution order for any XML elements of the configured format component.</span></span>

<span data-ttu-id="7ea17-110">En activant l'option <a name="DeferredXmlElementExecution"></a>**Exécution différée** pour un élément XML au format configuré, vous pouvez différer (reporter) l'exécution de cet élément.</span><span class="sxs-lookup"><span data-stu-id="7ea17-110">By turning on the <a name="DeferredXmlElementExecution"></a>**Deferred execution** option for an XML element in the configured format, you can defer (postpone) the execution of that element.</span></span> <span data-ttu-id="7ea17-111">Dans ce cas, l'élément n'est pas exécuté tant que tous les autres éléments de son parent n'ont pas été exécutés.</span><span class="sxs-lookup"><span data-stu-id="7ea17-111">In this case, the element isn't run until all other elements of its parent have been run.</span></span>

<span data-ttu-id="7ea17-112">Pour en savoir plus sur cette fonctionnalité, exécutez l'exemple décrit dans cette rubrique.</span><span class="sxs-lookup"><span data-stu-id="7ea17-112">To learn more about this feature, complete the example in this topic.</span></span>

## <a name="limitations"></a><span data-ttu-id="7ea17-113">Limites</span><span class="sxs-lookup"><span data-stu-id="7ea17-113">Limitations</span></span>

<span data-ttu-id="7ea17-114">L'option **Exécution différée** est prise en charge uniquement pour les éléments XML configurés pour un format ER utilisé pour générer des documents **sortants** au format XML.</span><span class="sxs-lookup"><span data-stu-id="7ea17-114">The **Deferred execution** option is supported only for XML elements that are configured for an ER format that is used to generate **outbound** documents in XML format.</span></span>

<span data-ttu-id="7ea17-115">L'option **Exécution différée** est prise en charge uniquement pour les éléments XML qui résident dans un seul autre élément XML.</span><span class="sxs-lookup"><span data-stu-id="7ea17-115">The **Deferred execution** option is supported only for XML elements that reside in only one other XML element.</span></span> <span data-ttu-id="7ea17-116">Par conséquent, il ne s'applique pas aux éléments XML qui résident dans d'autres types d'éléments de format (par exemple, dans un élément **Séquence XML**).</span><span class="sxs-lookup"><span data-stu-id="7ea17-116">Therefore, it isn't applicable to XML elements that reside in other types of format elements (for example, in an **XML sequence** element).</span></span>

<span data-ttu-id="7ea17-117">L'option **Exécution différée** n'est pas prise en charge pour les éléments XML qui résident dans l'élément de format **Commun \\Fichier** lorsque l'option **Diviser le fichier** est définie sur **Oui**.</span><span class="sxs-lookup"><span data-stu-id="7ea17-117">The **Deferred execution** option isn't supported for XML elements that reside in the **Common\\File** format element when the **Split file** option is set to **Yes**.</span></span> <span data-ttu-id="7ea17-118">Pour plus d'informations sur le fractionnement des fichiers XML, voir [Fractionner les fichiers XML générés selon la taille et la quantité de contenu](er-split-files.md).</span><span class="sxs-lookup"><span data-stu-id="7ea17-118">For more information about how to split XML files, see [Split generated XML files based on file size and content quantity](er-split-files.md).</span></span>

## <a name="example-defer-the-execution-of-an-xml-element-in-an-er-format"></a><a name="Example"></a><span data-ttu-id="7ea17-119">Exemple : différer l'exécution d'un élément XML au format ER</span><span class="sxs-lookup"><span data-stu-id="7ea17-119">Example: Defer the execution of an XML element in an ER format</span></span>

<span data-ttu-id="7ea17-120">Les étapes suivantes expliquent comment un utilisateur du consultant fonctionnel de l'administrateur système ou des états électroniques [rôle](https://docs.microsoft.com/dynamics365/fin-ops-core/dev-itpro/sysadmin/tasks/assign-users-security-roles) peut configurer un format ER qui contient un élément XML où l'ordre d'exécution diffère de l'ordre dans la hiérarchie des formats.</span><span class="sxs-lookup"><span data-stu-id="7ea17-120">The following steps explain how a user in the System administrator or Electronic reporting functional consultant [role](https://docs.microsoft.com/dynamics365/fin-ops-core/dev-itpro/sysadmin/tasks/assign-users-security-roles) can configure an ER format that contains an XML element where the order of execution differs from the order in the format hierarchy.</span></span>

<span data-ttu-id="7ea17-121">Ces étapes peuvent être effectuées dans la société fictive **USMF** dans Microsoft Dynamics 365 Finance.</span><span class="sxs-lookup"><span data-stu-id="7ea17-121">These steps can be performed in the **USMF** company in Microsoft Dynamics 365 Finance.</span></span>

### <a name="prerequisites"></a><span data-ttu-id="7ea17-122">Conditions préalables</span><span class="sxs-lookup"><span data-stu-id="7ea17-122">Prerequisites</span></span>

<span data-ttu-id="7ea17-123">Pour terminer cet exemple, vous devez avoir accès à la société **USMF** pour l'un des rôles suivants :</span><span class="sxs-lookup"><span data-stu-id="7ea17-123">To complete this example, you must have access to the **USMF** company in Finance for one of the following roles:</span></span>

- <span data-ttu-id="7ea17-124">Consultant fonctionnel des états électroniques</span><span class="sxs-lookup"><span data-stu-id="7ea17-124">Electronic reporting functional consultant</span></span>
- <span data-ttu-id="7ea17-125">Administrateur système</span><span class="sxs-lookup"><span data-stu-id="7ea17-125">System administrator</span></span>

<span data-ttu-id="7ea17-126">Si vous n'avez pas encore terminé l'exemple dans la rubrique [Différer l'exécution des éléments de séquence aux formats ER](er-defer-sequence-element.md#Example), téléchargez les [configurations](general-electronic-reporting.md#Configuration) suivantes de l'exemple de solution ER.</span><span class="sxs-lookup"><span data-stu-id="7ea17-126">If you haven't yet completed the example in the [Defer the execution of sequence elements in ER formats](er-defer-sequence-element.md#Example) topic, download the following [configurations](general-electronic-reporting.md#Configuration) of the sample ER solution.</span></span>

| <span data-ttu-id="7ea17-127">Description du contenu</span><span class="sxs-lookup"><span data-stu-id="7ea17-127">Content description</span></span>            | <span data-ttu-id="7ea17-128">Nom de fichier</span><span class="sxs-lookup"><span data-stu-id="7ea17-128">File name</span></span> |
|--------------------------------|-----------|
| <span data-ttu-id="7ea17-129">Configuration de modèle de données ER</span><span class="sxs-lookup"><span data-stu-id="7ea17-129">ER data model configuration</span></span>    | [<span data-ttu-id="7ea17-130">Modèle d'apprentissage des éléments différés.version.1.xml</span><span class="sxs-lookup"><span data-stu-id="7ea17-130">Model to learn deferred elements.version.1.xml</span></span>](https://mbs.microsoft.com/customersource/Global/AX/downloads/hot-fixes/365optelecrepeg) |
| <span data-ttu-id="7ea17-131">Configuration de mise en correspondance de modèle ER</span><span class="sxs-lookup"><span data-stu-id="7ea17-131">ER model mapping configuration</span></span> | [<span data-ttu-id="7ea17-132">Modèle d'apprentissage des éléments différés.version.1.1.xml</span><span class="sxs-lookup"><span data-stu-id="7ea17-132">Mapping to learn deferred elements.version.1.1.xml</span></span>](https://mbs.microsoft.com/customersource/Global/AX/downloads/hot-fixes/365optelecrepeg) |

<span data-ttu-id="7ea17-133">Avant de commencer, vous devez également télécharger et enregistrer la configuration suivante de l'exemple de solution ER sur votre ordinateur local.</span><span class="sxs-lookup"><span data-stu-id="7ea17-133">Before you begin, you must also download and save the following configuration of the sample ER solution to your local computer.</span></span>

| <span data-ttu-id="7ea17-134">Description du contenu</span><span class="sxs-lookup"><span data-stu-id="7ea17-134">Content description</span></span>     | <span data-ttu-id="7ea17-135">Nom de fichier</span><span class="sxs-lookup"><span data-stu-id="7ea17-135">File name</span></span> |
|-------------------------|-----------|
| <span data-ttu-id="7ea17-136">Configuration de format ER</span><span class="sxs-lookup"><span data-stu-id="7ea17-136">ER format configuration</span></span> | [<span data-ttu-id="7ea17-137">Format d'apprentissage des éléments XML différés.version.1.1.xml</span><span class="sxs-lookup"><span data-stu-id="7ea17-137">Format to learn deferred XML elements.version.1.1.xml</span></span>](https://mbs.microsoft.com/customersource/Global/AX/downloads/hot-fixes/365optelecrepeg) |

### <a name="import-the-sample-er-configurations"></a><span data-ttu-id="7ea17-138">Importer l'exemple de configurations ER</span><span class="sxs-lookup"><span data-stu-id="7ea17-138">Import the sample ER configurations</span></span>

1. <span data-ttu-id="7ea17-139">Accédez à **Administration d'organisation** \> **Espaces de travail** \> **États électroniques**.</span><span class="sxs-lookup"><span data-stu-id="7ea17-139">Go to **Organization administration** \> **Workspaces** \> **Electronic reporting**.</span></span>
2. <span data-ttu-id="7ea17-140">Sélectionnez **Configurations des états**.</span><span class="sxs-lookup"><span data-stu-id="7ea17-140">Select **Reporting configurations**.</span></span>
3. <span data-ttu-id="7ea17-141">Sur la page **Configurations**, si la configuration **Modèle d'apprentissage des éléments différés** n'est pas disponible dans l'arborescence, importez la configuration du modèle de données ER :</span><span class="sxs-lookup"><span data-stu-id="7ea17-141">On the **Configurations** page, if the **Model to learn deferred elements** configuration isn't available in the configuration tree, import the ER data model configuration:</span></span>

    1. <span data-ttu-id="7ea17-142">Sélectionner **Échanger**, puis sélectionnez **Charger depuis le fichier XML**.</span><span class="sxs-lookup"><span data-stu-id="7ea17-142">Select **Exchange**, and then select **Load from XML file**.</span></span>
    2. <span data-ttu-id="7ea17-143">Sélectionnez **Parcourir**, recherchez et sélectionnez le fichier **Modèle d'apprentissage des éléments différés.1.xml**, puis sélectionnez **D'accord**.</span><span class="sxs-lookup"><span data-stu-id="7ea17-143">Select **Browse**, find and select the **Model to learn deferred elements.1.xml** file, and then select **OK**.</span></span>

4. <span data-ttu-id="7ea17-144">Si la configuration **Apprentissage des éléments différés** n'est pas disponible dans l'arborescence, importez la configuration de mise en correspondance de modèle ER :</span><span class="sxs-lookup"><span data-stu-id="7ea17-144">If the **Mapping to learn deferred elements** configuration isn't available in the configuration tree, import the ER model mapping configuration:</span></span>

    1. <span data-ttu-id="7ea17-145">Sélectionner **Échanger**, puis sélectionnez **Charger depuis le fichier XML**.</span><span class="sxs-lookup"><span data-stu-id="7ea17-145">Select **Exchange**, and then select **Load from XML file**.</span></span>
    2. <span data-ttu-id="7ea17-146">Sélectionnez **Parcourir**, recherchez et sélectionnez le fichier **Apprentissage des éléments différés.1.1.xml**, puis sélectionnez **OK**.</span><span class="sxs-lookup"><span data-stu-id="7ea17-146">Select **Browse**, find and select the **Mapping to learn deferred elements.1.1.xml** file, and then select **OK**.</span></span>

5. <span data-ttu-id="7ea17-147">Importer la configuration de format ER :</span><span class="sxs-lookup"><span data-stu-id="7ea17-147">Import the ER format configuration:</span></span>

    1. <span data-ttu-id="7ea17-148">Sélectionner **Échanger**, puis sélectionnez **Charger depuis le fichier XML**.</span><span class="sxs-lookup"><span data-stu-id="7ea17-148">Select **Exchange**, and then select **Load from XML file**.</span></span>
    2. <span data-ttu-id="7ea17-149">Sélectionnez **Parcourir**, recherchez et sélectionnez le fichier **Format d'apprentissage des éléments XML différés.1.1.xml**, puis sélectionnez **OK**.</span><span class="sxs-lookup"><span data-stu-id="7ea17-149">Select **Browse**, find and select the **Format to learn deferred XML elements.1.1.xml** file, and then select **OK**.</span></span>

6. <span data-ttu-id="7ea17-150">Dans l'arborescence de configuration, développez **Modèle d'apprentissage des éléments différés**.</span><span class="sxs-lookup"><span data-stu-id="7ea17-150">In the configuration tree, expand **Model to learn deferred elements**.</span></span>
7. <span data-ttu-id="7ea17-151">Consultez la liste des configurations ER importées dans l'arborescence de configuration.</span><span class="sxs-lookup"><span data-stu-id="7ea17-151">Review the list of imported ER configurations in the configuration tree.</span></span>

    ![Configurations ER importées sur la page Configurations](./media/ER-DeferredXml-Configurations.png)

### <a name="activate-a-configuration-provider"></a><span data-ttu-id="7ea17-153">Activer un fournisseur de configuration</span><span class="sxs-lookup"><span data-stu-id="7ea17-153">Activate a configuration provider</span></span>

1. <span data-ttu-id="7ea17-154">Accédez à **Administration d'organisation** \> **Espaces de travail** \> **États électroniques**.</span><span class="sxs-lookup"><span data-stu-id="7ea17-154">Go to **Organization administration** \> **Workspaces** \> **Electronic reporting**.</span></span>
2. <span data-ttu-id="7ea17-155">Dans la page **Configurations de localisation**, dans la section **Fournisseurs de configuration**, vérifiez que le [fournisseur de configuration](general-electronic-reporting.md#Provider) pour l'exemple de société Litware, Inc. (`http://www.litware.com`) est répertorié, et qu'il est marqué comme actif.</span><span class="sxs-lookup"><span data-stu-id="7ea17-155">On the **Localization configurations** page, in the **Configuration providers** section, make sure that the [configuration provider](general-electronic-reporting.md#Provider) for the Litware, Inc. (`http://www.litware.com`) sample company is listed, and that it's marked as active.</span></span> <span data-ttu-id="7ea17-156">Si ce fournisseur de configuration n'est pas répertorié ou s'il n'est pas marqué comme actif, suivez les étapes de la rubrique [Créer un fournisseur de configuration et le marquer comme actif](./tasks/er-configuration-provider-mark-it-active-2016-11.md).</span><span class="sxs-lookup"><span data-stu-id="7ea17-156">If this configuration provider isn't listed, or if it isn't marked as active, follow the steps in the [Create a configuration provider and mark it as active](./tasks/er-configuration-provider-mark-it-active-2016-11.md) topic.</span></span>

    ![Exemple de société Litware, Inc. sur la page Configurations de localisation](./media/ER-DeferredXml-ElectronicReportingWorkspace.png)

### <a name="review-the-imported-model-mapping"></a><span data-ttu-id="7ea17-158">Examiner la mise en correspondance des modèles importés</span><span class="sxs-lookup"><span data-stu-id="7ea17-158">Review the imported model mapping</span></span>

<span data-ttu-id="7ea17-159">Vérifiez les paramètres du composant de mise en correspondance de modèles ER configuré pour accéder aux transactions fiscales et exposer les données consultées sur demande.</span><span class="sxs-lookup"><span data-stu-id="7ea17-159">Review the settings of the ER model mapping component that is configured to access tax transactions and expose accessed data on request.</span></span>

1. <span data-ttu-id="7ea17-160">Accédez à **Administration d'organisation** \> **Espaces de travail** \> **États électroniques**.</span><span class="sxs-lookup"><span data-stu-id="7ea17-160">Go to **Organization administration** \> **Workspaces** \> **Electronic reporting**.</span></span>
2. <span data-ttu-id="7ea17-161">Sélectionnez **Configurations des états**.</span><span class="sxs-lookup"><span data-stu-id="7ea17-161">Select **Reporting configurations**.</span></span>
3. <span data-ttu-id="7ea17-162">Sur la page **Configurations**, dans l'arborescence de configuration, développez **Modèle d'apprentissage des éléments différés**.</span><span class="sxs-lookup"><span data-stu-id="7ea17-162">On the **Configurations** page, in the configuration tree, expand **Model to learn deferred elements**.</span></span>
4. <span data-ttu-id="7ea17-163">Sélectionnez la configuration **Modèle d'apprentissage des éléments différés**.</span><span class="sxs-lookup"><span data-stu-id="7ea17-163">Select the **Mapping to learn deferred elements** configuration.</span></span>
5. <span data-ttu-id="7ea17-164">Sélectionnez **Concepteur** pour ouvrir la liste des mises en correspondance.</span><span class="sxs-lookup"><span data-stu-id="7ea17-164">Select **Designer** to open the list of mappings.</span></span>
6. <span data-ttu-id="7ea17-165">Sélectionnez **Concepteur** pour consulter les détails de mise en correspondance.</span><span class="sxs-lookup"><span data-stu-id="7ea17-165">Select **Designer** to review the mapping details.</span></span>
7. <span data-ttu-id="7ea17-166">Sélectionnez **Afficher les détails**.</span><span class="sxs-lookup"><span data-stu-id="7ea17-166">Select **Show details**.</span></span>
8. <span data-ttu-id="7ea17-167">Consultez les sources de données configurées pour accéder aux transactions fiscales :</span><span class="sxs-lookup"><span data-stu-id="7ea17-167">Review the data sources that are configured to access tax transactions:</span></span>

    - <span data-ttu-id="7ea17-168">La source de données **Transactions** du type *Enregistrement de table* est configurée pour accéder aux enregistrements de la table d'application **TaxTrans**.</span><span class="sxs-lookup"><span data-stu-id="7ea17-168">The **Transactions** data source of the *Table record* type is configured to access records of the **TaxTrans** application table.</span></span>
    - <span data-ttu-id="7ea17-169">La source de données **Pièces justificatives** du type *Champ calculé* est configurée pour renvoyer les codes de document requis (**INV-10000349** et **INV-10000350**) en tant que liste d'enregistrements.</span><span class="sxs-lookup"><span data-stu-id="7ea17-169">The **Vouchers** data source of the *Calculated field* type is configured to return the required voucher codes (**INV-10000349** and **INV-10000350**) as a list of records.</span></span>
    - <span data-ttu-id="7ea17-170">La source de données **Filtré** du *Champ calculé* est configurée pour sélectionner, dans la source de données **Transactions**, seules les transactions fiscales des pièces justificatives requises.</span><span class="sxs-lookup"><span data-stu-id="7ea17-170">The **Filtered** data source of the *Calculated field* type is configured to select, from the **Transactions** data source, only tax transactions of the required vouchers.</span></span>
    - <span data-ttu-id="7ea17-171">Le domaine **\$TaxAmount** du type *Champ calculé* est ajouté pour la source de données **Filtré** pour exposer la valeur fiscale qui a le signe opposé.</span><span class="sxs-lookup"><span data-stu-id="7ea17-171">The **\$TaxAmount** field of the *Calculated field* type is added for the **Filtered** data source to expose the tax value that has the opposite sign.</span></span>
    - <span data-ttu-id="7ea17-172">La source de données **Groupé** du type *Grouper par* est configurée pour regrouper les transactions fiscales filtrées de la source de données **Filtré**.</span><span class="sxs-lookup"><span data-stu-id="7ea17-172">The **Grouped** data source of the *Group By* type is configured to group filtered tax transactions of the **Filtered** data source.</span></span>
    - <span data-ttu-id="7ea17-173">Le champ d'agrégation **TotalSum** de la source de données **Groupé** est configuré pour résumer les valeurs du domaine **\$TaxAmount** de la source de données **Filtré** pour toutes les transactions fiscales filtrées de cette source de données.</span><span class="sxs-lookup"><span data-stu-id="7ea17-173">The **TotalSum** aggregation field of the **Grouped** data source is configured to summarize values of the **\$TaxAmount** field of the **Filtered** data source for all filtered tax transactions of that data source.</span></span>

        ![Champ d'agrégation TotalSum sur la page Modifier les paramètres « GroupBy »](./media/ER-DeferredXml-GroupByParameters.png)

9. <span data-ttu-id="7ea17-175">Vérifiez comment les sources de données configurées sont liées au modèle de données et comment elles exposent les données accédées pour les rendre disponibles au format ER :</span><span class="sxs-lookup"><span data-stu-id="7ea17-175">Review how the configured data sources are bound to the data model, and how they expose accessed data to make it available in an ER format:</span></span>

    - <span data-ttu-id="7ea17-176">La source de données **Filtré** est liée au champ **Data.List** du modèle de données.</span><span class="sxs-lookup"><span data-stu-id="7ea17-176">The **Filtered** data source is bound to the **Data.List** field of the data model.</span></span>
    - <span data-ttu-id="7ea17-177">Le champ **\$TaxAmount** de la source de données **Filtré** est liée au champ **Data.List.Value** du modèle de données.</span><span class="sxs-lookup"><span data-stu-id="7ea17-177">The **\$TaxAmount** field of the **Filtered** data source is bound to the **Data.List.Value** field of the data model.</span></span>
    - <span data-ttu-id="7ea17-178">Le champ **TotalSum** de la source de données **Groupé** est liée au champ **Data.Summary.Total** du modèle de données.</span><span class="sxs-lookup"><span data-stu-id="7ea17-178">The **TotalSum** field of the **Grouped** data source is bound to the **Data.Summary.Total** field of the data model.</span></span>

    ![Page Concepteur de mise en correspondance de modèle](./media/ER-DeferredXml-ModelMapping.png)

10. <span data-ttu-id="7ea17-180">Fermez les pages **Concepteur de mise en correspondance de modèle** et **Mappages de modèles**.</span><span class="sxs-lookup"><span data-stu-id="7ea17-180">Close the **Model mapping designer** and **Model mappings** pages.</span></span>

### <a name="review-the-imported-format"></a><span data-ttu-id="7ea17-181">Examiner le format importé</span><span class="sxs-lookup"><span data-stu-id="7ea17-181">Review the imported format</span></span>

1. <span data-ttu-id="7ea17-182">Sur la page **Configurations**, dans l'arborescence de configuration, sélectionnez la configuration **Format d'apprentissage des éléments XML différés**.</span><span class="sxs-lookup"><span data-stu-id="7ea17-182">On the **Configurations** page, in the configuration tree, select the **Format to learn deferred XML elements** configuration.</span></span>
2. <span data-ttu-id="7ea17-183">Sélectionnez **Concepteur** pour consulter les détails du format.</span><span class="sxs-lookup"><span data-stu-id="7ea17-183">Select **Designer** to review the format details.</span></span>
3. <span data-ttu-id="7ea17-184">Sélectionnez **Afficher les détails**.</span><span class="sxs-lookup"><span data-stu-id="7ea17-184">Select **Show details**.</span></span>
4. <span data-ttu-id="7ea17-185">Vérifiez les paramètres des composants du format ER configurés pour générer un document sortant au format XML qui inclut les détails des transactions fiscales :</span><span class="sxs-lookup"><span data-stu-id="7ea17-185">Review the settings of the ER format components that are configured to generate an outbound document in XML format that includes details of the tax transactions:</span></span>

    - <span data-ttu-id="7ea17-186">L'élément XML **Rapport \\Message** est configuré pour remplir le document sortant avec un seul nœud qui inclut les éléments XML imbriqués (**Entête**, **Enregistrement**, et **Récapitulatif**).</span><span class="sxs-lookup"><span data-stu-id="7ea17-186">The **Report\\Message** XML element is configured to fill the outbound document with a single node that includes the nested XML elements (**Header**, **Record**, and **Summary**).</span></span>
    - <span data-ttu-id="7ea17-187">L'élément de format XML **Rapport \\Message \\Entête** est configuré pour remplir le document sortant avec un seul nœud d'en-tête qui indique la date et l'heure de début du traitement.</span><span class="sxs-lookup"><span data-stu-id="7ea17-187">The **Report\\Message\\Header** XML element is configured to fill the outbound document with a single header node that shows the date and time when the processing starts.</span></span>
    - <span data-ttu-id="7ea17-188">L'élément XML **Rapport \\Message \\Enregistrement** est configuré pour remplir le document sortant avec un seul nœud d'enregistrement qui affiche les détails d'une transaction individuelle.</span><span class="sxs-lookup"><span data-stu-id="7ea17-188">The **Report \\Message\\Record** XML element is configured to fill the outbound document with a single record node that shows the details of a single tax transaction.</span></span>
    - <span data-ttu-id="7ea17-189">L'élément XML **Rapport \\Message \\Récapitulatif** est configuré pour remplir le document sortant avec un seul nœud récapitulatif qui inclut la somme des valeurs de taxe des transactions fiscales traitées.</span><span class="sxs-lookup"><span data-stu-id="7ea17-189">The **Report\\Message\\Summary** XML element is configured to fill the outbound document with a single summary node that includes the sum of the tax values from the processed tax transactions.</span></span>

    ![Élément XML de message et éléments XML imbriqués sur la page Concepteur de format](./media/ER-DeferredXml-Format.png)

5. <span data-ttu-id="7ea17-191">Sur l'onglet **Mise en correspondance**, passez en revue les détails suivants :</span><span class="sxs-lookup"><span data-stu-id="7ea17-191">On the **Mapping** tab, review the following details:</span></span>

    - <span data-ttu-id="7ea17-192">L'élément **Rapport \\Message \\Entête** n'a pas besoin d'être lié à une source de données pour générer un seul nœud dans un document sortant.</span><span class="sxs-lookup"><span data-stu-id="7ea17-192">The **Report\\Message\\Header** element doesn't have to be bound to a source to generate a single node in an outbound document.</span></span>
    - <span data-ttu-id="7ea17-193">L'attribut **ExecutionDateTime** génère la date et l'heure (y compris les millisecondes) lorsque le nœud d'en-tête est ajouté.</span><span class="sxs-lookup"><span data-stu-id="7ea17-193">The **ExecutionDateTime** attribute generates the date and time (including milliseconds) when the header node is added.</span></span>
    - <span data-ttu-id="7ea17-194">L'élément **Rapport \\Message \\Enregistrement** est lié à la liste **model.Data.List** pour générer un seul nœud d'enregistrement pour chaque enregistrement à partir de la liste liée.</span><span class="sxs-lookup"><span data-stu-id="7ea17-194">The **Report\\Message\\Record** element is bound to the **model.Data.List** list to generate a single record node for every record from the bound list.</span></span>
    - <span data-ttu-id="7ea17-195">L'attribut **TaxAmount** est lié à **model.Data.List.Value** (qui est représenté par **\@.Value** dans la vue du chemin relatif) pour générer la valeur fiscale de la transaction fiscale actuelle.</span><span class="sxs-lookup"><span data-stu-id="7ea17-195">The **TaxAmount** attribute is bound to **model.Data.List.Value** (which is shown as **\@.Value** in the relative path view) to generate the tax value of the current tax transaction.</span></span>
    - <span data-ttu-id="7ea17-196">L'attribut **RunningTotal** est un espace réservé pour le total cumulé des valeurs de taxe.</span><span class="sxs-lookup"><span data-stu-id="7ea17-196">The **RunningTotal** attribute is a placeholder for the running total of the tax values.</span></span> <span data-ttu-id="7ea17-197">Actuellement, cet attribut n'a pas de sortie, car ni une liaison ni une valeur par défaut n'est configurée pour lui.</span><span class="sxs-lookup"><span data-stu-id="7ea17-197">Currently, this attribute has no output, because neither a binding nor a default value is configured for it.</span></span>
    - <span data-ttu-id="7ea17-198">L'attribut **ExecutionDateTime** génère la date et l'heure (y compris les millisecondes) lorsque la transaction en cours est traitée dans ce rapport.</span><span class="sxs-lookup"><span data-stu-id="7ea17-198">The **ExecutionDateTime** attribute generates the date and time (including milliseconds) when the current transaction is processed in this report.</span></span>
    - <span data-ttu-id="7ea17-199">L'élément **Rapport \\Message \\Récapitulatif** n'a pas besoin d'être lié à une source de données pour générer un seul nœud dans un document sortant.</span><span class="sxs-lookup"><span data-stu-id="7ea17-199">The **Report\\Message\\Summary** element doesn't have to be bound to a data source to generate a single node in an outbound document.</span></span>
    - <span data-ttu-id="7ea17-200">L'attribut **TotalTaxAmount** est lié à **model.Data.Summary.Total** pour générer la somme des valeurs fiscales des transactions fiscales traitées.</span><span class="sxs-lookup"><span data-stu-id="7ea17-200">The **TotalTaxAmount** attribute is bound to **model.Data.Summary.Total** to generate the sum of the tax values of the processed tax transactions.</span></span>
    - <span data-ttu-id="7ea17-201">L'attribut **ExecutionDateTime** génère la date et l'heure (y compris les millisecondes) lorsque le nœud récapitulatif est ajouté.</span><span class="sxs-lookup"><span data-stu-id="7ea17-201">The **ExecutionDateTime** attribute generates the date and time (including milliseconds) when the summary node is added.</span></span>

    ![Onglet Mise en correspondance de la page Concepteur de format](./media/ER-DeferredXml-Format2.png)

### <a name="run-the-imported-format"></a><span data-ttu-id="7ea17-203">Exécuter le format ER importé</span><span class="sxs-lookup"><span data-stu-id="7ea17-203">Run the imported format</span></span>

1. <span data-ttu-id="7ea17-204">Dans la page **Concepteur de format**, sélectionnez **Exécuter**.</span><span class="sxs-lookup"><span data-stu-id="7ea17-204">On the **Format designer** page, select **Run**.</span></span>
2. <span data-ttu-id="7ea17-205">Téléchargez le fichier proposé par le navigateur Web et ouvrez-le pour examen.</span><span class="sxs-lookup"><span data-stu-id="7ea17-205">Download the file that the web browser offers, and open it for review.</span></span>

    ![Fichier téléchargé](./media/ER-DeferredXml-Run.png)

<span data-ttu-id="7ea17-207">Notez que le nœud récapitulatif présente la somme des valeurs fiscales pour les transactions traitées.</span><span class="sxs-lookup"><span data-stu-id="7ea17-207">Notice that the summary node presents the sum of the tax values for the processed transactions.</span></span> <span data-ttu-id="7ea17-208">Parce que le format est configuré pour utiliser le **model.Data.Summary.Total** utilisé pour retourner cette somme, la somme est calculée en appelant l'aggrégation **TotalSum** de la source de données **Groupé** du type *GroupBy* dans la mise en correspondance de modèle.</span><span class="sxs-lookup"><span data-stu-id="7ea17-208">Because the format is configured to use the **model.Data.Summary.Total** binding to return this sum, the sum is calculated by calling the **TotalSum** aggregation of the **Grouped** data source of the *GroupBy* type in the model mapping.</span></span> <span data-ttu-id="7ea17-209">Pour calculer cette agrégation, le mappage de modèle itère sur toutes les transactions qui ont été sélectionnées dans la source de données **Filtré**.</span><span class="sxs-lookup"><span data-stu-id="7ea17-209">To calculate this aggregation, the model mapping iterates over all transactions that have been selected in the **Filtered** data source.</span></span> <span data-ttu-id="7ea17-210">En comparant les temps d'exécution du nœud récapitulatif et du dernier nœud d'enregistrement, vous pouvez déterminer que le calcul de la somme a pris 12 millisecondes (ms).</span><span class="sxs-lookup"><span data-stu-id="7ea17-210">By comparing the execution times of the summary node and the last record node, you can determine that calculation of the sum took 12 milliseconds (ms).</span></span> <span data-ttu-id="7ea17-211">En comparant les temps d'exécution du premier nœud et du dernier nœud d'enregistrement, vous pouvez déterminer que la génération de tous les nœuds d'enregistrement a pris 9 millisecondes (ms).</span><span class="sxs-lookup"><span data-stu-id="7ea17-211">By comparing the execution times of the first and last record nodes, you can determine that generation of all record nodes took 9 ms.</span></span> <span data-ttu-id="7ea17-212">Par conséquent, un total de 21 ms était nécessaire.</span><span class="sxs-lookup"><span data-stu-id="7ea17-212">Therefore, a total of 21 ms was required.</span></span>

### <a name="modify-the-format-so-that-the-calculation-is-based-on-generated-output"></a><span data-ttu-id="7ea17-213">Modifier le format pour que la calcul soit basé sur la sortie générée</span><span class="sxs-lookup"><span data-stu-id="7ea17-213">Modify the format so that the calculation is based on generated output</span></span>

<span data-ttu-id="7ea17-214">Si le volume de transaction est beaucoup plus important que le volume dans l'exemple actuel, le temps nécessaire pour générer le calcul peut augmenter et entraîner des problèmes de performances.</span><span class="sxs-lookup"><span data-stu-id="7ea17-214">If the volume of transaction is much larger than the volume in the current example, the calculation time might increase and cause performance issues.</span></span> <span data-ttu-id="7ea17-215">En modifiant le paramètre du format, vous pouvez éviter ces problèmes de performances.</span><span class="sxs-lookup"><span data-stu-id="7ea17-215">By changing the setting of the format, you can help prevent these performance issues.</span></span> <span data-ttu-id="7ea17-216">Étant donné que vous accédez aux valeurs de taxe pour les inclure dans le rapport généré, vous pouvez réutiliser ces informations pour calculer les valeurs de taxe.</span><span class="sxs-lookup"><span data-stu-id="7ea17-216">Because you access tax values to include them in the generated report, you can reuse this information to calculate tax values.</span></span> <span data-ttu-id="7ea17-217">Pour plus d'informations, voir [Configurer le format pour effectuer le comptage et la synthèse](./tasks/er-format-counting-summing-1.md).</span><span class="sxs-lookup"><span data-stu-id="7ea17-217">For more information, see [Configure format to do counting and summing](./tasks/er-format-counting-summing-1.md).</span></span>

1. <span data-ttu-id="7ea17-218">Sur la page **Concepteur de format**, dans l'onglet **Format**, sélectionnez l'élément de fichier **Rapport** dans l'arborescence de format.</span><span class="sxs-lookup"><span data-stu-id="7ea17-218">On the **Format designer** page, on the **Format** tab, select the **Report** file element in the format tree.</span></span>
2. <span data-ttu-id="7ea17-219">Définissez l'option **Collecter les détails sur les sorties** sur **Oui**.</span><span class="sxs-lookup"><span data-stu-id="7ea17-219">Set the **Collect output details** option to **Yes**.</span></span> <span data-ttu-id="7ea17-220">Vous pouvez maintenant configurer ce format en utilisant le contenu d'un rapport généré comme source de données accessible à l'aide des fonctions ER intégrées dans la catégorie [Collecte de données](er-functions-category-data-collection.md).</span><span class="sxs-lookup"><span data-stu-id="7ea17-220">You can now configure this format by using the content of a generated report as a data source that can be accessed by using the built-in ER functions in the [Data collection](er-functions-category-data-collection.md) category.</span></span>
3. <span data-ttu-id="7ea17-221">Dans l'onglet **Mise en correspondance**, sélectionnez l'élément XML **Rapport\\Message\\Enregistrement**.</span><span class="sxs-lookup"><span data-stu-id="7ea17-221">On the **Mapping** tab, select the **Report\\Message\\Record** XML element.</span></span>
4. <span data-ttu-id="7ea17-222">Configurez l'expression **Nom de clé de données collectées** comme `WsColumn`.</span><span class="sxs-lookup"><span data-stu-id="7ea17-222">Configure the **Collected data key name** expression as `WsColumn`.</span></span>
5. <span data-ttu-id="7ea17-223">Configurez l'expression **Valeur de clé de données collectées** comme `WsRow`.</span><span class="sxs-lookup"><span data-stu-id="7ea17-223">Configure the **Collected data key value** expression as `WsRow`.</span></span>

    ![Élément XML d'enregistrement sur la page Concepteur de format](./media/ER-DeferredXml-Format3.png)

6. <span data-ttu-id="7ea17-225">Sélectionnez l'attribut **Rapport \\Message \\Enregistrement \\TaxAmount**.</span><span class="sxs-lookup"><span data-stu-id="7ea17-225">Select the **Report\\Message\\Record\\TaxAmount** attribute.</span></span>
7. <span data-ttu-id="7ea17-226">Configurez l'expression **Nom de clé de données collectées** comme `SummingAmountKey`.</span><span class="sxs-lookup"><span data-stu-id="7ea17-226">Configure the **Collected data key name** expression as `SummingAmountKey`.</span></span>

    ![Attribut TaxAmount sur la page Concepteur de format](./media/ER-DeferredXml-Format4.png)

    <span data-ttu-id="7ea17-228">Vous pouvez considérer ce paramètre comme la création d'une feuille de calcul virtuelle, où la valeur de la cellule A1 est ajoutée à la valeur du montant de la taxe de chaque transaction fiscale traitée.</span><span class="sxs-lookup"><span data-stu-id="7ea17-228">You can consider this setting the fulfillment of a virtual worksheet, where the value of cell A1 is appended with the value of the tax amount from every processed tax transaction.</span></span>

8. <span data-ttu-id="7ea17-229">Sélectionnez l'attribut **Rapport \\Message \\Enregistrement \\RunningTotal**, puis sélectionnez **Modifier la formule**.</span><span class="sxs-lookup"><span data-stu-id="7ea17-229">Select the **Report\\Message\\Record\\RunningTotal** attribute, and then select **Edit formula**.</span></span>
9. <span data-ttu-id="7ea17-230">Configurez l'expression `SUMIF(SummingAmountKey, WsColumn, WsRow)` en utilisant la fonction ER intégrée [SUMIF](er-functions-datacollection-sumif.md), puis sélectionnez **Enregistrer**.</span><span class="sxs-lookup"><span data-stu-id="7ea17-230">Configure the `SUMIF(SummingAmountKey, WsColumn, WsRow)` expression by using the built-in [SUMIF](er-functions-datacollection-sumif.md) ER function, and then select **Save**.</span></span>

    ![Expression SUMIF](./media/ER-DeferredXml-FormulaDesigner.png)

10. <span data-ttu-id="7ea17-232">Fermez la page **Concepteur de formule**.</span><span class="sxs-lookup"><span data-stu-id="7ea17-232">Close the **Formula designer** page.</span></span>
11. <span data-ttu-id="7ea17-233">Sélectionnez **Enregistrer**, puis sélectionnez **Exécuter**.</span><span class="sxs-lookup"><span data-stu-id="7ea17-233">Select **Save**, and then select **Run**.</span></span>
12. <span data-ttu-id="7ea17-234">Téléchargez et passez en revue le fichier proposé par le navigateur Web.</span><span class="sxs-lookup"><span data-stu-id="7ea17-234">Download and review the file that the web browser offers.</span></span>

    ![Fichier téléchargé](./media/ER-DeferredXml-Run1.png)

    <span data-ttu-id="7ea17-236">Le dernier nœud d'enregistrement contient le total cumulé des valeurs de taxe qui est calculé pour toutes les transactions traitées en utilisant la sortie générée comme source de données.</span><span class="sxs-lookup"><span data-stu-id="7ea17-236">The last record node contains the running total of tax values that is calculated for all processed transactions by using the generated output as a data source.</span></span> <span data-ttu-id="7ea17-237">Cette source de données commence au début du rapport et se poursuit jusqu'à la dernière transaction fiscale.</span><span class="sxs-lookup"><span data-stu-id="7ea17-237">This data source starts from the beginning of the report and continues through the last tax transaction.</span></span> <span data-ttu-id="7ea17-238">Le nœud récapitulatif contient la somme des valeurs de taxe pour toutes les transactions traitées qui sont calculées dans le mappage de modèle en utilisant la source de données du type *GroupBy*.</span><span class="sxs-lookup"><span data-stu-id="7ea17-238">The summary node contains the sum of the tax values for all processed transactions that are calculated in the model mapping by using the data source of the *GroupBy* type.</span></span> <span data-ttu-id="7ea17-239">Notez que ces valeurs sont égales.</span><span class="sxs-lookup"><span data-stu-id="7ea17-239">Notice that these values are equal.</span></span> <span data-ttu-id="7ea17-240">Par conséquent, la somme basée sur la sortie peut être utilisée au lieu de **GroupBy**.</span><span class="sxs-lookup"><span data-stu-id="7ea17-240">Therefore, the output-based summing can be used instead of **GroupBy**.</span></span> <span data-ttu-id="7ea17-241">En comparant les temps d'exécution du premier nœud et du nœud récapitulatif, vous pouvez déterminer que la génération de tous les nœuds d'enregistrement et de la somme a pris 11 millisecondes (ms).</span><span class="sxs-lookup"><span data-stu-id="7ea17-241">By comparing the execution times of the first record node and the summary node, you can determine that generation of all the record nodes and summing took 11 ms.</span></span> <span data-ttu-id="7ea17-242">Par conséquent, en ce qui concerne la génération des nœuds d'enregistrement et de la somme des valeurs fiscales, le format modifié est environ deux fois plus rapide que le format d'origine.</span><span class="sxs-lookup"><span data-stu-id="7ea17-242">Therefore, as far as the generation of record nodes and the summing of tax values are concerned, the modified format is approximately two times faster than the original format.</span></span>

13. <span data-ttu-id="7ea17-243">Sélectionnez l'attribut **Rapport \\Message \\Récapitulatif \\TotalTaxAmount**, puis sélectionnez **Modifier la formule**.</span><span class="sxs-lookup"><span data-stu-id="7ea17-243">Select the **Report\\Message\\Summary\\TotalTaxAmount** attribute, and then select **Edit formula**.</span></span>
14. <span data-ttu-id="7ea17-244">Entrez l'expression `SUMIF(SummingAmountKey, WsColumn, WsRow)` au lieu de l'expression existante.</span><span class="sxs-lookup"><span data-stu-id="7ea17-244">Enter the `SUMIF(SummingAmountKey, WsColumn, WsRow)` expression instead of the existing expression.</span></span>
15. <span data-ttu-id="7ea17-245">Sélectionnez **Enregistrer**, puis sélectionnez **Exécuter**.</span><span class="sxs-lookup"><span data-stu-id="7ea17-245">Select **Save**, and then select **Run**.</span></span>
16. <span data-ttu-id="7ea17-246">Téléchargez et passez en revue le fichier proposé par le navigateur Web.</span><span class="sxs-lookup"><span data-stu-id="7ea17-246">Download and review the file that the web browser offers.</span></span>

    ![Fichier téléchargé](./media/ER-DeferredXml-Run2.png)

    <span data-ttu-id="7ea17-248">Notez que le total cumulé des valeurs de taxe dans le dernier nœud d'enregistrement est désormais égal à la somme dans le nœud récapitulatif.</span><span class="sxs-lookup"><span data-stu-id="7ea17-248">Notice that the running total of tax values in the last record node now equals the sum in the summary node.</span></span>

### <a name="put-values-of-output-based-summing-in-the-report-header"></a><span data-ttu-id="7ea17-249">Placer les valeurs de la somme basée sur la sortie dans l'en-tête du rapport</span><span class="sxs-lookup"><span data-stu-id="7ea17-249">Put values of output-based summing in the report header</span></span>

<span data-ttu-id="7ea17-250">Si, par exemple, vous devez présenter la somme des valeurs fiscales dans l'en-tête de votre rapport, vous pouvez modifier votre format.</span><span class="sxs-lookup"><span data-stu-id="7ea17-250">If, for example, you must present the sum of tax values in the header of your report, you can modify your format.</span></span>

1. <span data-ttu-id="7ea17-251">Sur la page **Concepteur de format**, dans l'onglet **Format**, sélectionnez l'élément XML **Rapport\\Message\\Récapitulatif**.</span><span class="sxs-lookup"><span data-stu-id="7ea17-251">On the **Format designer** page, on the **Format** tab, select the **Report\\Message\\Summary** XML element.</span></span>
2. <span data-ttu-id="7ea17-252">Sélectionnez **Déplacer vers le haut**.</span><span class="sxs-lookup"><span data-stu-id="7ea17-252">Select **Move up**.</span></span>
3. <span data-ttu-id="7ea17-253">Sélectionnez **Enregistrer**, puis sélectionnez **Exécuter**.</span><span class="sxs-lookup"><span data-stu-id="7ea17-253">Select **Save**, and then select **Run**.</span></span>
4. <span data-ttu-id="7ea17-254">Téléchargez et passez en revue le fichier proposé par le navigateur Web.</span><span class="sxs-lookup"><span data-stu-id="7ea17-254">Download and review the file that the web browser offers.</span></span>

    ![Fichier téléchargé](./media/ER-DeferredXml-Run3.png)

    <span data-ttu-id="7ea17-256">Notez que la somme des valeurs de taxe dans le nœud récapitulatif est désormais égale à 0 (zéro), car cette somme est désormais calculée en fonction de la sortie générée.</span><span class="sxs-lookup"><span data-stu-id="7ea17-256">Notice that the sum of tax values in the summary node now equals 0 (zero), because this sum is now calculated based on the generated output.</span></span> <span data-ttu-id="7ea17-257">Lorsque le premier nœud d'enregistrement est généré, la sortie générée ne contient pas encore de nœuds d'enregistrement contenant les détails de transaction.</span><span class="sxs-lookup"><span data-stu-id="7ea17-257">When the first record node is generated, the generated output doesn't yet contain record nodes that have transaction details.</span></span> <span data-ttu-id="7ea17-258">Vous pouvez configurer ce format pour différer l'exécution de l'élément de séquence **Rapport \\Message \\Récapitulatif** jusqu'à ce que l'élément de séquence **Rapport \\Message \\Enregistrement** ait été exécuté pour toutes les transactions fiscales.</span><span class="sxs-lookup"><span data-stu-id="7ea17-258">You can configure this format to defer the execution of the **Report\\Message\\Summary** element until the **Report\\Message\\Record** element has been run for all tax transactions.</span></span>

### <a name="defer-the-execution-of-the-summary-xml-element-so-that-the-calculated-total-is-used"></a><span data-ttu-id="7ea17-259">Différer l'exécution de l'élément XML récapitulatif pour que le total calculé soit utilisé</span><span class="sxs-lookup"><span data-stu-id="7ea17-259">Defer the execution of the summary XML element so that the calculated total is used</span></span>

1. <span data-ttu-id="7ea17-260">Sur la page **Concepteur de format**, dans l'onglet **Format**, sélectionnez l'élément XML **Rapport\\Message\\Récapitulatif**.</span><span class="sxs-lookup"><span data-stu-id="7ea17-260">On the **Format designer** page, on the **Format** tab, select the **Report\\Message\\Summary** XML element.</span></span>
2. <span data-ttu-id="7ea17-261">Définissez l'option **Exécution différée** sur **Oui**.</span><span class="sxs-lookup"><span data-stu-id="7ea17-261">Set the **Deferred execution** option to **Yes**.</span></span>

    ![Option d'exécution différée de l'élément XML récapitulatif sur la page Concepteur de format](./media/ER-DeferredXml-Format5.png)

3. <span data-ttu-id="7ea17-263">Sélectionnez **Enregistrer**, puis sélectionnez **Exécuter**.</span><span class="sxs-lookup"><span data-stu-id="7ea17-263">Select **Save**, and then select **Run**.</span></span>
4. <span data-ttu-id="7ea17-264">Téléchargez et passez en revue le fichier proposé par le navigateur Web.</span><span class="sxs-lookup"><span data-stu-id="7ea17-264">Download and review the file that the web browser offers.</span></span>

    ![Fichier téléchargé](./media/ER-DeferredXml-Run4.png)

    <span data-ttu-id="7ea17-266">L'élément **Rapport \\Message \\Récapitulatif** n'est désormais exécuté qu'après que tous les autres éléments imbriqués sous son élément parent, **Rapport \\Message**, ont été exécutés.</span><span class="sxs-lookup"><span data-stu-id="7ea17-266">The **Report\\Message\\Summary** element is now run only after all other items that are nested under its parent element, **Report\\Message**, have been run.</span></span> <span data-ttu-id="7ea17-267">Par conséquent, il est exécuté après que l'élément **Rapport \\Message \\Enregistrement** a été exécuté pour toutes les transactions fiscales de la source de données **model.Data.List**.</span><span class="sxs-lookup"><span data-stu-id="7ea17-267">Therefore, it's run after the **Report\\Message\\Record** element has been run for all tax transactions of the **model.Data.List** data source.</span></span> <span data-ttu-id="7ea17-268">Les temps d'exécution des premier et dernier nœuds d'enregistrement, ainsi que des nœuds d'en-tête et de résumé, révèlent ce fait.</span><span class="sxs-lookup"><span data-stu-id="7ea17-268">The execution times of the first and last record nodes, and of the header and summary nodes, reveal this fact.</span></span>

## <a name="additional-resources"></a><span data-ttu-id="7ea17-269">Ressources supplémentaires</span><span class="sxs-lookup"><span data-stu-id="7ea17-269">Additional resources</span></span>

- [<span data-ttu-id="7ea17-270">Configurer le format pour effectuer le comptage et la synthèse</span><span class="sxs-lookup"><span data-stu-id="7ea17-270">Configure format to do counting and summing</span></span>](./tasks/er-format-counting-summing-1.md)
- [<span data-ttu-id="7ea17-271">Suivez l'exécution du format d'ER pour résoudre les problèmes de performances</span><span class="sxs-lookup"><span data-stu-id="7ea17-271">Trace execution of ER format to troubleshoot performance issues</span></span>](trace-execution-er-troubleshoot-perf.md)
- [<span data-ttu-id="7ea17-272">Différer l'exécution des éléments de séquence aux formats ER</span><span class="sxs-lookup"><span data-stu-id="7ea17-272">Defer the execution of sequence elements in ER formats</span></span>](er-defer-sequence-element.md#Example)
