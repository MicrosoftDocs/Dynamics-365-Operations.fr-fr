---
title: Synchronisation entre les commandes client directement entre Sales et Finance and Operations
description: La rubrique présente les modèles et les tâches sous-jacentes utilisés pour synchroniser les commandes client directement depuis Microsoft Dynamics 365 for Sales et Microsoft Dynamics 365 for Finance and Operations.
author: ChristianRytt
manager: AnnBe
ms.date: 05/09/2019
ms.topic: article
ms.prod: ''
ms.service: dynamics-ax-applications
ms.technology: ''
ms.search.form: ''
audience: Application User, IT Pro
ms.reviewer: josaw
ms.search.scope: Core, Operations
ms.custom: ''
ms.assetid: ''
ms.search.region: global
ms.search.industry: ''
ms.author: crytt
ms.dyn365.ops.version: July 2017 update
ms.search.validFrom: 2017-07-8
ms.openlocfilehash: a427bff3cd07adbf4d3d81f98bdf7f85a194730b
ms.sourcegitcommit: 3f02d8a874d1696cbf21d100f1ad205c57224e4b
ms.translationtype: HT
ms.contentlocale: fr-FR
ms.lasthandoff: 05/09/2019
ms.locfileid: "1539112"
---
# <a name="synchronization-of-sales-orders-directly-between-sales-and-finance-and-operations"></a><span data-ttu-id="c7e48-103">Synchronisation des commandes client directement entre Sales et Finance and Operations</span><span class="sxs-lookup"><span data-stu-id="c7e48-103">Synchronization of sales orders directly between Sales and Finance and Operations</span></span>

[!include [banner](../includes/banner.md)]

<span data-ttu-id="c7e48-104">La rubrique présente les modèles et les tâches sous-jacentes utilisés pour synchroniser les commandes client directement depuis Microsoft Dynamics 365 for Sales et Microsoft Dynamics 365 for Finance and Operations.</span><span class="sxs-lookup"><span data-stu-id="c7e48-104">The topic discusses the templates and underlying tasks that are used to run synchronization of sales orders directly between Microsoft Dynamics 365 for Sales and Microsoft Dynamics 365 for Finance and Operations.</span></span>

## <a name="data-flow-in-prospect-to-cash"></a><span data-ttu-id="c7e48-105">Flux de données dans Prospect en disponibilités</span><span class="sxs-lookup"><span data-stu-id="c7e48-105">Data flow in Prospect to cash</span></span>

<span data-ttu-id="c7e48-106">La solution Prospect en disponibilités utilise la fonction d'intégration de données pour synchroniser les données entre plusieurs instances de Finance and Operations et Sales.</span><span class="sxs-lookup"><span data-stu-id="c7e48-106">The Prospect to cash solution uses the Data integration feature to synchronize data across instances of Finance and Operations and Sales.</span></span> <span data-ttu-id="c7e48-107">Les modèles Prospect en disponibilités disponibles avec la fonction d'intégration de données activent le flux de données pour les comptes, contacts, produits, devis de vente, commandes client et factures client entre Finance and Operations et Sales.</span><span class="sxs-lookup"><span data-stu-id="c7e48-107">The Prospect to cash templates that are available with the Data integration feature enable the flow of data for accounts, contacts, products, sales quotations, sales orders, and sales invoices between Finance and Operations and Sales.</span></span> <span data-ttu-id="c7e48-108">L'illustration ci-dessous indique comment les données sont synchronisées entre Finance and Operations et Sales.</span><span class="sxs-lookup"><span data-stu-id="c7e48-108">The following illustration shows how the data is synchronized between Finance and Operations and Sales.</span></span>

<span data-ttu-id="c7e48-109">[![Flux de données dans Prospect en disponibilités](./media/prospect-to-cash-data-flow.png)](./media/prospect-to-cash-data-flow.png)</span><span class="sxs-lookup"><span data-stu-id="c7e48-109">[![Data flow in Prospect to cash](./media/prospect-to-cash-data-flow.png)](./media/prospect-to-cash-data-flow.png)</span></span>

## <a name="templates-and-tasks"></a><span data-ttu-id="c7e48-110">Modèles et tâches</span><span class="sxs-lookup"><span data-stu-id="c7e48-110">Templates and tasks</span></span>

<span data-ttu-id="c7e48-111">Pour accéder à des modèles disponibles, ouvrir [Centre d'administrateur PowerApps](https://preview.admin.powerapps.com/dataintegration).</span><span class="sxs-lookup"><span data-stu-id="c7e48-111">To access the available templates, open [PowerApps Admin Center](https://preview.admin.powerapps.com/dataintegration).</span></span> <span data-ttu-id="c7e48-112">Sélectionnez **Projets**, puis, dans le coin supérieur droit, sélectionnez **Nouveau projet** pour sélectionner les modèles publics.</span><span class="sxs-lookup"><span data-stu-id="c7e48-112">Select **Projects**, and then, in the upper-right corner, select **New project** to select public templates.</span></span>

<span data-ttu-id="c7e48-113">Les modèles et les tâches sous-jacentes suivants sont utilisés pour exécuter la synchronisation des commandes client directement entre Sales et Finance and Operations :</span><span class="sxs-lookup"><span data-stu-id="c7e48-113">The following templates and underlying tasks are used to run synchronization of sales orders directly between Sales and Finance and Operations:</span></span>

- <span data-ttu-id="c7e48-114">**Noms des modèles dans l'intégration des données :**</span><span class="sxs-lookup"><span data-stu-id="c7e48-114">**Names of the templates in Data integration:**</span></span> 

    - <span data-ttu-id="c7e48-115">Commandes client (entre Sales et Fin and Ops) - Direct</span><span class="sxs-lookup"><span data-stu-id="c7e48-115">Sales Orders (Sales to Fin and Ops) - Direct</span></span>
    - <span data-ttu-id="c7e48-116">Commandes client (entre Fin and Ops et Sales) - Direct</span><span class="sxs-lookup"><span data-stu-id="c7e48-116">Sales Orders (Fin and Ops to Sales) - Direct</span></span>

- <span data-ttu-id="c7e48-117">**Noms des tâches dans le projet d'intégration de données :**</span><span class="sxs-lookup"><span data-stu-id="c7e48-117">**Names of the tasks in the Data integration project:**</span></span>

    - <span data-ttu-id="c7e48-118">OrderHeader</span><span class="sxs-lookup"><span data-stu-id="c7e48-118">OrderHeader</span></span>
    - <span data-ttu-id="c7e48-119">OrderLine</span><span class="sxs-lookup"><span data-stu-id="c7e48-119">OrderLine</span></span>

<span data-ttu-id="c7e48-120">Les tâches suivantes de synchronisation sont requises avant que la synchronisation des en-têtes et des lignes de factures client puisse avoir lieu :</span><span class="sxs-lookup"><span data-stu-id="c7e48-120">The following synchronization tasks are required before synchronization of sales invoice headers and lines can occur:</span></span>

- <span data-ttu-id="c7e48-121">Produits (entre Fin and Ops et Sales) - Direct</span><span class="sxs-lookup"><span data-stu-id="c7e48-121">Products (Fin and Ops to Sales) - Direct</span></span>
- <span data-ttu-id="c7e48-122">Comptes (entre Sales et Fin and Ops) - Direct (en cas d'utilisation)</span><span class="sxs-lookup"><span data-stu-id="c7e48-122">Accounts (Sales to Fin and Ops) - Direct (if used)</span></span>
- <span data-ttu-id="c7e48-123">Contacts vers Clients (entre Sales et Fin and Ops) - Direct (en cas d'utilisation)</span><span class="sxs-lookup"><span data-stu-id="c7e48-123">Contacts to Customers (Sales to Fin and Ops) - Direct (if used)</span></span>

## <a name="entity-set"></a><span data-ttu-id="c7e48-124">Ensemble d'entités</span><span class="sxs-lookup"><span data-stu-id="c7e48-124">Entity set</span></span>

| <span data-ttu-id="c7e48-125">Finance and Operations</span><span class="sxs-lookup"><span data-stu-id="c7e48-125">Finance and Operations</span></span>  | <span data-ttu-id="c7e48-126">Vente</span><span class="sxs-lookup"><span data-stu-id="c7e48-126">Sales</span></span>             |
|-------------------------|-------------------|
| <span data-ttu-id="c7e48-127">En-têtes de commande client CDS</span><span class="sxs-lookup"><span data-stu-id="c7e48-127">CDS sales order headers</span></span> | <span data-ttu-id="c7e48-128">SalesOrders</span><span class="sxs-lookup"><span data-stu-id="c7e48-128">SalesOrders</span></span>       |
| <span data-ttu-id="c7e48-129">Lignes de commande client CDS</span><span class="sxs-lookup"><span data-stu-id="c7e48-129">CDS sales order lines</span></span>   | <span data-ttu-id="c7e48-130">SalesOrderDetails</span><span class="sxs-lookup"><span data-stu-id="c7e48-130">SalesOrderDetails</span></span> |

## <a name="entity-flow"></a><span data-ttu-id="c7e48-131">Flux d'entité</span><span class="sxs-lookup"><span data-stu-id="c7e48-131">Entity flow</span></span>

<span data-ttu-id="c7e48-132">Les commandes client sont créées dans Sales et synchronisées avec Finance and Operations lorsque **Exécuter le projet** est déclenché pour un projet basé sur le modèle **Commandes client (entre Sales et Fin and Ops) - Direct**.</span><span class="sxs-lookup"><span data-stu-id="c7e48-132">Sales orders are created in Sales and synchronized to Finance and Operations when **Run project** is triggered for a project based on the **Sales Orders (Sales to Fin and Ops) - Direct** template.</span></span> <span data-ttu-id="c7e48-133">Vous pouvez uniquement activer et synchroniser des commandes client à partir de Sales uniquement si tous les **Produits de la commande** se composent entièrement de produits gérés en externe.</span><span class="sxs-lookup"><span data-stu-id="c7e48-133">You can only activate and synchronize orders from Sales if all **Order Products** consist of products that are externally maintained.</span></span> <span data-ttu-id="c7e48-134">Par conséquent, il ne peut y avoir aucun produit hors catalogue.</span><span class="sxs-lookup"><span data-stu-id="c7e48-134">Therefore, there can be no write-in products.</span></span> <span data-ttu-id="c7e48-135">Une fois que la commande est activée, la commande client passe en lecture seule dans l'interface utilisateur (UI).</span><span class="sxs-lookup"><span data-stu-id="c7e48-135">After the order is activated, the sales order becomes read-only in the user interface (UI).</span></span> <span data-ttu-id="c7e48-136">À ce stade, les mises à jour sont effectuées à partir de Finance and Operations.</span><span class="sxs-lookup"><span data-stu-id="c7e48-136">At that point, the updates are made from Finance and Operations.</span></span> <span data-ttu-id="c7e48-137">Une fois qu'une commande client a un statut **Confirmé**, le projet basé sur le modèle **Commandes client (entre Fin and Ops et Sales) - Direct** peut être utilisé pour synchroniser toutes les mises à jour ou le statut d'exécution entre Finance and Operations et Sales.</span><span class="sxs-lookup"><span data-stu-id="c7e48-137">After the sales order has a status of **Confirmed**, the a project based on the **Sales Orders (Fin and Ops to Sales) - Direct** template can be used to synchronize updates or fulfillment status from Finance and Operations to Sales.</span></span>

<span data-ttu-id="c7e48-138">Vous n'avez pas à créer de commandes dans Sales.</span><span class="sxs-lookup"><span data-stu-id="c7e48-138">You don't have to create orders in Sales.</span></span> <span data-ttu-id="c7e48-139">Vous pouvez les créer dans Finance and Operations à la place.</span><span class="sxs-lookup"><span data-stu-id="c7e48-139">You can create new sales orders in Finance and Operations instead.</span></span> <span data-ttu-id="c7e48-140">Une fois qu'une commande client a un statut **Confirmé**, elle est synchronisée avec Sales comme indiqué dans le paragraphe précédent.</span><span class="sxs-lookup"><span data-stu-id="c7e48-140">After a sales order has a status of **Confirmed**, it's synchronized to Sales as described in the previous paragraph.</span></span>

<span data-ttu-id="c7e48-141">Dans Finance and Operations, les filtres du modèle permettent de garantir que seules les commandes client appropriées sont incluses dans la synchronisation :</span><span class="sxs-lookup"><span data-stu-id="c7e48-141">In Finance and operations, filters in the template help guarantee that only the relevant sales orders are included in the synchronization:</span></span>

- <span data-ttu-id="c7e48-142">Sur la commande client, la commande et la facturation client doivent provenir de Sales pour être incluses dans la synchronisation.</span><span class="sxs-lookup"><span data-stu-id="c7e48-142">On the sales order, both the ordering customer and the invoicing customer have to originate from Sales to be included in the synchronization.</span></span> <span data-ttu-id="c7e48-143">Dans Finance and Operations, les champs **OrderingCustomerIsExternallyMaintained** et **InvoiceCustomerIsExternallyMaintained** sont utilisés pour filtrer les commandes client à partir des entités de données.</span><span class="sxs-lookup"><span data-stu-id="c7e48-143">In Finance and Operations, the **OrderingCustomerIsExternallyMaintained** and **InvoiceCustomerIsExternallyMaintained** fields are used to filter sales orders from the data entities.</span></span>
- <span data-ttu-id="c7e48-144">La commande client dans Finance and Operations doit être confirmée.</span><span class="sxs-lookup"><span data-stu-id="c7e48-144">The sales order in Finance and Operations must be confirmed.</span></span> <span data-ttu-id="c7e48-145">Seules les commandes client confirmées ou les commandes client dont le statut de traitement le plus élevé, par exemple, **Livré** ou **Facturé**, sont synchronisées avec Sales.</span><span class="sxs-lookup"><span data-stu-id="c7e48-145">Only confirmed sales orders or sales orders that have a higher processing status, such as **Shipped** or **Invoiced**, are synchronized to Sales.</span></span>
- <span data-ttu-id="c7e48-146">Après avoir créé ou modifié une commande client, le traitement par lots **Calcule les totaux de vente** dans Finance and Operations doit être exécuté.</span><span class="sxs-lookup"><span data-stu-id="c7e48-146">After a sales order is created or modified, the **Calculate sales totals** batch job in Finance and Operations must be run.</span></span> <span data-ttu-id="c7e48-147">Seules les commandes client où les totaux de vente sont calculés seront synchronisées avec Sales.</span><span class="sxs-lookup"><span data-stu-id="c7e48-147">Only sales orders where sales totals are calculated will be synchronized to Sales.</span></span>

## <a name="freight-tax"></a><span data-ttu-id="c7e48-148">Taxe relative au transport</span><span class="sxs-lookup"><span data-stu-id="c7e48-148">Freight tax</span></span>

<span data-ttu-id="c7e48-149">Sales ne prend pas en charge la taxe au niveau de l'en-tête, car la taxe est enregistrée au niveau de la ligne.</span><span class="sxs-lookup"><span data-stu-id="c7e48-149">Sales doesn't support tax at the header level, because tax is stored at the line level.</span></span> <span data-ttu-id="c7e48-150">Pour prendre en charge la taxe au niveau de l'en-tête à partir de Finance and Operations, comme la taxe sur le transport, le système synchronise la taxe avec Sales comme un produit hors catalogue appelé **Taxe de transport**, et le montant de sa taxe provient de Finance and Operations..</span><span class="sxs-lookup"><span data-stu-id="c7e48-150">To support tax at the header level from Finance and Operations, such as tax on freight, the system synchronizes tax to Sales as a write-in product that is named **Freight Tax**, and that has the tax amount from Finance and Operations.</span></span> <span data-ttu-id="c7e48-151">Ainsi, le calcul standard du prix dans Sales peut être utilisé pour les totaux, même s'il existe une taxe au niveau de l'en-tête à partir de Finance and Operations.</span><span class="sxs-lookup"><span data-stu-id="c7e48-151">In this way, the standard price calculation in Sales can be used for totals, even when there is tax at the header level from Finance and Operations.</span></span>

## <a name="discount-calculation-and-rounding"></a><span data-ttu-id="c7e48-152">Calcul et arrondi de la remise</span><span class="sxs-lookup"><span data-stu-id="c7e48-152">Discount calculation and rounding</span></span>

<span data-ttu-id="c7e48-153">Le modèle de calcul de la remise dans Sales diffère du modèle de calcul de la remise dans Finance and Operations.</span><span class="sxs-lookup"><span data-stu-id="c7e48-153">The discount calculation model in Sales differs from the discount calculation model in Finance and Operations.</span></span> <span data-ttu-id="c7e48-154">Dans Finance and Operations, le montant de remise final sur une ligne de vente peut être le résultat d'une combinaison des montants de remise et des pourcentages de remise.</span><span class="sxs-lookup"><span data-stu-id="c7e48-154">In Finance and Operations, the final discount amount on a sales line can be the result of a combination of discount amounts and discount percentages.</span></span> <span data-ttu-id="c7e48-155">Si ce montant de remise final est divisé par la quantité de la ligne, un arrondi peut se produire.</span><span class="sxs-lookup"><span data-stu-id="c7e48-155">If this final discount amount is divided by the quantity on the line, rounding can occur.</span></span> <span data-ttu-id="c7e48-156">Toutefois, cet arrondi n'est pas pris en considération si un montant de la remise Par unité qui est arrondi est synchronisé avec Sales.</span><span class="sxs-lookup"><span data-stu-id="c7e48-156">However, this rounding isn't considered if a rounded per-unit discount amount is synchronized to Sales.</span></span> <span data-ttu-id="c7e48-157">Pour vous assurer que le montant de remise total d'une ligne de vente dans Finance and Operations soit synchronisé correctement avec Sales, le montant total doit être synchronisé sans être divisé par la quantité de ligne.</span><span class="sxs-lookup"><span data-stu-id="c7e48-157">To help guarantee that the full discount amount from a sales line in Finance and Operations is correctly synchronized to Sales, the full amount must be synchronized without being divided by the line quantity.</span></span> <span data-ttu-id="c7e48-158">Par conséquent, vous devez définir le champ **Mode de calcul de remise** sur **Ligne article** dans Sales.</span><span class="sxs-lookup"><span data-stu-id="c7e48-158">Therefore, you must define the **Discount calculation method** as **Line item** in Sales.</span></span>

<span data-ttu-id="c7e48-159">Lorsqu'une ligne de commande client est synchronisée entre Sales et Finance and Operations, le montant de remise total est utilisé.</span><span class="sxs-lookup"><span data-stu-id="c7e48-159">When a sales order line is synchronized from Sales to Finance and Operations, the full line discount amount is used.</span></span> <span data-ttu-id="c7e48-160">Comme Finance and Operations n'a pas de champ pouvant enregistrer le montant de remise total pour une ligne, le montant est divisé par la quantité et enregistré dans le champ **Remise ligne**.</span><span class="sxs-lookup"><span data-stu-id="c7e48-160">Because Finance and Operations has no field that can store the full discount amount for a line, the amount is divided by the quantity and stored in the **Line discount** field.</span></span> <span data-ttu-id="c7e48-161">L'arrondi qui survient dans cette division est stocké dans le champ **Frais de vente** sur la ligne de vente.</span><span class="sxs-lookup"><span data-stu-id="c7e48-161">Any rounding that occurs in this division is stored in the **Sales charges** field on the sales line.</span></span>

### <a name="example"></a><span data-ttu-id="c7e48-162">Exemple</span><span class="sxs-lookup"><span data-stu-id="c7e48-162">Example</span></span>

<span data-ttu-id="c7e48-163">**Synchronisation entre Sales et Finance and Operations**</span><span class="sxs-lookup"><span data-stu-id="c7e48-163">**Synchronization from Sales to Finance and Operations**</span></span>

- <span data-ttu-id="c7e48-164">**Sales :** Quantité = 3, remise par ligne = 10,00 €</span><span class="sxs-lookup"><span data-stu-id="c7e48-164">**Sales:** Quantity = 3, per-line discount = $10.00</span></span>
- <span data-ttu-id="c7e48-165">**Finance and Operations :** Quantité = 3, montant de remise ligne = 3,33 €, frais de vente = -0,01 €</span><span class="sxs-lookup"><span data-stu-id="c7e48-165">**Finance and Operations:** Quantity = 3, line discount amount = $3.33, sales charge = -$0.01</span></span> 

<span data-ttu-id="c7e48-166">**Synchronisation entre Finance and Operations et Sales**</span><span class="sxs-lookup"><span data-stu-id="c7e48-166">**Synchronization from Finance and Operations to Sales**</span></span>

- <span data-ttu-id="c7e48-167">**Finance and Operations :** Quantité = 3, montant de remise ligne = 3,33 €, frais de vente = -0,01 €</span><span class="sxs-lookup"><span data-stu-id="c7e48-167">**Finance and Operations:** Quantity = 3, line discount amount = $3.33, sales charge = -$0.01</span></span>
- <span data-ttu-id="c7e48-168">**Sales :** Quantité = 3, remise par ligne = (3 × 3,33 €) + 0,01 € = 10,00 €</span><span class="sxs-lookup"><span data-stu-id="c7e48-168">**Sales:** Quantity = 3, per-line discount = (3 × $3.33) + $0.01 = $10.00</span></span>

## <a name="prospect-to-cash-solution-for-sales"></a><span data-ttu-id="c7e48-169">Prospect pour une solution de disponibilités pour Sales</span><span class="sxs-lookup"><span data-stu-id="c7e48-169">Prospect to cash solution for Sales</span></span>

<span data-ttu-id="c7e48-170">De nouveaux champs sont ajoutés à l'entité **Commande** et s'affichent sur la page :</span><span class="sxs-lookup"><span data-stu-id="c7e48-170">New fields have been added to the **Order** entity and appear on the page:</span></span>

- <span data-ttu-id="c7e48-171">**Est conservé en externe** - Définissez cette option sur **Oui** lorsque la commande provient de Finance and Operations.</span><span class="sxs-lookup"><span data-stu-id="c7e48-171">**Is Maintained Externally** – Set this option to **Yes** when the order is coming from Finance and Operations.</span></span>
- <span data-ttu-id="c7e48-172">**Statut de traitement** - Ce champ affiche le statut de traitement de la commande dans Finance and Operations.</span><span class="sxs-lookup"><span data-stu-id="c7e48-172">**Processing status** – This field shows the processing status of the order in Finance and Operations.</span></span> <span data-ttu-id="c7e48-173">Les valeurs disponibles sont les suivantes :</span><span class="sxs-lookup"><span data-stu-id="c7e48-173">The following values are available:</span></span>

    - <span data-ttu-id="c7e48-174">**Brouillon** – Statut initial lorsqu'une commande est créée dans Sales.</span><span class="sxs-lookup"><span data-stu-id="c7e48-174">**Draft** – The initial status when an order is created in Sales.</span></span> <span data-ttu-id="c7e48-175">Dans Sales, seules les commandes ayant ce statut de traitement peuvent être modifiées.</span><span class="sxs-lookup"><span data-stu-id="c7e48-175">In Sales, only orders with this processing status can be edited.</span></span>
    - <span data-ttu-id="c7e48-176">**Actif** – Statut une fois que la commande est activée dans Sales à l'aide du bouton **Activer**.</span><span class="sxs-lookup"><span data-stu-id="c7e48-176">**Active** – The status after the order is activated in Sales by using the **Activate** button.</span></span>
    - <span data-ttu-id="c7e48-177">**Confirmée**</span><span class="sxs-lookup"><span data-stu-id="c7e48-177">**Confirmed**</span></span>
    - <span data-ttu-id="c7e48-178">**Bon de livraison**</span><span class="sxs-lookup"><span data-stu-id="c7e48-178">**Packing Slip**</span></span>
    - <span data-ttu-id="c7e48-179">**Facturé**</span><span class="sxs-lookup"><span data-stu-id="c7e48-179">**Invoiced**</span></span>
    - <span data-ttu-id="c7e48-180">**Prélevé**</span><span class="sxs-lookup"><span data-stu-id="c7e48-180">**Picked**</span></span>
    - <span data-ttu-id="c7e48-181">**Partiellement prélevé**</span><span class="sxs-lookup"><span data-stu-id="c7e48-181">**Partially Picked**</span></span>
    - <span data-ttu-id="c7e48-182">**Partiellement emballé**</span><span class="sxs-lookup"><span data-stu-id="c7e48-182">**Partially Packed**</span></span>
    - <span data-ttu-id="c7e48-183">**Expédié**</span><span class="sxs-lookup"><span data-stu-id="c7e48-183">**Shipped**</span></span>
    - <span data-ttu-id="c7e48-184">**Partiellement expédié**</span><span class="sxs-lookup"><span data-stu-id="c7e48-184">**Partially Shipped**</span></span>
    - <span data-ttu-id="c7e48-185">**Partiellement facturé**</span><span class="sxs-lookup"><span data-stu-id="c7e48-185">**Partially Invoiced**</span></span>
    - <span data-ttu-id="c7e48-186">**Annulé**</span><span class="sxs-lookup"><span data-stu-id="c7e48-186">**Cancelled**</span></span>

<span data-ttu-id="c7e48-187">Le paramètre **A des produits mis à jour en externe uniquement** est utilisé durant l'activation de la commande pour effectuer le suivi uniformément si une commande client se compose entièrement de produits gérés en externe.</span><span class="sxs-lookup"><span data-stu-id="c7e48-187">The **Has Externally Maintained Products Only** setting is used during order activation to consistently track whether a sales order consists entirely of externally maintained products.</span></span> <span data-ttu-id="c7e48-188">Si une commande client se compose uniquement des produits gérés en externe, les produits sont mis à jour dans Finance and Operations.</span><span class="sxs-lookup"><span data-stu-id="c7e48-188">If a sales order consists entirely of externally maintained products, the products are maintained in Finance and Operations.</span></span> <span data-ttu-id="c7e48-189">Ceci permet de garantir que vous ne tenterez pas d'activer et de synchroniser les lignes de commandes client ayant des produits qui sont inconnus de Finance and Operations.</span><span class="sxs-lookup"><span data-stu-id="c7e48-189">This setting helps guarantee that you don't activate and try to synchronize sales order lines that have products that are unknown to Finance and Operations.</span></span>

<span data-ttu-id="c7e48-190">Les boutons **Créer une facture**, **Annuler la commande**, **Recalculer**, **Obtenir des produits** et **Adresse de recherche** sur la page **Commande client** sont masqués pour les commandes gérées en externe, car les factures sont créées dans Finance and Operations et synchronisées avec Sales.</span><span class="sxs-lookup"><span data-stu-id="c7e48-190">The **Create Invoice**, **Cancel Order**, **Recalculate**, **Get Products**, and **Lookup Address** buttons on the **Sales order** page are hidden for externally maintained orders, because invoices will be created in Finance and Operations and synchronized to Sales.</span></span> <span data-ttu-id="c7e48-191">Ces commandes ne peuvent pas être modifiées, car les informations de commande client sont synchronisées à partir de Finance and Operations après cette activation.</span><span class="sxs-lookup"><span data-stu-id="c7e48-191">These orders can't be edited, because sales order information will be synchronized from Finance and Operations after activation.</span></span>

<span data-ttu-id="c7e48-192">Le statut d'une commande client restera **Actif** pour garantir que les modifications effectuées dans Finance and Operations peuvent être répercutées dans la commande client avec Sales.</span><span class="sxs-lookup"><span data-stu-id="c7e48-192">The sales order status will remain **Active** to help guarantee that changes from Finance and Operations can flow to the sales order in Sales.</span></span> <span data-ttu-id="c7e48-193">Cette opération est contrôlée en définissant le paramètre par défaut **Statecode \[Statut\]** sur **Actif** dans le projet d'intégration de données.</span><span class="sxs-lookup"><span data-stu-id="c7e48-193">To control this behavior, set the default **Statecode \[Status\]** value to **Active** in the Data integration project.</span></span>

## <a name="preconditions-and-mapping-setup"></a><span data-ttu-id="c7e48-194">Conditions préalables et paramétrage de mise en correspondance</span><span class="sxs-lookup"><span data-stu-id="c7e48-194">Preconditions and mapping setup</span></span>

<span data-ttu-id="c7e48-195">Avant de synchroniser les commandes client, il est important de mettre les systèmes à jour avec le paramètre suivant :</span><span class="sxs-lookup"><span data-stu-id="c7e48-195">Before you synchronize sales orders, it's important that you update the following settings in the systems.</span></span>

### <a name="setup-in-sales"></a><span data-ttu-id="c7e48-196">Configuration dans Sales</span><span class="sxs-lookup"><span data-stu-id="c7e48-196">Setup in Sales</span></span>

- <span data-ttu-id="c7e48-197">Vérifiez que les autorisations sont bien définies pour l'équipe à laquelle l'utilisateur est affecté (à partir de votre connexion dans Sales).</span><span class="sxs-lookup"><span data-stu-id="c7e48-197">Make sure that permissions are set up for the team that the user from your Sales connection set is assigned to.</span></span> <span data-ttu-id="c7e48-198">Si vous utilisez des données de démonstration, généralement l'utilisateur dispose de l'accès Administrateur, mais pas l'équipe.</span><span class="sxs-lookup"><span data-stu-id="c7e48-198">If you're using demo data, the user usually has admin access, but the team doesn't have admin access.</span></span> <span data-ttu-id="c7e48-199">Si l'équipe n'a pas accès d'administrateur lors de l'exécution du projet à partir de l'intégrateur de données, vous recevrez un message d'erreur indiquant que l'équipe principale est manquante.</span><span class="sxs-lookup"><span data-stu-id="c7e48-199">If the team doesn't have admin access, when you run the project from Data integration, you will receive an error message that states that the Principal team is missing.</span></span>

    <span data-ttu-id="c7e48-200">Allez dans **Paramètres** &gt; **Sécurité** &gt; **Équipes**, sélectionnez l'équipe appropriée, cliquez sur **Gestion des rôles**, puis sélectionnez un rôle avec les autorisations souhaitées, par exemple, celles d'**Administrateur système**.</span><span class="sxs-lookup"><span data-stu-id="c7e48-200">Go to **Settings** &gt; **Security** &gt; **Teams**, select the relevant team, select **Manage Roles**, and select a role that has the desired permissions, such as **System Administrator**.</span></span>

- <span data-ttu-id="c7e48-201">Pour garantir un calcul correct des remises dans Sales et Finance and Operations, **Mode de calcul de remise** doit être défini sur **Ligne**.</span><span class="sxs-lookup"><span data-stu-id="c7e48-201">To ensure correct calculation of discounts in both Sales and Finance and Operations **Discount calculation method** must be set to **Line item**.</span></span>
- <span data-ttu-id="c7e48-202">Allez dans **Paramètres** &gt; **Administration** &gt; **Paramètres système** &gt; **Sales**, et assurez-vous que les paramètres suivants sont utilisés :</span><span class="sxs-lookup"><span data-stu-id="c7e48-202">Go to **Settings** &gt; **Administration** &gt; **System settings** &gt; **Sales**, and make sure that the following settings are used:</span></span>

    - <span data-ttu-id="c7e48-203">L'option **Utiliser le système de calcul du prix du système** est définie **Oui**.</span><span class="sxs-lookup"><span data-stu-id="c7e48-203">The **Use system prizing calculation system** option is set to **Yes**.</span></span>
    - <span data-ttu-id="c7e48-204">Le champ **Mode de calcul de remise** est défini sur **Ligne article**.</span><span class="sxs-lookup"><span data-stu-id="c7e48-204">The **Discount calculation method** field is set to **Line item**.</span></span>

### <a name="setup-in-finance-and-operations"></a><span data-ttu-id="c7e48-205">Configuration dans Finance and Operations</span><span class="sxs-lookup"><span data-stu-id="c7e48-205">Setup in Finance and Operations</span></span>

- <span data-ttu-id="c7e48-206">Allez dans **Ventes et marketing** &gt; **Tâches périodiques** &gt; **Calcule les totaux de vente**, et configurez la tâche pour qu'elle s'exécute comme un traitement par lots.</span><span class="sxs-lookup"><span data-stu-id="c7e48-206">Go to **Sales and marketing** &gt; **Periodic tasks** &gt; **Calculate sales totals**, and set the job to run as a batch job.</span></span> <span data-ttu-id="c7e48-207">Définissez l'option **Calculer les totaux des commandes client** sur **Oui**.</span><span class="sxs-lookup"><span data-stu-id="c7e48-207">Set the **Calculate totals for sales orders** option to **Yes**.</span></span> <span data-ttu-id="c7e48-208">Cette étape est importante, car seules les commandes client où les totaux de vente ont été calculés sont synchronisées avec Sales.</span><span class="sxs-lookup"><span data-stu-id="c7e48-208">This step is important, because only sales orders where sales totals are calculated will be synchronized to Sales.</span></span> <span data-ttu-id="c7e48-209">La fréquence du traitement par lots doit être alignée avec la fréquence de la synchronisation des commandes client.</span><span class="sxs-lookup"><span data-stu-id="c7e48-209">The frequency of the batch job should be aligned with the frequency of sales order synchronization.</span></span>

<span data-ttu-id="c7e48-210">Si vous utilisez également l'intégration de l'ordre d'exécution, vous devez paramétrer l'origine des ventes.</span><span class="sxs-lookup"><span data-stu-id="c7e48-210">If you also use work order integration, you need to set up the sales origin.</span></span> <span data-ttu-id="c7e48-211">L'origine des ventes utilisée pour distinguer les commandes client de Finance and Operations créées à partir d'ordres d'exécution de Field Service.</span><span class="sxs-lookup"><span data-stu-id="c7e48-211">The sales origin is used to distinguish sales orders in Finance and Operations that were created from work orders in Field Service.</span></span> <span data-ttu-id="c7e48-212">Lorsqu'une commande client a pour origine le type **Intégration de l'ordre d'exécution**, le champ **Statut de l'ordre d'exécution externe** apparaît dans l'en-tête de la commande client.</span><span class="sxs-lookup"><span data-stu-id="c7e48-212">When a sales order has a sales origin of the **Work order integration** type, the **External work order status** field appears on the sales order header.</span></span> <span data-ttu-id="c7e48-213">En outre, l'origine des ventes permet de s'assurer que les commandes client créées à partir d'ordres d'exécution dans Field Service sont filtrées lors de la synchronisation des commandes client entre Finance and Operations et Field Service.</span><span class="sxs-lookup"><span data-stu-id="c7e48-213">Additionally, the sales origin ensures that sales orders that were created from work orders in Field Service are filtered out during sales order synchronization from Finance and Operations to Field Service.</span></span>

1. <span data-ttu-id="c7e48-214">Allez à **Ventes et marketing** \> **Paramétrage** \> **Commandes client** \> **Origine des ventes**.</span><span class="sxs-lookup"><span data-stu-id="c7e48-214">Go to **Sales and marketing** \> **Setup** \> **Sales orders** \> **Sales origin**.</span></span>
2. <span data-ttu-id="c7e48-215">Sélectionnez **Nouveau** pour créer une origine des ventes.</span><span class="sxs-lookup"><span data-stu-id="c7e48-215">Select **New** to create a new sales origin.</span></span>
3. <span data-ttu-id="c7e48-216">Dans le champ **Origine des ventes**, entrez un nom pour l'origine des ventes, par exemple **SalesOrder**.</span><span class="sxs-lookup"><span data-stu-id="c7e48-216">In the **Sales origin** field, enter a name for the sales origin, such as **SalesOrder**.</span></span>
4. <span data-ttu-id="c7e48-217">Dans le champ **Description**, entrez une description, comme **Commande client des ventes**.</span><span class="sxs-lookup"><span data-stu-id="c7e48-217">In the **Description** field, enter a description, such as **Sales Order from Sales**.</span></span>
5. <span data-ttu-id="c7e48-218">Activez la case à cocher **Affectation du type d'origine**.</span><span class="sxs-lookup"><span data-stu-id="c7e48-218">Select the **Origin type assignment** check box.</span></span>
6. <span data-ttu-id="c7e48-219">Définissez le champ **Type d'origine des ventes** sur **Intégration de la commande client**.</span><span class="sxs-lookup"><span data-stu-id="c7e48-219">Set the **Sales origin type** field to **Sales order integration**.</span></span>
7. <span data-ttu-id="c7e48-220">Sélectionnez **Enregistrer**.</span><span class="sxs-lookup"><span data-stu-id="c7e48-220">Select **Save**.</span></span>

### <a name="setup-in-the-sales-orders-sales-to-fin-and-ops---direct-data-integration-project"></a><span data-ttu-id="c7e48-221">Configuration dans les commandes client (entre Sales et Fin and Ops) - projet d'intégration Direct Data</span><span class="sxs-lookup"><span data-stu-id="c7e48-221">Setup in the Sales Orders (Sales to Fin and Ops) - Direct Data integration project</span></span>

- <span data-ttu-id="c7e48-222">Assurez-vous que la mise en correspondance nécessaire existe pour **Shipto\_country** avec **DeliveryAddressCountryRegionISOCode**.</span><span class="sxs-lookup"><span data-stu-id="c7e48-222">Make sure that the required mapping exists for **Shipto\_country** to **DeliveryAddressCountryRegionISOCode**.</span></span> <span data-ttu-id="c7e48-223">Vous pouvez laisser une valeur par défaut vide dans la mise en correspondance des valeurs pour éviter d'avoir à entrer le pays pour des commandes nationales.</span><span class="sxs-lookup"><span data-stu-id="c7e48-223">You can make blank a default value in the value map to avoid having to type country for national orders.</span></span> <span data-ttu-id="c7e48-224">Laissez le côté gauche vide, puis définissez le côté droit sur le pays ou la région souhaité(e).</span><span class="sxs-lookup"><span data-stu-id="c7e48-224">Set the left side to 'Blank', and set the right side to the desired country or region.</span></span>

    <span data-ttu-id="c7e48-225">La valeur du modèle est une mise en correspondance des valeurs où plusieurs pays ou régions sont mis en correspondance, et où vide = US.</span><span class="sxs-lookup"><span data-stu-id="c7e48-225">The template value is a value map where several countries or regions are mapped, and where 'Blank' = US.</span></span>

### <a name="setup-in-the-sales-orders-fin-and-ops-to-sales---direct-data-integration-project"></a><span data-ttu-id="c7e48-226">Configuration dans les commandes client (entre Fin and Ops et Sales) - projet d'intégration Direct Data</span><span class="sxs-lookup"><span data-stu-id="c7e48-226">Setup in the Sales Orders (Fin and Ops to Sales) - Direct Data integration project</span></span>

#### <a name="salesheader-task"></a><span data-ttu-id="c7e48-227">Tâche SalesHeader</span><span class="sxs-lookup"><span data-stu-id="c7e48-227">SalesHeader task</span></span>

- <span data-ttu-id="c7e48-228">Un tarif est requis pour créer des commandes dans Sales.</span><span class="sxs-lookup"><span data-stu-id="c7e48-228">A price list is required in order to create orders in Sales.</span></span> <span data-ttu-id="c7e48-229">Mettez à jour la mise en correspondance de la valeur pour **pricelevelid.name \[Nom des tarifs\]** sur la liste des prix utilisée dans Sales par devise.</span><span class="sxs-lookup"><span data-stu-id="c7e48-229">Update the value map for **pricelevelid.name \[Price List Name\]** to the price list that is used in Sales per currency.</span></span> <span data-ttu-id="c7e48-230">Vous pouvez utiliser le tarif par défaut pour une seule devise.</span><span class="sxs-lookup"><span data-stu-id="c7e48-230">You can use the default price list for a single currency.</span></span> <span data-ttu-id="c7e48-231">Sinon, si vous avez un tarif dans plusieurs devises, vous pouvez utiliser une mise en correspondance des valeurs.</span><span class="sxs-lookup"><span data-stu-id="c7e48-231">Alternatively, if you have price lists in multiple currencies, you can use a value map.</span></span>

    <span data-ttu-id="c7e48-232">La valeur de modèle par défaut pour **pricelevelid.name \[Nom des tarifs\]** est le **service CRM USA (exemple)**.</span><span class="sxs-lookup"><span data-stu-id="c7e48-232">The default template value for **pricelevelid.name \[Price List Name\]** is **CRM Service USA (sample)**.</span></span>

#### <a name="salesline-task"></a><span data-ttu-id="c7e48-233">Tâche SalesLine</span><span class="sxs-lookup"><span data-stu-id="c7e48-233">SalesLine task</span></span>

- <span data-ttu-id="c7e48-234">Assurez-vous que la mise en correspondance des valeurs requise pour **SalesUnitSymbol** dans Finance and Operations existe.</span><span class="sxs-lookup"><span data-stu-id="c7e48-234">Make sure that the required value map for **SalesUnitSymbol** in Finance and Operations exists.</span></span>
- <span data-ttu-id="c7e48-235">Vérifiez que les unités nécessaires sont définies dans Sales.</span><span class="sxs-lookup"><span data-stu-id="c7e48-235">Make sure that the required units are defined in Sales.</span></span>

    <span data-ttu-id="c7e48-236">Une valeur de modèle ayant une mise en correspondance des valeurs est définie pour **SalesUnitSymbol** sur **oumid.name**.</span><span class="sxs-lookup"><span data-stu-id="c7e48-236">A template value that has a value map is defined for **SalesUnitSymbol** to **oumid.name**.</span></span>

## <a name="template-mapping-in-data-integration"></a><span data-ttu-id="c7e48-237">Mise en correspondance de modèles dans l'intégration de données</span><span class="sxs-lookup"><span data-stu-id="c7e48-237">Template mapping in Data integration</span></span>

> [!NOTE]
> <span data-ttu-id="c7e48-238">Les champs **Conditions de paiement**, **Conditions de transport**, **Conditions de livraison**, **Méthode d'expédition** et **Mode de distribution** ne font pas partie des mises en correspondance par défaut.</span><span class="sxs-lookup"><span data-stu-id="c7e48-238">The **Payment terms**, **Freight terms**, **Delivery terms**, **Shipping method**, and **Delivery mode** fields aren't part of the default mappings.</span></span> <span data-ttu-id="c7e48-239">Pour mettre en correspondance ces champs, vous devez paramétrer une mise en correspondance des valeurs spécifique aux données des organisations entre lesquelles l'entité est synchronisée.</span><span class="sxs-lookup"><span data-stu-id="c7e48-239">To map these fields, you must set up a value mapping that is specific to the data in the organizations that the entity is synchronized between.</span></span>

<span data-ttu-id="c7e48-240">Les illustrations suivantes présentent un exemple de modèle de mise en correspondance dans l'intégration de données.</span><span class="sxs-lookup"><span data-stu-id="c7e48-240">The following illustrations show an example of a template mapping in Data integration.</span></span>

> [!NOTE]
> <span data-ttu-id="c7e48-241">La mise en correspondance indique quelles informations du champ sont synchronisées entre Sales et Finance and Operations, ou entre Finance and Operations et Sales.</span><span class="sxs-lookup"><span data-stu-id="c7e48-241">The mapping shows which field information will be synchronized from Sales to Finance and Operations, or from Finance and Operations to Sales.</span></span>

### <a name="sales-orders-fin-and-ops-to-sales---direct-orderheader"></a><span data-ttu-id="c7e48-242">Commandes client (entre Fin and Ops et Sales) - Direct : OrderHeader</span><span class="sxs-lookup"><span data-stu-id="c7e48-242">Sales Orders (Fin and Ops to Sales) - Direct: OrderHeader</span></span>

<span data-ttu-id="c7e48-243">[![Mise en correspondance de modèles dans l'intégration de données](./media/sales-order-direct-template-mapping-data-integrator-1.png)](./media/sales-order-direct-template-mapping-data-integrator-1.png)</span><span class="sxs-lookup"><span data-stu-id="c7e48-243">[![Template mapping in Data integration](./media/sales-order-direct-template-mapping-data-integrator-1.png)](./media/sales-order-direct-template-mapping-data-integrator-1.png)</span></span>

### <a name="sales-orders-fin-and-ops-to-sales---direct-orderline"></a><span data-ttu-id="c7e48-244">Commandes client (entre Fin and Ops et Sales) - Direct : OrderLine</span><span class="sxs-lookup"><span data-stu-id="c7e48-244">Sales Orders (Fin and Ops to Sales) - Direct: OrderLine</span></span>

<span data-ttu-id="c7e48-245">[![Mise en correspondance de modèles dans l'intégration de données](./media/sales-order-direct-template-mapping-data-integrator-2.png)](./media/sales-order-direct-template-mapping-data-integrator-2.png)</span><span class="sxs-lookup"><span data-stu-id="c7e48-245">[![Template mapping in Data integration](./media/sales-order-direct-template-mapping-data-integrator-2.png)](./media/sales-order-direct-template-mapping-data-integrator-2.png)</span></span>

### <a name="sales-orders-sales-to-fin-and-ops---direct-orderheader"></a><span data-ttu-id="c7e48-246">Commandes client (entre Sales et Fin and Ops) - Direct : OrderHeader</span><span class="sxs-lookup"><span data-stu-id="c7e48-246">Sales Orders (Sales to Fin and Ops) - Direct: OrderHeader</span></span>

<span data-ttu-id="c7e48-247">[![Mise en correspondance de modèles dans l'intégration de données](./media/sales-order-direct-template-mapping-data-integrator-3.png)](./media/sales-order-direct-template-mapping-data-integrator-3.png)</span><span class="sxs-lookup"><span data-stu-id="c7e48-247">[![Template mapping in Data integration](./media/sales-order-direct-template-mapping-data-integrator-3.png)](./media/sales-order-direct-template-mapping-data-integrator-3.png)</span></span>

### <a name="sales-orders-sales-to-fin-and-ops---direct-orderline"></a><span data-ttu-id="c7e48-248">Commandes client (entre Sales et Fin and Ops) - Direct : OrderLine</span><span class="sxs-lookup"><span data-stu-id="c7e48-248">Sales Orders (Sales to Fin and Ops) - Direct: OrderLine</span></span>

<span data-ttu-id="c7e48-249">[![Mise en correspondance de modèles dans l'intégration de données](./media/sales-order-direct-template-mapping-data-integrator-4.png)](./media/sales-order-direct-template-mapping-data-integrator-4.png)</span><span class="sxs-lookup"><span data-stu-id="c7e48-249">[![Template mapping in Data integration](./media/sales-order-direct-template-mapping-data-integrator-4.png)](./media/sales-order-direct-template-mapping-data-integrator-4.png)</span></span>

## <a name="related-topics"></a><span data-ttu-id="c7e48-250">Rubriques connexes</span><span class="sxs-lookup"><span data-stu-id="c7e48-250">Related topics</span></span>

[<span data-ttu-id="c7e48-251">Prospect en disponibilités</span><span class="sxs-lookup"><span data-stu-id="c7e48-251">Prospect to cash</span></span>](prospect-to-cash.md)
