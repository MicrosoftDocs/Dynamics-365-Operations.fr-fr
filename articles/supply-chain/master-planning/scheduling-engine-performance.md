---
title: Améliorer les performances du moteur de planification
description: Cette rubrique fournit des informations sur le moteur de planification et la manière d’améliorer ses performances.
author: ChristianRytt
ms.date: 09/03/2020
ms.topic: article
ms.prod: ''
ms.technology: ''
ms.search.form: ''
audience: Application User
ms.reviewer: kamaybac
ms.custom: 19311
ms.assetid: 5ffb1486-2e08-4cdc-bd34-b47ae795ef0f
ms.search.region: Global
ms.search.industry: ''
ms.author: kamaybac
ms.search.validFrom: 2020-09-03
ms.dyn365.ops.version: ''
ms.openlocfilehash: d1378ae652ea70cba941316f4667052dcb05f717
ms.sourcegitcommit: 0e8db169c3f90bd750826af76709ef5d621fd377
ms.translationtype: HT
ms.contentlocale: fr-FR
ms.lasthandoff: 04/01/2021
ms.locfileid: "5812905"
---
# <a name="improve-scheduling-engine-performance"></a><span data-ttu-id="2ae34-103">Améliorer les performances du moteur de planification</span><span class="sxs-lookup"><span data-stu-id="2ae34-103">Improve scheduling engine performance</span></span>

[!include [banner](../includes/banner.md)]

<span data-ttu-id="2ae34-104">Le moteur de planification des ressources est utilisé lors de la planification des itinéraires pour les ordres de fabrication planifiés et lancés.</span><span class="sxs-lookup"><span data-stu-id="2ae34-104">The resource scheduling engine is used when scheduling routes for planned and released production orders.</span></span> <span data-ttu-id="2ae34-105">Ce moteur fut initialement publié dans le cadre de Dynamics AX 2012 et a subi plusieurs améliorations depuis sa sortie.</span><span class="sxs-lookup"><span data-stu-id="2ae34-105">The engine was originally released as part of Dynamics AX 2012 and has gone through several improvements since its release.</span></span>

<span data-ttu-id="2ae34-106">Le [problème de la planification des tâches à l’atelier](https://en.wikipedia.org/wiki/Job_shop_scheduling) est un problème combinatoire extrêmement complexe où le délai de résolution augmente de façon exponentielle avec le nombre de variables décisionnelles.</span><span class="sxs-lookup"><span data-stu-id="2ae34-106">The [job shop scheduling problem](https://en.wikipedia.org/wiki/Job_shop_scheduling) is an extremely complex combinatorial problem where solution time grows exponentially with the number of decision variables.</span></span> <span data-ttu-id="2ae34-107">Souvent, les clients configurent des itinéraires de production et les données associées d’une manière qui produit un problème de planification impossible à résoudre dans un délai raisonnable, même avec le matériel le plus moderne.</span><span class="sxs-lookup"><span data-stu-id="2ae34-107">Oftentimes, customers set up production routes and related data in a way that results in a scheduling problem that can't be solved in reasonable time even on the most modern hardware.</span></span> <span data-ttu-id="2ae34-108">Cette rubrique vous aidera à comprendre le moteur de planification et de quelle manière une configuration particulière peut influer sur les performances.</span><span class="sxs-lookup"><span data-stu-id="2ae34-108">This topic will help you understand the scheduling engine and how a specific setup can have influence on the performance.</span></span>

<span data-ttu-id="2ae34-109">Lorsqu’il s’agit d’améliorer les performances de la planification, les directives générales recommandent de réduire la complexité du problème que le moteur doit résoudre.</span><span class="sxs-lookup"><span data-stu-id="2ae34-109">When it comes to improving the performance of the scheduling, general guidelines recommend reducing the complexity of the problem the engine needs to solve.</span></span> <span data-ttu-id="2ae34-110">Certains des principaux facteurs qui peuvent affecter les performances sont notamment :</span><span class="sxs-lookup"><span data-stu-id="2ae34-110">Some of the main factors that can affect performance include:</span></span>

- <span data-ttu-id="2ae34-111">Les itinéraires comportant de nombreuses opérations</span><span class="sxs-lookup"><span data-stu-id="2ae34-111">Routes with many operations</span></span>
- <span data-ttu-id="2ae34-112">Les itinéraires comportant des opérations parallèles</span><span class="sxs-lookup"><span data-stu-id="2ae34-112">Routes with parallel operations</span></span>
- <span data-ttu-id="2ae34-113">Les opérations où la quantité des ressources est supérieure à un</span><span class="sxs-lookup"><span data-stu-id="2ae34-113">Operations with quantity of resources higher than one</span></span>
- <span data-ttu-id="2ae34-114">Les opérations avec de nombreuses ressources applicables</span><span class="sxs-lookup"><span data-stu-id="2ae34-114">Operations with many applicable resources</span></span>
- <span data-ttu-id="2ae34-115">L’utilisation de liens physiques</span><span class="sxs-lookup"><span data-stu-id="2ae34-115">Use of hard links</span></span>
- <span data-ttu-id="2ae34-116">L’utilisation d’une capacité finie</span><span class="sxs-lookup"><span data-stu-id="2ae34-116">Use of finite capacity</span></span>
- <span data-ttu-id="2ae34-117">Le nombre de calendriers différents utilisés</span><span class="sxs-lookup"><span data-stu-id="2ae34-117">The number of different calendars used</span></span>
- <span data-ttu-id="2ae34-118">Le nombre de plages horaires de travail quotidiennes dans le calendrier</span><span class="sxs-lookup"><span data-stu-id="2ae34-118">The number of working time slots per day in the calendar</span></span>
- <span data-ttu-id="2ae34-119">La durée totale de l’itinéraire</span><span class="sxs-lookup"><span data-stu-id="2ae34-119">Total duration of the route</span></span>
- <span data-ttu-id="2ae34-120">Exécution de plusieurs moteurs de planification en parallèle</span><span class="sxs-lookup"><span data-stu-id="2ae34-120">Running multiple scheduling engines in parallel</span></span>

## <a name="overview-of-basic-scheduling-flow"></a><span data-ttu-id="2ae34-121">Vue d’ensemble du flux de planification de base</span><span class="sxs-lookup"><span data-stu-id="2ae34-121">Overview of basic scheduling flow</span></span>

<span data-ttu-id="2ae34-122">Pour comprendre comment une configuration donnée peut affecter les performances, il est important de comprendre le déroulement du processus, à la fois à l’intérieur du moteur et dans le code X++ qui l’entoure.</span><span class="sxs-lookup"><span data-stu-id="2ae34-122">To understand how a given setup can affect performance, it is important to understand something about how the process flows, both inside the engine and in the X++ code that surrounds it.</span></span>

<span data-ttu-id="2ae34-123">Le processus basique de planification d’un ordre se compose de trois étapes principales :</span><span class="sxs-lookup"><span data-stu-id="2ae34-123">The basic process of scheduling an order consists of three main steps:</span></span>

- <span data-ttu-id="2ae34-124">**Chargement des données** - Ici, les modèles de données X++ sont transformés en modèle de données interne du moteur, sous forme de tâches et de contraintes.</span><span class="sxs-lookup"><span data-stu-id="2ae34-124">**Loading data** – Here, the X++ data models are transformed into the engine's internal data model in the form of jobs and constraints.</span></span>
- <span data-ttu-id="2ae34-125">**Planification** - Il s’agit de la principale source de planification qui traite le modèle et les contraintes donnés, et génère un résultat.</span><span class="sxs-lookup"><span data-stu-id="2ae34-125">**Scheduling** – This is the main source for scheduling that processes the given model and constraints, and generates a result.</span></span> <span data-ttu-id="2ae34-126">Au cours de ce processus, le moteur demandera des informations sur le temps de travail et les réservations de capacité existantes à X++ selon les besoins.</span><span class="sxs-lookup"><span data-stu-id="2ae34-126">During this process, the engine will request working time information and existing capacity reservations from X++ as needed.</span></span>
- <span data-ttu-id="2ae34-127">**Enregistrement des données** - Le résultat du moteur, sous forme de créneaux de réservation de capacité de travail, est traité par le code X++ pour enregistrer les réservations de capacité et mettre à jour les heures de début et de fin des tâches/opérations/ordres.</span><span class="sxs-lookup"><span data-stu-id="2ae34-127">**Save data** – The engine result in the form of job capacity reservation slots is processed by X++ code to save capacity reservations and update the start and end times of the jobs/operation/order.</span></span>

## <a name="load-data-into-the-engine"></a><span data-ttu-id="2ae34-128">Charger des données dans le moteur</span><span class="sxs-lookup"><span data-stu-id="2ae34-128">Load data into the engine</span></span>

<span data-ttu-id="2ae34-129">Le moteur de planification comporte un modèle de données plus abstrait que la base de données de Supply Chain Management, car il a été conçu comme un moteur générique capable de gérer différentes sources de données.</span><span class="sxs-lookup"><span data-stu-id="2ae34-129">The scheduling engine has a more abstract data model than the Supply Chain Management database because it has been built as a generic engine that can handle different sources of data.</span></span> <span data-ttu-id="2ae34-130">Les concepts d’itinéraire, d’opérations secondaires et de durée d’exécution doivent être « traduits » dans le modèle de travail et de contrainte générique que le moteur expose.</span><span class="sxs-lookup"><span data-stu-id="2ae34-130">The concepts of route, secondary operations, and run time need to be "translated" into the generic job and constraint model that the engine exposes.</span></span> <span data-ttu-id="2ae34-131">La logique de création du modèle comporte une part importante de logique métier et varie en fonction des données source.</span><span class="sxs-lookup"><span data-stu-id="2ae34-131">The logic for building the model has a significant amount of business logic to it and is different depending on the source data.</span></span> <span data-ttu-id="2ae34-132">La classe X++ responsable est `WrkCtrScheduler` ; elle comporte des classes dérivées pour les ordres de fabrication planifiés, les ordres de fabrication lancés et les prévisions de projet.</span><span class="sxs-lookup"><span data-stu-id="2ae34-132">The responsible X++ class is `WrkCtrScheduler` and it has derived classes for planned production orders, released production orders, and project forecasts.</span></span>

<span data-ttu-id="2ae34-133">À titre d’exemple, considérons un itinéraire indiqué dans le tableau et l’image suivants, qui semble relativement simple.</span><span class="sxs-lookup"><span data-stu-id="2ae34-133">As an example, consider a route shown in the following table and image, which seems relatively simple.</span></span>

| <span data-ttu-id="2ae34-134">N°</span><span class="sxs-lookup"><span data-stu-id="2ae34-134">Oper.</span></span> <span data-ttu-id="2ae34-135">Opér.</span><span class="sxs-lookup"><span data-stu-id="2ae34-135">No.</span></span> | <span data-ttu-id="2ae34-136">Priorité</span><span class="sxs-lookup"><span data-stu-id="2ae34-136">Priority</span></span> | <span data-ttu-id="2ae34-137">Temps de réglage</span><span class="sxs-lookup"><span data-stu-id="2ae34-137">Setup time</span></span> | <span data-ttu-id="2ae34-138">Temps d’exécution</span><span class="sxs-lookup"><span data-stu-id="2ae34-138">Run time</span></span> | <span data-ttu-id="2ae34-139">Temps d’attente après</span><span class="sxs-lookup"><span data-stu-id="2ae34-139">Queue time after</span></span> | <span data-ttu-id="2ae34-140">Quantité de ressources</span><span class="sxs-lookup"><span data-stu-id="2ae34-140">Quantity of resources</span></span> | <span data-ttu-id="2ae34-141">Suivant</span><span class="sxs-lookup"><span data-stu-id="2ae34-141">Next</span></span> |
| --- | --- | --- | --- | --- | --- | --- |
| <span data-ttu-id="2ae34-142">10</span><span class="sxs-lookup"><span data-stu-id="2ae34-142">10</span></span> | <span data-ttu-id="2ae34-143">Principal</span><span class="sxs-lookup"><span data-stu-id="2ae34-143">Primary</span></span> | <span data-ttu-id="2ae34-144">1.00</span><span class="sxs-lookup"><span data-stu-id="2ae34-144">1.00</span></span> | <span data-ttu-id="2ae34-145">2.00</span><span class="sxs-lookup"><span data-stu-id="2ae34-145">2.00</span></span> | | <span data-ttu-id="2ae34-146">1</span><span class="sxs-lookup"><span data-stu-id="2ae34-146">1</span></span> | <span data-ttu-id="2ae34-147">20</span><span class="sxs-lookup"><span data-stu-id="2ae34-147">20</span></span> |
| <span data-ttu-id="2ae34-148">10</span><span class="sxs-lookup"><span data-stu-id="2ae34-148">10</span></span> | <span data-ttu-id="2ae34-149">Secondaire&nbsp;1</span><span class="sxs-lookup"><span data-stu-id="2ae34-149">Secondary&nbsp;1</span></span> | | | | <span data-ttu-id="2ae34-150">1</span><span class="sxs-lookup"><span data-stu-id="2ae34-150">1</span></span> | <span data-ttu-id="2ae34-151">20</span><span class="sxs-lookup"><span data-stu-id="2ae34-151">20</span></span> |
| <span data-ttu-id="2ae34-152">20</span><span class="sxs-lookup"><span data-stu-id="2ae34-152">20</span></span> | <span data-ttu-id="2ae34-153">Principal</span><span class="sxs-lookup"><span data-stu-id="2ae34-153">Primary</span></span> | | <span data-ttu-id="2ae34-154">3.00</span><span class="sxs-lookup"><span data-stu-id="2ae34-154">3.00</span></span> | <span data-ttu-id="2ae34-155">1.00</span><span class="sxs-lookup"><span data-stu-id="2ae34-155">1.00</span></span> | <span data-ttu-id="2ae34-156">3</span><span class="sxs-lookup"><span data-stu-id="2ae34-156">3</span></span> | <span data-ttu-id="2ae34-157">0</span><span class="sxs-lookup"><span data-stu-id="2ae34-157">0</span></span> |

<span data-ttu-id="2ae34-158">![Exemple de schéma d’itinéraire](media/scheduling-engine-route.png "Exemple de schéma d’itinéraire")</span><span class="sxs-lookup"><span data-stu-id="2ae34-158">![Example rout diagram](media/scheduling-engine-route.png "Example rout diagram")</span></span>

<span data-ttu-id="2ae34-159">Lors de l’envoi au moteur, cet itinéraire est divisé en huit tâches, comme indiqué dans l’illustration suivante (sélectionnez l’image pour l’agrandir).</span><span class="sxs-lookup"><span data-stu-id="2ae34-159">When sending this to the engine, it is split out into eight jobs, as shown in the following illustration (select the image to enlarge it).</span></span>

<span data-ttu-id="2ae34-160">[![Tâches du moteur de planification](media/scheduling-engine-jobs.png "Tâches du moteur de planification")](media/scheduling-engine-jobs-large.png)</span><span class="sxs-lookup"><span data-stu-id="2ae34-160">[![Scheduling engine jobs](media/scheduling-engine-jobs.png "Scheduling engine jobs")](media/scheduling-engine-jobs-large.png)</span></span>

<span data-ttu-id="2ae34-161">Le lien standard entre deux tâches est `FinishStart`, ce qui signifie que l’heure de fin d’une tâche doit être antérieure à l’heure de début d’une autre tâche.</span><span class="sxs-lookup"><span data-stu-id="2ae34-161">The standard link between two jobs is `FinishStart`, meaning that the end time of one job must be before the start time of another job.</span></span> <span data-ttu-id="2ae34-162">Étant donné que la configuration doit être effectuée par la même ressource qui exécutera plus tard le processus, il y a des contraintes `OnSameResource` entre elles.</span><span class="sxs-lookup"><span data-stu-id="2ae34-162">Because the setup must be performed by the same resource that will later do the process, there are `OnSameResource` constraints between them.</span></span> <span data-ttu-id="2ae34-163">Entre les tâches des opérations primaire et secondaire pour 10, il y a des liens `StartStart` et `FinishFinish`, ce qui signifie que les tâches doivent toutes les deux commencer et se terminer en même temps, et il y a des contraintes `NotOnSameResource`, qui empêcheront l’emploi de la même ressource pour les opérations primaire et secondaire.</span><span class="sxs-lookup"><span data-stu-id="2ae34-163">Between the jobs for primary and secondary operation for 10, there are `StartStart` and `FinishFinish` links, which means that the jobs must both start and end at the same time, and there are `NotOnSameResource` constraints, which will prevent the same resource for primary and secondary.</span></span>

<span data-ttu-id="2ae34-164">Pour l’opération 20, où la quantité de ressources a été définie sur 3, la tâche de traitement a été divisée en trois tâches distinctes où toutes les tâches doivent s’exécuter exactement au même moment.</span><span class="sxs-lookup"><span data-stu-id="2ae34-164">For operation 20, where the quantity of resources has been set to 3, the process job has been split into three distinct jobs where all the jobs must run at the exact same time.</span></span>
<span data-ttu-id="2ae34-165">Dans ce cas, le groupe d’itinéraire a été configuré pour ne pas réserver de capacité pour la file d’attente après les délais, c’est pourquoi il n’y a qu’une seule tâche pour la file d’attente qui s’ensuit.</span><span class="sxs-lookup"><span data-stu-id="2ae34-165">In this case, the route group has been set up to not reserve capacity for queue after times, which is why there is only a single job for the queue after.</span></span>

<span data-ttu-id="2ae34-166">Le moteur de planification ne comprend que la notions de tâche et ne connaît pas la notion d’opération.</span><span class="sxs-lookup"><span data-stu-id="2ae34-166">The scheduling engine only understands the concepts of jobs and has no notion of operations.</span></span> <span data-ttu-id="2ae34-167">Cela signifie que lors de la planification des opérations, les opérations sont également divisées en tâches, bien que celles-ci ne soient pas conservées dans la base de données.</span><span class="sxs-lookup"><span data-stu-id="2ae34-167">This means that when doing operation scheduling, the operations are also split into jobs, although these will not be persisted in the database.</span></span>

<span data-ttu-id="2ae34-168">Pour chaque tâche, nous définirons également la capacité de travail requise (le nombre de secondes nécessaires).</span><span class="sxs-lookup"><span data-stu-id="2ae34-168">For each job, we will also define what the job capacity requirement is (the number of seconds required).</span></span> <span data-ttu-id="2ae34-169">Selon la manière dont les besoins en ressources ont été définis, nous pouvons également, pour chaque tâche, envoyer une liste de toutes les ressources applicables sur lesquelles la tâche pourrait s’exécuter et quelles sont les exigences de capacité pour telle et telle ressource.</span><span class="sxs-lookup"><span data-stu-id="2ae34-169">Depending on how the resource requirements have been defined, we may also, for each job, send a list of all the potential applicable resources that the job could run on and what the capacity requirement is for that specific resource.</span></span> <span data-ttu-id="2ae34-170">Même si la liste des ressources applicables est envoyée lors de la création du modèle, le moteur devra toujours s’assurer que l’affectation de ressource est réellement valide pour toute la durée de la tâche.</span><span class="sxs-lookup"><span data-stu-id="2ae34-170">Even though the list of applicable resources is sent when building the model, the engine will still need to ensure that the resource assignment is actually valid for the entire job duration.</span></span>

## <a name="scheduling-engine-internals"></a><span data-ttu-id="2ae34-171">Composants internes du moteur de planification</span><span class="sxs-lookup"><span data-stu-id="2ae34-171">Scheduling engine internals</span></span>

### <a name="scheduling-engine-interface"></a><span data-ttu-id="2ae34-172">Interface du moteur de planification</span><span class="sxs-lookup"><span data-stu-id="2ae34-172">Scheduling engine interface</span></span>

<span data-ttu-id="2ae34-173">Pour se faire une idée du fonctionnement interne du moteur, il est préférable d’examiner les fonctionnalités qu’il expose en externe.</span><span class="sxs-lookup"><span data-stu-id="2ae34-173">To get an idea of how the engine works internally, it is best to look at the functionality it exposes externally.</span></span> <span data-ttu-id="2ae34-174">Dans X++, l’interface principale est `WrkCtrSchedulerEngineInterface`.</span><span class="sxs-lookup"><span data-stu-id="2ae34-174">In X++, the main interface is `WrkCtrSchedulerEngineInterface`.</span></span> <span data-ttu-id="2ae34-175">Elle comporte les méthodes décrites dans les sous-sections suivantes.</span><span class="sxs-lookup"><span data-stu-id="2ae34-175">It has the methods described in the following subsections.</span></span>

#### <a name="general-engine"></a><span data-ttu-id="2ae34-176">Moteur général</span><span class="sxs-lookup"><span data-stu-id="2ae34-176">General engine</span></span>

| <span data-ttu-id="2ae34-177">**méthode**</span><span class="sxs-lookup"><span data-stu-id="2ae34-177">**Method**</span></span> | <span data-ttu-id="2ae34-178">**Objectif**</span><span class="sxs-lookup"><span data-stu-id="2ae34-178">**Purpose**</span></span> |
| --- | --- |
| `run` | <span data-ttu-id="2ae34-179">Planifie toutes les tâches chargées et renvoie le code d’erreur.</span><span class="sxs-lookup"><span data-stu-id="2ae34-179">Schedules all loaded jobs and returns the error code.</span></span> |
| `getJobSchedulingSequenceResult` | <span data-ttu-id="2ae34-180">Obtient le résultat de la planification et la première tâche présentant une erreur pour la séquence identifiée par une tâche spécifique.</span><span class="sxs-lookup"><span data-stu-id="2ae34-180">Gets the scheduling result and the first error job for the sequence identified by a specific job.</span></span> |
| `validateJobCapacityReservations` | <span data-ttu-id="2ae34-181">Valide les réservations de capacité pour toutes les tâches stockées par le moteur.</span><span class="sxs-lookup"><span data-stu-id="2ae34-181">Validates the capacity reservations for all the jobs stored by the engine.</span></span> |
| `setReservationsTimeStamp` | <span data-ttu-id="2ae34-182">Envoie un horodatage au moteur défini sur toutes les nouvelles réservations de capacité pour les tâches planifiées dans le cache du moteur.</span><span class="sxs-lookup"><span data-stu-id="2ae34-182">Sends a timestamp to the engine set on all new capacity reservations for the scheduled jobs in the cache of the engine.</span></span> |
| `addPropertyToGroupAggregation` | <span data-ttu-id="2ae34-183">Ajoute un préfixe de propriété à l’ensemble des propriétés utilisé lorsque la capacité est agrégée.</span><span class="sxs-lookup"><span data-stu-id="2ae34-183">Adds a property prefix to the set of properties used when capacity is aggregated.</span></span> |
| `addResource` | <span data-ttu-id="2ae34-184">Ajoute une ressource au pool de ressources du moteur de planification.</span><span class="sxs-lookup"><span data-stu-id="2ae34-184">Adds a resource to the scheduling engine resource pool.</span></span> |
| `addResourceGroup` | <span data-ttu-id="2ae34-185">Ajoute un groupe de ressources au pool de groupes de ressources du moteur de planification.</span><span class="sxs-lookup"><span data-stu-id="2ae34-185">Adds a resource group to the scheduling engine resource group pool.</span></span> |
| `addResourceGroupMembership` | <span data-ttu-id="2ae34-186">Ajoute une ressource en tant que membre d’un groupe de ressources.</span><span class="sxs-lookup"><span data-stu-id="2ae34-186">Adds a resource as a member to a resource group.</span></span> |
| `addOptimizationGoal` | <span data-ttu-id="2ae34-187">Ajoute un objectif d’optimisation de la planification (durée ou priorité).</span><span class="sxs-lookup"><span data-stu-id="2ae34-187">Adds a scheduling optimization goal (duration or priority).</span></span> |

#### <a name="individual-jobs"></a><span data-ttu-id="2ae34-188">Tâches individuelles</span><span class="sxs-lookup"><span data-stu-id="2ae34-188">Individual jobs</span></span>

| <span data-ttu-id="2ae34-189">**méthode**</span><span class="sxs-lookup"><span data-stu-id="2ae34-189">**Method**</span></span> | <span data-ttu-id="2ae34-190">**Objectif**</span><span class="sxs-lookup"><span data-stu-id="2ae34-190">**Purpose**</span></span> |
| --- | --- |
| `addJobInfo` | <span data-ttu-id="2ae34-191">Ajoute un enregistrement d’informations sur la tâche qui informe le moteur d’une tâche qui doit être planifiée.</span><span class="sxs-lookup"><span data-stu-id="2ae34-191">Adds a job information record that informs the engine about a job that should be scheduled.</span></span> |
| `addConstraintJobEndsAt` | <span data-ttu-id="2ae34-192">Ajoute une contrainte selon laquelle une tâche doit se terminer à une date et une heure spécifiées.</span><span class="sxs-lookup"><span data-stu-id="2ae34-192">Adds a constraint that a job should end at a specified date and time.</span></span> |
| `addConstraintJobStartsAt` | <span data-ttu-id="2ae34-193">Ajoute une contrainte selon laquelle une tâche doit commencer à une date et une heure spécifiées.</span><span class="sxs-lookup"><span data-stu-id="2ae34-193">Adds a constraint that a job should start at a specified date and time.</span></span> |
| `addConstraintMaxJobDays` | <span data-ttu-id="2ae34-194">Définit la contrainte indiquant qu’une tâche peut s’étendre sur un nombre maximal de jours spécifié.</span><span class="sxs-lookup"><span data-stu-id="2ae34-194">Defines the constraint that a job can span over a specified maximal number of days.</span></span> |
| `addConstraintResourceRequirement` | <span data-ttu-id="2ae34-195">Ajoute la contrainte selon laquelle la tâche doit être planifiée sur une ressource spécifique.</span><span class="sxs-lookup"><span data-stu-id="2ae34-195">Adds the constraint that the job must be scheduled on a specific resource.</span></span> |
| `addJobBindPriority` | <span data-ttu-id="2ae34-196">Ajoute une priorité de liaison de tâche pour une paire (tâche, niveau de contrainte).</span><span class="sxs-lookup"><span data-stu-id="2ae34-196">Adds a job bind priority for a (job, constraint level) pair.</span></span> <span data-ttu-id="2ae34-197">Une valeur de priorité plus élevée signifie que les variables de tâche seront liées plus tôt.</span><span class="sxs-lookup"><span data-stu-id="2ae34-197">A higher priority value means the job variables will be bound earlier.</span></span> <span data-ttu-id="2ae34-198">La tâche sera traitée avant les tâches de priorité inférieure dans la même séquence.</span><span class="sxs-lookup"><span data-stu-id="2ae34-198">The job will be processed before jobs with lower priority value in the same sequence.</span></span> |
| `addJobCapacity` | <span data-ttu-id="2ae34-199">Ajoute des informations de charge maximale pour une tâche (comme le temps d’exécution requis de la tâche), indépendamment de la ressource sur laquelle la tâche s’exécute.</span><span class="sxs-lookup"><span data-stu-id="2ae34-199">Adds capacity load information for a job (like the required job runtime) independent on which resource the job runs on.</span></span> |
| `addJobResourceCapacity` | <span data-ttu-id="2ae34-200">Ajoute une ressource à l’ensemble des ressources qui peuvent être utilisées pour effectuer une tâche, et indique la capacité requise lors de l’exécution sur cette ressource.</span><span class="sxs-lookup"><span data-stu-id="2ae34-200">Adds a resource to the set of resources that may be used to perform a job, and states the capacity required when running on that resource.</span></span> |
| `addJobGoal` | <span data-ttu-id="2ae34-201">Ajoute des informations d’objectif de tâche pour un niveau de contrainte spécifique (heure de fin la plus tôt ou heure de début la plus tard).</span><span class="sxs-lookup"><span data-stu-id="2ae34-201">Adds job goal information for a specific constraint level (earliest end time or latest start time).</span></span> |
| `addJobResourcePriority` | <span data-ttu-id="2ae34-202">Ajoute la priorité à utiliser lorsqu’une tâche est planifiée sur une ressource.</span><span class="sxs-lookup"><span data-stu-id="2ae34-202">Adds the priority to use when a job is scheduled on a resource.</span></span> |
| `addJobResourceRuntime` | <span data-ttu-id="2ae34-203">Spécifie une durée de tâche qui dépend de la ressource sur laquelle la tâche sera planifiée.</span><span class="sxs-lookup"><span data-stu-id="2ae34-203">Specifies a job time that is dependent of the resource the job will be scheduled on.</span></span> |
| `addJobRuntime` | <span data-ttu-id="2ae34-204">Spécifie une durée de tâche qui ne dépend pas de la ressource sur laquelle la tâche sera planifiée.</span><span class="sxs-lookup"><span data-stu-id="2ae34-204">Specifies a job time that is independent of the resource on which the job will be scheduled.</span></span> |
| `scheduleJobOnResourceGroup` | <span data-ttu-id="2ae34-205">Marque une tâche pour la planification au niveau du groupe de ressources.</span><span class="sxs-lookup"><span data-stu-id="2ae34-205">Marks a job for scheduling on the resource group level.</span></span> |
| `setJobResourcePreemptionAllowed` | <span data-ttu-id="2ae34-206">Définit si la préemption est autorisée pour une tâche sur une ressource (si le moteur est autorisé à planifier la tâche dans des créneaux de capacité non contigus).</span><span class="sxs-lookup"><span data-stu-id="2ae34-206">Sets whether preemption is allowed for a job on a resource (if engine is allowed to schedule the job in noncontiguous capacity slots).</span></span> |
| `setRequiredNumberOfResources` | <span data-ttu-id="2ae34-207">Définit le nombre de ressources requises pour planifier une tâche (uniquement pour la planification des opérations).</span><span class="sxs-lookup"><span data-stu-id="2ae34-207">Sets the number of resources required to schedule a job (only for operations scheduling).</span></span> |

#### <a name="constraints-between-jobs"></a><span data-ttu-id="2ae34-208">Contraintes entre les tâches</span><span class="sxs-lookup"><span data-stu-id="2ae34-208">Constraints between jobs</span></span>

| <span data-ttu-id="2ae34-209">**méthode**</span><span class="sxs-lookup"><span data-stu-id="2ae34-209">**Method**</span></span> | <span data-ttu-id="2ae34-210">**Objectif**</span><span class="sxs-lookup"><span data-stu-id="2ae34-210">**Purpose**</span></span> |
| --- | --- |
| `addJobLink` | <span data-ttu-id="2ae34-211">Ajoute un lien (tel que terminer\>démarrer) entre deux tâches.</span><span class="sxs-lookup"><span data-stu-id="2ae34-211">Adds a link (such as finish\>start) between two jobs.</span></span> |
| `addConstraintEndsDelayed` | <span data-ttu-id="2ae34-212">Définit la contrainte selon laquelle une tâche ne peut pas se terminer avant la fin d’une autre tâche, plus un délai.</span><span class="sxs-lookup"><span data-stu-id="2ae34-212">Defines the constraint that a job cannot end before another jobs end plus some delay time.</span></span> |
| `addConstraintJobListWorkingTimeIntersect` | <span data-ttu-id="2ae34-213">Ajoute une contrainte selon laquelle les créneaux de capacité réservés pour les tâches doivent être sur des heures de travail qui se recoupent pour les deux ressources utilisées par les tâches.</span><span class="sxs-lookup"><span data-stu-id="2ae34-213">Adds a constraint that the capacity slots reserved for the jobs must be on the intersecting working times for the two resources used by the jobs.</span></span> |
| `addConstraintJobOverlap` | <span data-ttu-id="2ae34-214">Ajoutez une contrainte qui définit la façon dont les tâches sont séquencés lorsqu’une quantité donnée d’un article peut être déplacée entre deux ressources alors que le traitement de la première ressource n’est toujours pas terminé, afin que la seconde ressource puisse commencer le traitement.</span><span class="sxs-lookup"><span data-stu-id="2ae34-214">Add a constraint that defines how jobs are sequenced when a given quantity of an item can be moved between two resources while the first resource is still not finished processing, so that the second resource can start processing.</span></span> |
| `addConstraintNotOnSameResource` | <span data-ttu-id="2ae34-215">Ajoute une contrainte selon laquelle deux tâches ne doivent pas être planifiées sur la même ressource.</span><span class="sxs-lookup"><span data-stu-id="2ae34-215">Adds a constraint that two jobs should not be scheduled on the same resource.</span></span> |
| `addConstraintOnSameResource` | <span data-ttu-id="2ae34-216">Ajoute une contrainte selon laquelle deux tâches doivent utiliser la même ressource.</span><span class="sxs-lookup"><span data-stu-id="2ae34-216">Adds a constraint that two jobs must be using the same resource.</span></span> |
| `addJobSameReservations` | <span data-ttu-id="2ae34-217">Ajoute une contrainte selon laquelle une tâche doit finir en ayant des réservations de capacité pour les mêmes créneaux horaites que la tâche primaire.</span><span class="sxs-lookup"><span data-stu-id="2ae34-217">Adds a constraint that a job must end up having capacity reservations for the same time slots as the primary job.</span></span> |
| `setPrimaryParallelJob` | <span data-ttu-id="2ae34-218">Ajoute des informations sur la tâche qui est la tâche primaire dans un ensemble de tâches parallèles.</span><span class="sxs-lookup"><span data-stu-id="2ae34-218">Adds information about what job is the primary job in a set of parallel jobs.</span></span> |

### <a name="solver"></a><span data-ttu-id="2ae34-219">Solveur</span><span class="sxs-lookup"><span data-stu-id="2ae34-219">Solver</span></span>

<span data-ttu-id="2ae34-220">Le moteur lui-même est essentiellement un solveur de contraintes spécialisé auquel est ajoutée une heuristique personnalisée.</span><span class="sxs-lookup"><span data-stu-id="2ae34-220">The engine itself is essentially a specialized constraint solver with custom heuristics added.</span></span> <span data-ttu-id="2ae34-221">Le solveur est basé sur deux éléments principaux : les variables et les contraintes.</span><span class="sxs-lookup"><span data-stu-id="2ae34-221">The solver is based on two main elements: variables and constraints.</span></span>

#### <a name="variable"></a><span data-ttu-id="2ae34-222">Variable</span><span class="sxs-lookup"><span data-stu-id="2ae34-222">Variable</span></span>

<span data-ttu-id="2ae34-223">Une variable représente un domaine de valeurs possibles.</span><span class="sxs-lookup"><span data-stu-id="2ae34-223">A variable represents a domain of possible values.</span></span> <span data-ttu-id="2ae34-224">Le moteur de planification comporte deux types de variables :</span><span class="sxs-lookup"><span data-stu-id="2ae34-224">Scheduling engine has two types of variables:</span></span>

- <span data-ttu-id="2ae34-225">**Variable DateTime** - Possède un domaine de toutes les dates et heures, et le domaine peut être restreint en rapprochant les limites inférieure et supérieure de temps de la variable.</span><span class="sxs-lookup"><span data-stu-id="2ae34-225">**DateTime variable** - Has a domain of all dates and times, and the domain can be restricted by moving the lower and upper bound for the time of the variable closer to each other.</span></span>
- <span data-ttu-id="2ae34-226">**Variable Resource** - Possède un domaine des ressources applicables et le domaine peut être restreint en éliminant des ressources de la liste.</span><span class="sxs-lookup"><span data-stu-id="2ae34-226">**Resource variable** - Has a domain of applicable resources, and the domain can be restricted by eliminating resources from the list.</span></span>

#### <a name="constraint"></a><span data-ttu-id="2ae34-227">Contrainte</span><span class="sxs-lookup"><span data-stu-id="2ae34-227">Constraint</span></span>

<span data-ttu-id="2ae34-228">Une contrainte agit sur les variables en restreignant leur domaine, mais elle dépend également des variables et est donc activée lorsque celles-ci varient.</span><span class="sxs-lookup"><span data-stu-id="2ae34-228">A constraint acts on variables by restricting their domains, but it also depends on variables so it gets activated when variables change.</span></span> <span data-ttu-id="2ae34-229">Le processus de « propagation de contrainte » se produit lorsqu’une contrainte remplit sa fonction principale et en rend compte à la logique principale si elle réussit.</span><span class="sxs-lookup"><span data-stu-id="2ae34-229">The process of "constraint propagation" is when a constraint performs its main function and reports back to the main logic if successful.</span></span>

<span data-ttu-id="2ae34-230">Une variable est considérée comme liée lorsqu’elle ne peut pas être restreinte davantage, ce qui pour la variable DateTime signifie que les limites supérieure et inférieure sont identiques, et pour la variable Resource qu’elle n’a qu’une seule ressource applicable.</span><span class="sxs-lookup"><span data-stu-id="2ae34-230">A variable is considered bound when it can't be restricted further, which for DateTime variable means that upper and lower bound is the same, and for the Resource variable that it has only a single applicable resource.</span></span> <span data-ttu-id="2ae34-231">Lorsque toutes les variables sont liées, une solution est trouvée.</span><span class="sxs-lookup"><span data-stu-id="2ae34-231">When all variables are bound, a solution is found.</span></span>

### <a name="constraint-levels"></a><span data-ttu-id="2ae34-232">Niveaux de contrainte</span><span class="sxs-lookup"><span data-stu-id="2ae34-232">Constraint levels</span></span>

<span data-ttu-id="2ae34-233">Lorsque la planification est exécutée dans le cadre de la phase de couverture de la planification des besoins en matières (MRP), les ordres sont planifiés à rebours à partir de la date du besoin.</span><span class="sxs-lookup"><span data-stu-id="2ae34-233">When scheduling is executed as part of the material requirements planning (MRP) coverage phase, the orders will be scheduled backward from requirement date.</span></span> <span data-ttu-id="2ae34-234">Cependant, s’il n’est pas possible de trouver un horaire qui commence aujourd’hui ou plus tard et se termine avant la date du besoin, alors le sens de la planification devient vers l’aval à partir de la date du jour.</span><span class="sxs-lookup"><span data-stu-id="2ae34-234">However, if it is not possible to find a schedule that starts today or later and ends before the requirement date, then the scheduling direction will change to forward from today.</span></span>

<span data-ttu-id="2ae34-235">Cette règle métier principale est gérée en organisant les contraintes en niveaux.</span><span class="sxs-lookup"><span data-stu-id="2ae34-235">This main business rule is handled by organizing the constraints in levels.</span></span> <span data-ttu-id="2ae34-236">Si aucune solution n’est trouvée lors de l’utilisation des contraintes au niveau le plus élevé, les contraintes de ce niveau sont toutes abandonnées et le moteur essaie le niveau inférieur.</span><span class="sxs-lookup"><span data-stu-id="2ae34-236">If no solution is found when using the constraints on the highest level, then the constraints on that level are all dropped, and the lower level is tried.</span></span> <span data-ttu-id="2ae34-237">En pratique, cela signifie que pour la planification à rebours, le modèle contiendra un niveau 1 avec les objectifs de tâche à heure de début la plus tard étant donnée une contrainte maximale d’heure de fin (la date du besoin), et un niveau 0 avec les objectifs de tâche à heure de fin la plus tôt étant donnée une contrainte d’heure de début aujourd’hui.</span><span class="sxs-lookup"><span data-stu-id="2ae34-237">In praxis, this means that for backward scheduling the model will contain a level 1 with job goals of latest start time given a maximum end time constraint (the requirement date), and a level 0 with job goals of earliest end time and given a minimum start time constraint of today.</span></span>

### <a name="algorithm"></a><span data-ttu-id="2ae34-238">Algorithme</span><span class="sxs-lookup"><span data-stu-id="2ae34-238">Algorithm</span></span>

<span data-ttu-id="2ae34-239">Les principales étapes de l’algorithme du moteur sont les suivantes :</span><span class="sxs-lookup"><span data-stu-id="2ae34-239">The main steps of the engine algorithm are:</span></span>

1. <span data-ttu-id="2ae34-240">Rechercher les séquences (chaînes de tâches) qui peuvent être résolues séparément.</span><span class="sxs-lookup"><span data-stu-id="2ae34-240">Find sequences (job chains) which can be solved separately.</span></span>
1. <span data-ttu-id="2ae34-241">Essayer de trouver une solution initiale pour la séquence pour le niveau de contrainte le plus élevé.</span><span class="sxs-lookup"><span data-stu-id="2ae34-241">Try to find an initial solution for the sequence for the highest constraint level.</span></span>
    1. <span data-ttu-id="2ae34-242">Trier les tâches dans la séquence en fonction de l’objectif et des priorités des tâches, de sorte de pouvoir trouver une tâche de début.</span><span class="sxs-lookup"><span data-stu-id="2ae34-242">Sort the jobs in the sequence based on job goal and priorities, such that a start job can be found.</span></span>
    1. <span data-ttu-id="2ae34-243">Organiser les tâches en boucle dans l’ordre suivant :</span><span class="sxs-lookup"><span data-stu-id="2ae34-243">Loop the jobs in the following sequence:</span></span>
        1. <span data-ttu-id="2ae34-244">Trouver toutes les contraintes qui doivent être propagées et exécuter la propagation.</span><span class="sxs-lookup"><span data-stu-id="2ae34-244">Find all constraints that need to be propagated and run propagation.</span></span>
        1. <span data-ttu-id="2ae34-245">Si toutes les variables de la tâche ont été liées, une solution a été trouvée pour cette tâche.</span><span class="sxs-lookup"><span data-stu-id="2ae34-245">If all variables for the job have been bound, then a solution for that job has been found.</span></span>
        1. <span data-ttu-id="2ae34-246">Si l’une des variables n’a pas pu être liée sans violer les contraintes, annuler la liaison des variables, essayer une valeur différente dans le domaine (pour la variable Resource) et réexécuter la propagation de la contrainte.</span><span class="sxs-lookup"><span data-stu-id="2ae34-246">If one of the variables could not be bound without violating the constraints, then roll back the variable binding, try a different value in the domain (for resource variable), and rerun the constraint propagation.</span></span>
1. <span data-ttu-id="2ae34-247">Si aucune solution n’a été trouvée, toutes les contraintes du niveau de contrainte actuel sont supprimées, le niveau de contrainte est abaissé (si des niveaux inférieurs sont disponibles) et la recherche de solution est relancée avec le nouvel ensemble de contraintes.</span><span class="sxs-lookup"><span data-stu-id="2ae34-247">If no solution was found, then all constraints on the current constraint level is removed, the constraint level lowered (if any lower levels are available) and solution search retried with the new set of constraint.</span></span>
1. <span data-ttu-id="2ae34-248">Si une solution réalisable a été trouvée, alors la phase d’optimisation est lancée. Elle tente de trouver une meilleure solution jusqu’à ce que le délai d’optimisation soit atteint ou que toutes les combinaisons de ressources aient été épuisées.</span><span class="sxs-lookup"><span data-stu-id="2ae34-248">If a feasible solution was found, then the optimization phase is started, which will try to find a better solution until the optimization timeout is reached or all resource combinations have been exhausted.</span></span>

<span data-ttu-id="2ae34-249">Le solveur de contraintes n’est pas sensible aux spécificités de l’algorithme de planification.</span><span class="sxs-lookup"><span data-stu-id="2ae34-249">The constraint solver is not aware of the specifics of the scheduling algorithm.</span></span> <span data-ttu-id="2ae34-250">C’est dans la définition et la combinaison des différentes contraintes que la « magie » opère.</span><span class="sxs-lookup"><span data-stu-id="2ae34-250">It is in the definition and combination of the various constraints that the "magic" happens.</span></span>

### <a name="determining-working-times"></a><span data-ttu-id="2ae34-251">Détermination des heure de travail</span><span class="sxs-lookup"><span data-stu-id="2ae34-251">Determining working times</span></span>

<span data-ttu-id="2ae34-252">Une grande partie des contraintes (internes) du moteur contrôle le temps de travail et la capacité d’une ressource.</span><span class="sxs-lookup"><span data-stu-id="2ae34-252">A large part of the (internal) constraints in the engine controls the working time and capacity of a resource.</span></span> <span data-ttu-id="2ae34-253">Pour l’essentiel, la tâche consiste à parcourir les créneaux horaires d’une ressource à partir d’un point donné, dans une direction donnée, et de trouver un intervalle suffisamment long pour y faire entrer la capacité (temps) requise pour les tâches.</span><span class="sxs-lookup"><span data-stu-id="2ae34-253">Essentially, the task is to traverse the working time slots for a resource from a given point in a given direction, and find a long enough interval in which the jobs required capacity (time) can fit.</span></span>

<span data-ttu-id="2ae34-254">Pour ce faire, le moteur a besoin de connaître les heures de travail d’une ressource.</span><span class="sxs-lookup"><span data-stu-id="2ae34-254">To do this, the engine needs to know the working times of a resource.</span></span> <span data-ttu-id="2ae34-255">Contrairement aux données du modèle principal, les heures de travail sont *chargées à la demande*, ce qui signifie qu’elles sont chargés dans le moteur selon les besoins.</span><span class="sxs-lookup"><span data-stu-id="2ae34-255">Opposite to the main model data, the working times are *lazy loaded*, meaning that they are loaded into the engine as needed.</span></span> <span data-ttu-id="2ae34-256">La raison de cette démarche est qu’il existe souvent dans Supply Chain Management des heures de travail couvrant une très longue période et généralement de nombreux calendriers, si bien que les données à charger au préalable seraient très volumineuses.</span><span class="sxs-lookup"><span data-stu-id="2ae34-256">The reason for this approach is that there are often working times in Supply Chain Management for a calendar for a very long period and typically many calendars exist so the data would be quite large to pre-load.</span></span>

<span data-ttu-id="2ae34-257">Les informations de calendrier sont demandées par le moteur par blocs, en appelant la méthode de classe X++ `WrkCtrSchedulingInteropDataProvider.getWorkingTimes`.</span><span class="sxs-lookup"><span data-stu-id="2ae34-257">Calendar information is requested by the engine in chunks, by invoking the X++ class method `WrkCtrSchedulingInteropDataProvider.getWorkingTimes`.</span></span> <span data-ttu-id="2ae34-258">La requête concerne un identifiant de calendrier spécifique dans un intervalle de temps spécifique.</span><span class="sxs-lookup"><span data-stu-id="2ae34-258">The request is for a specific calendar ID in a specific time interval.</span></span> <span data-ttu-id="2ae34-259">En fonction de l’état du cache du serveur dans Supply Chain Management, chacune de ces requêtes peut aboutir à plusieurs appels à la base de données, ce qui prend beaucoup de temps (par rapport au temps de calcul pur).</span><span class="sxs-lookup"><span data-stu-id="2ae34-259">Depending on the state of the server cache in Supply Chain Management, each of these requests could end up in several database calls, which takes a long time (relative to the pure computational time).</span></span> <span data-ttu-id="2ae34-260">De plus, si le calendrier contient des définitions d’heures de travail très élaborées avec de nombreux créneaux de temps de travail par jour, cela ajoute à la durée du chargement.</span><span class="sxs-lookup"><span data-stu-id="2ae34-260">Also, if the calendar contains very elaborate working time definitions with many working time intervals per day, this adds to the time the loading takes.</span></span>

<span data-ttu-id="2ae34-261">Lorsque les données d’heures de travail sont chargées dans le moteur de planification, elles sont conservées dans son cache interne pour le calendrier spécifique, ce qui signifie que si d’autres tâches ou ressources utilisent le même calendrier, les recherches suivantes pourront être effectuées rapidement dans la mémoire.</span><span class="sxs-lookup"><span data-stu-id="2ae34-261">When the working time data is loaded in the scheduling engine, this is retained in its internal cache for the specific calendar, meaning that if any other jobs or resources are using the same calendar then the next lookups can be performed quickly from memory.</span></span> <span data-ttu-id="2ae34-262">Une cause fréquente de mauvaises performances est l’utilisation d’un ID de calendrier distinct pour chaque ressource, car les données devront alors être demandées pour chaque calendrier, même si le contenu des calendriers est éventuellement identique.</span><span class="sxs-lookup"><span data-stu-id="2ae34-262">One common cause of bad performance is if a separate calendar ID is used for each resource, because data will then need to be requested for each calendar, even though the content of the calendars might be the same.</span></span>

### <a name="finite-capacity"></a><span data-ttu-id="2ae34-263">Capacité finie</span><span class="sxs-lookup"><span data-stu-id="2ae34-263">Finite capacity</span></span>

<span data-ttu-id="2ae34-264">Lors de l’utilisation d’une capacité finie, les plages horaires de travail du calendrier sont fractionnées et réduites en fonction des réservations de capacité existantes.</span><span class="sxs-lookup"><span data-stu-id="2ae34-264">When using finite capacity, the working time slots from the calendar are split and reduced based on the existing capacity reservations.</span></span> <span data-ttu-id="2ae34-265">Ces réservations sont également récupérées via la même classe `WrkCtrSchedulingInteropDataProvider` que les calendriers, mais utilisez plutôt la méthode `getCapacityReservations`.</span><span class="sxs-lookup"><span data-stu-id="2ae34-265">These reservations are also fetched through the same `WrkCtrSchedulingInteropDataProvider` class as the calendars, but instead use the method `getCapacityReservations`.</span></span> <span data-ttu-id="2ae34-266">Lors de la la planification générale, les réservations du plan général spécifique sont prises en compte et si elles sont activées dans la page **Paramètres de planification** ; les réservations provenant des ordres de fabrication confirmés sont également incluses.</span><span class="sxs-lookup"><span data-stu-id="2ae34-266">When scheduling during master planning, the reservations for the specific master plan are considered and if enabled on the **Master planning parameters** page, the reservations from firmed production orders are also included.</span></span> <span data-ttu-id="2ae34-267">De même, lors de la planification d’un ordre de fabrication, il est également possible d’inclure des réservations provenant d’ordres planifiés existants, bien que ce procédé ne soit pas aussi courant que l’autre.</span><span class="sxs-lookup"><span data-stu-id="2ae34-267">Similarly, when scheduling a production order, it is also an option to include reservations from existing planned orders, although this is not as common as the other way around.</span></span>

<span data-ttu-id="2ae34-268">L’utilisation d’une capacité finie entraîne une plus longue durée de la planification, pour plusieurs raisons :</span><span class="sxs-lookup"><span data-stu-id="2ae34-268">Using finite capacity will cause scheduling to take longer due to several reasons:</span></span>

- <span data-ttu-id="2ae34-269">L’extraction des informations de capacité dans la base de données est une opération lente et la mise en cache côté serveur des informations de capacité n’est généralement pas aussi efficace que celle des heures de travail, car elles ne sont pas partagées entre les ressources comme le sont généralement les calendriers.</span><span class="sxs-lookup"><span data-stu-id="2ae34-269">Fetching the capacity information from database is a slow operation and the server-side caching of capacity information is typically not as good as for working times because they are not shared among resources like calendars typically are.</span></span>
- <span data-ttu-id="2ae34-270">Le nombre de plages horaires de travail à parcourir augmente en raison des fractionnements, et il convient généralement d’étudier les plages horaires sur une période de temps plus longue avant de pouvoir trouver une solution.</span><span class="sxs-lookup"><span data-stu-id="2ae34-270">The number of working time slots to traverse increases due to the splits, and slots for a longer time period must typically be investigated before a solution can be found.</span></span>
- <span data-ttu-id="2ae34-271">Une fois la planification terminée, il convient de vérifier les réservations en conflit (voir la section « Exécution de plusieurs moteurs de planification en parallèle » pour plus de détails).</span><span class="sxs-lookup"><span data-stu-id="2ae34-271">After the scheduling is complete, a check for conflicting reservations must be performed (see the "Running scheduling engines in parallel" section for details).</span></span>

### <a name="examining-the-resource-combinations"></a><span data-ttu-id="2ae34-272">Examen des combinaisons de ressources</span><span class="sxs-lookup"><span data-stu-id="2ae34-272">Examining the resource combinations</span></span>

<span data-ttu-id="2ae34-273">Si la séquence de tâches contient uniquement des liens `FinishStart` standards, correspondant à une chaîne simple sans ramification, un résultat optimal (du point de vue d’un ordre unique, pas depuis différents ordres) peut être obtenu en trouvant la meilleure solution pour la première tâche, puis en passant à la recherche de la meilleure solution pour la tâche suivante.</span><span class="sxs-lookup"><span data-stu-id="2ae34-273">If the job sequence only contains the standard `FinishStart` links, meaning it forms a simple chain without any branches, an optimal result (seen from the single order, not across orders) can be achieved by finding the best solution for the first job and then moving on to find the best solution for the next job.</span></span> <span data-ttu-id="2ae34-274">La meilleure solution pour une tâche consiste à trouver la ressource qui peut offrit les dates de début et de fin de la tâche les plus proches de l’objectif de la tâche (dans une planification aval, cela implique d’avoir la date de fin de la tâche la plus tôt possible) tout en respectant les contraintes.</span><span class="sxs-lookup"><span data-stu-id="2ae34-274">The best solution for a job means finding the resource that can get the from and to date of the job closest to the job goal (in forward scheduling this means getting the end date of the job as early as possible) while still respecting the constraints.</span></span>

<span data-ttu-id="2ae34-275">Lorsqu’il existe des tâches parallèles, trouver une solution peut impliquer d’examiner différentes combinaisons de ressources.</span><span class="sxs-lookup"><span data-stu-id="2ae34-275">When there are parallel jobs, finding a solution may involve examining different combinations of resources.</span></span> <span data-ttu-id="2ae34-276">Le nombre de combinaisons de ressources possibles est le produit du nombre de ressources applicables pour les tâches parallèles liées.</span><span class="sxs-lookup"><span data-stu-id="2ae34-276">The number of possible resource combinations is the product of the number of applicable resources for the connected parallel jobs.</span></span> <span data-ttu-id="2ae34-277">Spécialement lorsqu’il s’agit de planifier un ordre à rebours à partir de la date du besoin, la logique peut avoir besoin d’un certain temps avant de réaliser que le problème ne possède aucune solution permettant d’effectuer les tâches parallèles avant la date du jour. En effet, elle doit examiner toutes les combinaisons, car certaines ressources peuvent présenter une plus grande efficacité ou un autre calendrier susceptible d’offrir une solution.</span><span class="sxs-lookup"><span data-stu-id="2ae34-277">Especially when scheduling an order backwards from a requirement date, it can take quite a while for the logic to realize that there is no solution to the problem that will make the parallel jobs fit before today's date, as it will need to check all the combinations because there could be some resources that had a higher efficiency or a different calendar that might give a result.</span></span> <span data-ttu-id="2ae34-278">Cela signifie que si aucune limite de délai d’attente n’a été définie, la logique s’exécutera pendant longtemps avant d’opter pour la direction aval.</span><span class="sxs-lookup"><span data-stu-id="2ae34-278">This means that if no timeout limit has been set it will run for a long time before changing the direction to forward.</span></span>

<span data-ttu-id="2ae34-279">Cette logique combinatoire implique également que l’ajout d’autres ressources applicables peut ralentir le fonctionnement du moteur.</span><span class="sxs-lookup"><span data-stu-id="2ae34-279">This combinatorial logic also means that adding more applicable resources may make the engine run slower.</span></span> <span data-ttu-id="2ae34-280">Si des problèmes de performances apparaissent lorsqu’il existe des opérations parallèles et que la planification suppose une capacité infinie, ces problèmes peuvent être partiellement résolus en demandant au concepteur d’itinéraire de prendre une décision sur la ressource à utiliser, puis d’affecter la ressource directement à l’opération (car dans la plupart des cas le moteur finit toujours par choisir la même ressource, donc le résultat final sera le même).</span><span class="sxs-lookup"><span data-stu-id="2ae34-280">If performance problems occur when having parallel operations and scheduling with infinite capacity, it can partly be fixed by having the route designer take a decision on which resource should be used and then assign the resource directly on the operation (because the engine in most cases will always end up picking the same resource, so the end result will be the same).</span></span>

### <a name="hard-links"></a><span data-ttu-id="2ae34-281">Liens physiques</span><span class="sxs-lookup"><span data-stu-id="2ae34-281">Hard links</span></span>

<span data-ttu-id="2ae34-282">Définir le type de lien entre deux tâches comme un lien physique garantit l’absence de délai entre la fin d’une tâche et le début de la suivante.</span><span class="sxs-lookup"><span data-stu-id="2ae34-282">Setting the link type between two jobs to hard, ensures that there is no time gap between the finish of one job and the start of the next one.</span></span> <span data-ttu-id="2ae34-283">Cela peut être très utile dans des scénarios tels que le chauffage d’un métal dans une tâche et son traitement dans la suivante, quand il n’est pas souhaitable que le métal ait le temps de refroidir.</span><span class="sxs-lookup"><span data-stu-id="2ae34-283">This can be very useful in scenarios like when metal is heated in one job and then processed in the next job, where it is not desirable to have the metal cool down in between.</span></span>

<span data-ttu-id="2ae34-284">Avec les liens souples standard et une planification vers l’aval, si l’itinéraire forme une chaîne simple sans aucune ramification, on peut obtenir un résultat en trouvant pour la première tâche une solution satisfaisant à ses propres contraintes, puis en parcourant la chaîne en propageant l’heure de fin de la tâche précédente à la tâche suivante.</span><span class="sxs-lookup"><span data-stu-id="2ae34-284">With standard soft links and forward scheduling, if the route forms a simple chain without any branches, a result can be achieved by finding a solution for the first job that satisfies its own constraints and then moving on through the chain propagating the end time from the previous job to the next job.</span></span> <span data-ttu-id="2ae34-285">Si la tâche en cours ne trouve aucune capacité, son heure de début sera repoussée, sans aucune conséquence pour les tâches précédentes, créant potentiellement des délais entre les tâches.</span><span class="sxs-lookup"><span data-stu-id="2ae34-285">If the current job can't find any capacity, the start time for it will be moved out further, without any consequence for the previous jobs potentially creating gaps between the jobs.</span></span> <span data-ttu-id="2ae34-286">Cependant, avec des liens physiques (en particulier en relation avec une capacité finie) pour le même scénario, le fait qu’une tâche ultérieure dans la chaîne ne puisse pas trouver de capacité implique que toutes les tâches planifiées précédentes devront « glisser » l’une après l’autre et donc être replanifiées à plusieurs reprises.</span><span class="sxs-lookup"><span data-stu-id="2ae34-286">However with hard links (especially in connection with finite capacity) for the same scenario, the fact that one job later in the chain cannot find capacity, will mean that all previous scheduled jobs will have to be "dragged" along one by one and thereby rescheduled a number of times.</span></span> <span data-ttu-id="2ae34-287">En particulier dans le cas des scénarios à charge élevée sur plusieurs ressources, les liens physiques peuvent provoquer une réaction en chaîne où les tâches ont des conséquences les unes sur les autres et où il conviendra d’effectuer un certain nombre d’itérations avant que le résultat ne se stabilise dans une planification réalisable.</span><span class="sxs-lookup"><span data-stu-id="2ae34-287">Especially in scenarios with high load for multiple resources, the hard links can cause a chain reaction where the jobs will affect each other and a number of iterations will have to be performed before the result stabilizes into a feasible schedule.</span></span>

## <a name="running-scheduling-engines-in-parallel"></a><span data-ttu-id="2ae34-288">Exécution de plusieurs moteurs de planification en parallèle</span><span class="sxs-lookup"><span data-stu-id="2ae34-288">Running scheduling engines in parallel</span></span>

<span data-ttu-id="2ae34-289">Lors de l’exécution de la planification dans le cadre d’un cycle de planification générale utilisant des applications d’assistance, chacun des threads des assistants de la planification générale peut également prendre en charge des tâches de planification d’ordres de fabrication.</span><span class="sxs-lookup"><span data-stu-id="2ae34-289">When performing scheduling as part of a master planning run where helpers are used, each of the master planning helper threads can also pick up production order scheduling tasks.</span></span> <span data-ttu-id="2ae34-290">Cela signifie qu’il est possible d’exécuter plusieurs moteurs de planification simultanément.</span><span class="sxs-lookup"><span data-stu-id="2ae34-290">This means that multiple scheduling engines can be running at the same time.</span></span> <span data-ttu-id="2ae34-291">Bien que le multithreading soit généralement très bénéfique en termes de performance, il présente également des inconvénients en ce qui concerne la planification.</span><span class="sxs-lookup"><span data-stu-id="2ae34-291">While multithreading in general is a highly significant performance benefit, there are also some functional downsides when it comes to scheduling.</span></span>

<span data-ttu-id="2ae34-292">Dans la MRP, tous les ordres de fabrication pour un niveau de nomenclature donné sont planifiés dans la séquence de la dates de besoin, ce qui signifie que les ordres ayant la date de besoin la plus tôt doivent être planifiés en premier. Elles ont ainsi les meilleures chances d’obtenir la capacité de ressource disponible.</span><span class="sxs-lookup"><span data-stu-id="2ae34-292">In MRP, all production orders for a given bill of materials (BOM) level are scheduled in requirement date sequence, meaning that those orders with the earliest requirement date should be scheduled first and thereby have the highest chance of getting the available resource capacity.</span></span> <span data-ttu-id="2ae34-293">Cependant, quand plusieurs moteurs sélectionnent des ordres non planifiés dans la liste, la séquence n’est plus garantie, car l’un peut s’achever plus rapidement qu’un autre.</span><span class="sxs-lookup"><span data-stu-id="2ae34-293">However, with multiple engines picking from the list of unscheduled orders the sequence is no longer ensured, as one might complete faster than the other.</span></span>

<span data-ttu-id="2ae34-294">En outre, lors d’une planification utilisant une capacité finie, lorsque plusieurs instances de moteur tentent de planifier des ordres qui utilisent potentiellement les mêmes ressources dans le même intervalle de temps, une condition de concurrence peut se produire.</span><span class="sxs-lookup"><span data-stu-id="2ae34-294">Also, when scheduling using finite capacity and when multiple engine instances are trying to schedule orders that are potentially using the same resources at the same time interval, a race condition can occur.</span></span> <span data-ttu-id="2ae34-295">Le nombre de ces conditions de concurrence enregistré dans le champ **Conflits de planification** sur la page d’historique des plans généraux.</span><span class="sxs-lookup"><span data-stu-id="2ae34-295">The number of such race conditions is recorded in the **Scheduling conflicts** field on the master plans history page.</span></span> <span data-ttu-id="2ae34-296">La logique de résolution des conflits est la suivante :</span><span class="sxs-lookup"><span data-stu-id="2ae34-296">The conflict resolution logic is as follows:</span></span>

- <span data-ttu-id="2ae34-297">Planifier un ordre (sans verrou) et obtenir les réservations de capacité.</span><span class="sxs-lookup"><span data-stu-id="2ae34-297">Schedule an order (lock-free) and get capacity reservations.</span></span>
- <span data-ttu-id="2ae34-298">Fermer le verrou.</span><span class="sxs-lookup"><span data-stu-id="2ae34-298">Take the lock.</span></span>
- <span data-ttu-id="2ae34-299">Vérifier s’il existe des réservations de capacité plus récentes pour les ressources planifiées dans la période.</span><span class="sxs-lookup"><span data-stu-id="2ae34-299">Check if newer capacity reservations exist for the scheduled resources in the timespan.</span></span>
  - <span data-ttu-id="2ae34-300">Si non, écrire la capacité et ouvrir le verrou.</span><span class="sxs-lookup"><span data-stu-id="2ae34-300">If no, write the capacity and release the lock.</span></span>
  - <span data-ttu-id="2ae34-301">Si oui, ouvrir le verrou et replanifier l’ordre depuis le début.</span><span class="sxs-lookup"><span data-stu-id="2ae34-301">If yes, release the lock and reschedule the order from the beginning.</span></span>

<span data-ttu-id="2ae34-302">Ainsi, lors de la planification avec plusieurs instances de moteur, le résultat n’est pas totalement déterministe car il dépend du timing exact de chacun des threads.</span><span class="sxs-lookup"><span data-stu-id="2ae34-302">So, when scheduling with multiple engine instances, the result is not fully deterministic because it will depend on the exact timing of each of the threads.</span></span>

## <a name="operation-scheduling-performance"></a><span data-ttu-id="2ae34-303">Performance de la planification des opérations</span><span class="sxs-lookup"><span data-stu-id="2ae34-303">Operation scheduling performance</span></span>

<span data-ttu-id="2ae34-304">Même si la planification des opérations est également connue sous le nom de planification de capacité sommaire, du point de vue du moteur, elle peut être plus difficile à résoudre dans le cas de l’utilisation d’une capacité finie, car davantage de données sont nécessaires pour déterminer la faisabilité.</span><span class="sxs-lookup"><span data-stu-id="2ae34-304">Even though operation scheduling is also known as rough-cut capacity planning, seen from an engine standpoint, it can be a harder problem to solve if finite capacity is used, as more data is needed to determine feasibility.</span></span>

<span data-ttu-id="2ae34-305">La capacité d’un groupe de ressources dépend du nombre et de la nature des ressources membres du groupe de ressources.</span><span class="sxs-lookup"><span data-stu-id="2ae34-305">The capacity of a resource group depends on which and how many resources are members of the resource group.</span></span> <span data-ttu-id="2ae34-306">Un groupe de ressources en lui-même n’a aucune capacité. Ce n’est que lorsque des ressources sont membres du groupe que celui-ci a une capacité.</span><span class="sxs-lookup"><span data-stu-id="2ae34-306">A resource group in itself does not have any capacity&mdash;only when resources are a member of the group will it have capacity.</span></span> <span data-ttu-id="2ae34-307">Étant donné que l’appartenance au groupe de ressources peut varier au fil du temps, la capacité doit être évaluée chaque jour.</span><span class="sxs-lookup"><span data-stu-id="2ae34-307">Because the resource group membership can vary over time, capacity must be evaluated per day.</span></span>

<span data-ttu-id="2ae34-308">Dans la planification des opérations, le calendrier du groupe de ressources est utilisé pour déterminer les heures de début et de fin de chaque opération.</span><span class="sxs-lookup"><span data-stu-id="2ae34-308">In operations scheduling, the resource group's calendar is used to determine the start and end times for each operation.</span></span> <span data-ttu-id="2ae34-309">Cela signifie que le calendrier du groupe de ressources impose une limite au temps qui peut être programmé pour une opération sur une journée dans un groupe de ressources.</span><span class="sxs-lookup"><span data-stu-id="2ae34-309">This means that the resource group's calendar places a limit on how much time can be operations scheduled for one operation on one day in one resource group.</span></span> <span data-ttu-id="2ae34-310">Contrairement au calendrier des ressources spécifiques, les données d’efficacité du calendrier sont ignorées pour le groupe de ressources car elles indiquent simplement les heures d’ouverture et non la capacité réelle.</span><span class="sxs-lookup"><span data-stu-id="2ae34-310">Opposite the calendar for the specific resources, the efficiency data of the calendar is ignored for the resource group as it simply denotes opening hours and not actual capacity.</span></span>

<span data-ttu-id="2ae34-311">Par exemple, si le temps de travail pour un groupe de ressources à une date spécifique est compris entre 8h00 et 16h00, une opération ne peut pas mettre imposer davantage de charge sur le groupe de ressources que ce qui peut être effectué en 8 heures, quelle que soit la capacité totale disponible du groupe de ressources ce jour-là.</span><span class="sxs-lookup"><span data-stu-id="2ae34-311">For example, if the working time for a resource group on one specific date is from 8:00 to 16:00, one operation can't put more load on the resource group than what can be fit into 8 hours, no matter how much capacity that the resource group has available in total on that day.</span></span> <span data-ttu-id="2ae34-312">La capacité disponible peut cependant limiter davantage la charge.</span><span class="sxs-lookup"><span data-stu-id="2ae34-312">The available capacity can however limit the load further.</span></span>

<span data-ttu-id="2ae34-313">La charge provenant de la planification de tâche sur toutes les ressources incluses dans le groupe de ressources un jour donné est prise en compte au moment du calcul de la capacité disponible du groupe de ressources ce même jour.</span><span class="sxs-lookup"><span data-stu-id="2ae34-313">The load from job scheduling on all the resources included in the resource group on a given day is considered when the available capacity for the resource group on the same day is calculated.</span></span> <span data-ttu-id="2ae34-314">Pour chaque date, le calcul est :</span><span class="sxs-lookup"><span data-stu-id="2ae34-314">For each date, the calculation is:</span></span>

<span data-ttu-id="2ae34-315">*Capacité disponible du groupe de ressources = Capacité des ressources du groupe en fonction de leur calendrier &ndash; Charge planifiée de la tâche sur les ressources du groupe &ndash; Charges planifiée des opérations sur les ressources du groupe &ndash; Charges planifiées des opérations sur le groupe de ressources*</span><span class="sxs-lookup"><span data-stu-id="2ae34-315">*Available resource group capacity = Capacity for resources in the group based on their calendar &ndash; Job scheduled load on the resources in the group &ndash; Operations scheduled load on the resources in the group &ndash; Operations scheduled load on the resource group*</span></span>

<span data-ttu-id="2ae34-316">Dans l’onglet **Demandes de ressources** de l’opération de l’itinéraire, les demandes de ressources peuvent être spécifiées à l’aide d’une ressource spécifique (auquel cas l’opération sera planifiée en utilisant cette ressource), pour un groupe de ressources, pour un type de ressource, ou pour un ou plusieurs aptitudes, compétences, cours ou certificats.</span><span class="sxs-lookup"><span data-stu-id="2ae34-316">On the **Resource requirements** tab on the route operation, the resource requirements can be specified using either a specific resource (in which case the operation will be scheduled using that resource), for a resource group, for a resource type, or for one or more capabilities, skill, course, or certificate.</span></span> <span data-ttu-id="2ae34-317">Bien que l’utilisation de toutes ces options offre une grande flexibilité de conception de l’itinéraire, elles compliquent également la planification du moteur car la capacité doit être prise en compte par « propriété » (le nom abstrait utilisé dans le moteur pour les aptitudes, les compétences, etc. ).</span><span class="sxs-lookup"><span data-stu-id="2ae34-317">While using all of these options gives a great flexibility on the route design, it also complicates the scheduling for the engine as the capacity must be accounted for per "property" (the abstract name used in the engine for capability, skills, and so on).</span></span>

<span data-ttu-id="2ae34-318">La capacité du groupe de ressources pour une capacité est la somme de la capacité de toutes les ressources du groupe de ressources qui possède l’aptitude en question.</span><span class="sxs-lookup"><span data-stu-id="2ae34-318">The resource group's capacity for a capability is the sum of the capacity for all resources in the resource group that has the capability in question.</span></span> <span data-ttu-id="2ae34-319">Si une ressource du groupe a une aptitude, elle sera prise en compte quel que soit le niveau de capacité requis.</span><span class="sxs-lookup"><span data-stu-id="2ae34-319">If a resource in the group has a capability, it will be considered no matter what level of the capacity is required.</span></span>

<span data-ttu-id="2ae34-320">Dans la planification des opérations, la capacité disponible pour une certaine aptitude d’un groupe de ressources sera réduite lorsqu’elle sera chargée d’une opération qui nécessite l’aptitude en question.</span><span class="sxs-lookup"><span data-stu-id="2ae34-320">In operations scheduling, the available capacity for a certain capability for a resource group will be reduced when it is loaded with an operation that requires the capability in question.</span></span> <span data-ttu-id="2ae34-321">Si l’opération nécessite plus d’une aptitude, la capacité sera réduite pour toutes les aptitudes requises.</span><span class="sxs-lookup"><span data-stu-id="2ae34-321">If the operation requires more than one capability, the capacity will be reduced for all required capabilities.</span></span>

<span data-ttu-id="2ae34-322">Pour chaque date, le calcul requis est :</span><span class="sxs-lookup"><span data-stu-id="2ae34-322">For each date, the required calculation is:</span></span>

<span data-ttu-id="2ae34-323">*Capacité disponible pour une aptitude = Capacité pour l’aptitude &ndash; Charge planifiée de la tâche sur les ressources ayant l’aptitude souhaitée, incluses dans le groupe de ressources &ndash; Charge planifiée des opérations sur les ressources ayant l’aptitude souhaitée, incluses dans le groupe de ressources &ndash; Charges planifiées des opérations sur le groupe de ressources lui-même qui nécessitent l’aptitude spécifique*</span><span class="sxs-lookup"><span data-stu-id="2ae34-323">*Available capacity for a capability = Capacity for the capability &ndash; Job scheduled load on the resources with the specific capability, included in the resource group &ndash; Operations scheduled load on the resources with the specific capability, included in the resource group &ndash; Operations scheduled load on the resource group itself that require the specific capability*</span></span>

<span data-ttu-id="2ae34-324">Cela signifie que si une charge est imposée sur une ressource spécifique, la charge est prise en compte dans le calcul de la capacité disponible du groupe de ressources par aptitude, car la charge sur une ressource spécifique réduit sa contribution à la capacité du groupe de ressources pour une aptitude, indépendamment du fait que la charge sur la ressource spécifique concerne cette aptitude spécifique.</span><span class="sxs-lookup"><span data-stu-id="2ae34-324">This means that if there is load on a specific resource, the load is considered in the calculation of the resource group's available capacity per capability, because the load on a specific resource reduces its contribution to the resource group's capacity for a capability no matter if the load on the specific resource is for that specific capability.</span></span> <span data-ttu-id="2ae34-325">Si une charge est imposée au niveau du groupe de ressources, elle n’est prise en compte dans le calcul de la capacité disponible du groupe de ressources par aptitude que si la charge provient d’une opération qui nécessite l’aptitude en question.</span><span class="sxs-lookup"><span data-stu-id="2ae34-325">If there is load on the resource group level, it is considered in the calculation of the resource group's available capacity per capability only if the load is from an operation that requires the specific capability.</span></span>

<span data-ttu-id="2ae34-326">La logique ci-dessus est compliquée, car elle est la même pour chaque type de « propriété ». Il en résulte que la planification des opérations avec une capacité finie nécessite le chargement d’une grande quantité de données.</span><span class="sxs-lookup"><span data-stu-id="2ae34-326">The above logic is complicated, as this is the same for each type of "property" so using operations scheduling with finite capacity requires a significant amount of data to be loaded.</span></span>

## <a name="viewing-scheduling-engine-input-and-output"></a><span data-ttu-id="2ae34-327">Affichage des entrées et sorties du moteur de planification</span><span class="sxs-lookup"><span data-stu-id="2ae34-327">Viewing scheduling engine input and output</span></span>

<span data-ttu-id="2ae34-328">Pour obtenir des détails spécifiques sur l’entrée et la sortie du processus de planification, activez la journalisation en accédant à **Administration d’organisation \> Configuration \> Planification \> Cockpit de traçage de la planification**.</span><span class="sxs-lookup"><span data-stu-id="2ae34-328">To get specific details of the input and output of the scheduling process,  enable logging by going to **Organization administration \> Setup \> Scheduling \> Scheduling tracing cockpit**.</span></span>

<span data-ttu-id="2ae34-329">Sur cette page, sélectionnez d’abord **Activer la journalisation** dans le volet Actions.</span><span class="sxs-lookup"><span data-stu-id="2ae34-329">On this page, first select **Enable logging** on the Action Pane.</span></span> <span data-ttu-id="2ae34-330">Exécutez ensuite la planification pour l’ordre de fabrication.</span><span class="sxs-lookup"><span data-stu-id="2ae34-330">Then run the scheduling for the production order.</span></span> <span data-ttu-id="2ae34-331">Cela fait, revenez à la page **Cockpit de traçage de la planification** et sélectionnez **Désactiver la journalisation** dans le volet Actions.</span><span class="sxs-lookup"><span data-stu-id="2ae34-331">When complete, return to the **Scheduling tracing cockpit** page and select **Disable logging** on the Action Pane.</span></span> <span data-ttu-id="2ae34-332">Actualisez la page ; une nouvelle ligne apparaît dans la grille.</span><span class="sxs-lookup"><span data-stu-id="2ae34-332">Refresh the page and a new line will appear in the grid.</span></span> <span data-ttu-id="2ae34-333">Sélectionnez la nouvelle ligne, puis **Télécharger** Dans le volet Actions.</span><span class="sxs-lookup"><span data-stu-id="2ae34-333">Select the new line and select **Download** on the Action Pane.</span></span> <span data-ttu-id="2ae34-334">Vous obtenez un dossier compressé .zip contenant les fichiers suivants :</span><span class="sxs-lookup"><span data-stu-id="2ae34-334">This will give you a .zip compressed folder containing the following files:</span></span>

- <span data-ttu-id="2ae34-335">**Log.txt** - Il s’agit du fichier journal qui décrit les étapes suivies par le moteur.</span><span class="sxs-lookup"><span data-stu-id="2ae34-335">**Log.txt** - This is the log file that describes the steps that the engine goes through.</span></span> <span data-ttu-id="2ae34-336">Il est très élaboré et peut être un peu difficile à appréhender. Mais lorsqu’il est utilisé dans l’expérimentation des configurations d’itinéraire pour résoudre les problèmes de performances, la première chose à rechercher est la différence de temps entre la première et la dernière ligne, car elle vous donne le temps exact passé par le planificateur.</span><span class="sxs-lookup"><span data-stu-id="2ae34-336">It is very elaborate and can be a bit overwhelming, but when used as part of experimenting with the route setup to resolve performance problems the first thing to look for is the difference in time between the first and the last line, as this will give you the exact time the scheduler has spent.</span></span>
- <span data-ttu-id="2ae34-337">**XmlModel.xml** - Il contient le modèle qui est construit dans X++ et qui est "exploité par le moteur.</span><span class="sxs-lookup"><span data-stu-id="2ae34-337">**XmlModel.xml** - This contains the model that is built in X++ and that the engine operates on.</span></span> <span data-ttu-id="2ae34-338">Le `JobId` utilisé dans le fichier correspond au `RecId` issu de la table source contenant les tâches (`ReqRouteJob` ou `ProdRouteJob`).</span><span class="sxs-lookup"><span data-stu-id="2ae34-338">The `JobId` used in the file correlates to the `RecId` from the source table containing the jobs (`ReqRouteJob` or `ProdRouteJob`).</span></span> <span data-ttu-id="2ae34-339">Ce qu’il faut vérifier dans ce fichier, c’est que les dates indiquées dans `ConstraintJobStartsAt` et `ConstraintJobEndsAt` sont comme prévu, que la propriété `JobGoal` est correctement définie et que les tâches sont liées les unes aux autres via les contraintes `JobLink`.</span><span class="sxs-lookup"><span data-stu-id="2ae34-339">The typical thing to look for in this file is that the dates given in `ConstraintJobStartsAt` and `ConstraintJobEndsAt` are as expected, that the `JobGoal` property is set correctly, and that the jobs are related to each other through the `JobLink` constraints.</span></span>
- <span data-ttu-id="2ae34-340">**XmlSlots.xml** - Il contient toutes les heures de travail et les réservations de capacité demandées par le moteur.</span><span class="sxs-lookup"><span data-stu-id="2ae34-340">**XmlSlots.xml** - This contains all the working times and capacity reservations that the engine has requested.</span></span> <span data-ttu-id="2ae34-341">Les heures de travail et les réservations du calendrier ne seront demandées par le moteur que pour les périodes où il essaie de placer les tâches (avec un tampon supplémentaire). Donc, si le fichier contient des heures très éloignées dans le futur, cela peut révéler un problème avec la configuration.</span><span class="sxs-lookup"><span data-stu-id="2ae34-341">The calendar working times and reservations will only be requested by the engine for the time periods where it tries to place the jobs (and an extra buffer), so if the file contains times very far in the future, it might be an indication of a problem with the setup.</span></span> <span data-ttu-id="2ae34-342">Les nœuds `ResourceProperty` afficheront pour chaque ressource le groupe de ressources et les capacités auxquelles il est associé pour les différentes périodes.</span><span class="sxs-lookup"><span data-stu-id="2ae34-342">The `ResourceProperty` nodes will show for each resource which resource group and capabilities it is associated with for which periods.</span></span>
- <span data-ttu-id="2ae34-343">**Result.xml** - Il contient le résultat de l’exécution de la planification.</span><span class="sxs-lookup"><span data-stu-id="2ae34-343">**Result.xml** - This contains the result of the scheduling run.</span></span>

<span data-ttu-id="2ae34-344">Notez que la fonctionnalité de traçage peut ajouter une surcharge importante pour les performances. Ne l’utilisez donc qu’avec parcimonie pour étudier la planification d’ordres particuliers.</span><span class="sxs-lookup"><span data-stu-id="2ae34-344">Note that the tracing functionality can add significant performance overhead, so only use it for investigating scheduling of specific orders in a controlled manner.</span></span> <span data-ttu-id="2ae34-345">Si elle est activée pendant une exécution de planification générale, celle-ci atteindra rapidement sa limite de taille et s’arrêtera.</span><span class="sxs-lookup"><span data-stu-id="2ae34-345">If it is turned on during a master planning run it will quickly reach its size limit and stop.</span></span>

## <a name="troubleshooting-performance"></a><span data-ttu-id="2ae34-346">Résolution des problèmes de performance</span><span class="sxs-lookup"><span data-stu-id="2ae34-346">Troubleshooting performance</span></span>

<span data-ttu-id="2ae34-347">Comme on peut le comprendre à partir de toutes les sections précédentes, la configuration et l’utilisation du moteur de planification présente quelques pièges qui peuvent conduire à des problèmes de performances.</span><span class="sxs-lookup"><span data-stu-id="2ae34-347">As can be understood from all of the previous sections, there are some pitfalls when it comes to the setup and usage of the scheduling engine, which can lead to performance problems.</span></span> <span data-ttu-id="2ae34-348">La liste de vérification suivante peut être utilisée pour résoudre ces problèmes.</span><span class="sxs-lookup"><span data-stu-id="2ae34-348">The following check list can be used for troubleshooting such issues.</span></span> <span data-ttu-id="2ae34-349">Il est important d’examiner tous les points car les problèmes découlent le plus souvent d’une combinaison de plusieurs facteurs.</span><span class="sxs-lookup"><span data-stu-id="2ae34-349">It is important to look at all the points as it is most often a combination of multiple factors that leads to problems.</span></span>

### <a name="performing-scheduling-as-part-of-mrp-when-it-is-not-needed"></a><span data-ttu-id="2ae34-350">Effectuer la planification dans le cadre de la MRP lorsque cela n’est pas nécessaire</span><span class="sxs-lookup"><span data-stu-id="2ae34-350">Performing scheduling as part of MRP when it is not needed</span></span>

<span data-ttu-id="2ae34-351">Même si les itinéraires servent à contrôler la production, par exemple en terme de coût et d’établissement de rapports, il peut ne pas être nécessaire de les prendre en compte pendant la MRP.</span><span class="sxs-lookup"><span data-stu-id="2ae34-351">Even though routes are used for the production control purposes such as costing and reporting, it might not be necessary to consider them during MRP.</span></span> <span data-ttu-id="2ae34-352">Dans certains cas, un délai de production standard spécifié pour chaque article est suffisant pour la planification.</span><span class="sxs-lookup"><span data-stu-id="2ae34-352">In some cases, having a standard production lead time specified for the item will be sufficient for planning.</span></span> <span data-ttu-id="2ae34-353">Pour désactiver la planification d’itinéraire, définissez la plage temporelle de la capacité sur zéro.</span><span class="sxs-lookup"><span data-stu-id="2ae34-353">To turn off route scheduling, set the capacity time fence to zero.</span></span> <span data-ttu-id="2ae34-354">Si vous devez effectuer la planification, la plage temporelle de la capacité doit être soigneusement définie car il peut ne pas être nécessaire de prendre en compte les itinéraires pour toute l’étendue de la plage temporelle de couverture de la MRP.</span><span class="sxs-lookup"><span data-stu-id="2ae34-354">If scheduling should be done, then the capacity time fence must be carefully set because it might not be necessary to consider routes for the full extent of the MRP's coverage time fence.</span></span>

<span data-ttu-id="2ae34-355">Notez que si un ordre n’est pas planifié pendant la MRP, il devra l’être lors de la confirmation de l’ordre planifié.</span><span class="sxs-lookup"><span data-stu-id="2ae34-355">Note that if the order is not scheduled during MRP, then it will instead need to be scheduled when the planned order is firmed.</span></span> <span data-ttu-id="2ae34-356">Cela signifie que le processus de confirmation prendra plus de temps. Donc, selon le nombre d’ordres planifiés suggérés qui seront confirmés, le gain de performance pendant la MRP peut être perdu au moment de la confirmation.</span><span class="sxs-lookup"><span data-stu-id="2ae34-356">This means that the firming process will take longer, so depending on how many of the suggested planned orders get firmed the performance gain during MRP might be lost at firming.</span></span>

### <a name="route-with-unnecessary-operations"></a><span data-ttu-id="2ae34-357">Itinéraire avec des opérations inutiles</span><span class="sxs-lookup"><span data-stu-id="2ae34-357">Route with unnecessary operations</span></span>

<span data-ttu-id="2ae34-358">Lors de la conception de l’itinéraire, il est tentant d’essayer de modéliser exactement le monde réel, avec toutes les étapes de la production.</span><span class="sxs-lookup"><span data-stu-id="2ae34-358">When designing the route, it is tempting to try to model the real world exactly with all the steps the production goes through.</span></span> <span data-ttu-id="2ae34-359">Bien que cela puisse être utile dans certains cas, ce n’est pas bon pour les performances car cela fait grossir le modèle sur lequel le moteur doit travailler (à la fois en termes de tâches et de contraintes) et cela fait augmenter le nombre d’instructions SQL à exécuter pour l’insertion et la mise à jour des tâches et des réservations de capacité.</span><span class="sxs-lookup"><span data-stu-id="2ae34-359">While this can be useful in some cases, it is not good for the performance as the model the engine needs to work on gets larger (both in terms of jobs and constraints) and more SQL statements will be executed for insertion and update of the jobs and capacity reservations.</span></span> <span data-ttu-id="2ae34-360">En outre, il existe un effet en aval : devoir finalement rendre compte de la progression des tâches, ce qui peut être facilité par les validations automatiques.</span><span class="sxs-lookup"><span data-stu-id="2ae34-360">Also, there is the downstream effect of having to eventually report progress on the jobs, which can be mitigated with automatic postings.</span></span> <span data-ttu-id="2ae34-361">Si des données ne sont utilisées pour rien, cela crée une charge inutile.</span><span class="sxs-lookup"><span data-stu-id="2ae34-361">If the data is not used for anything, it creates unnecessary load.</span></span>

<span data-ttu-id="2ae34-362">Nous vous recommandons de ne créer que les opérations strictement nécessaires à la planification (qui seront généralement les ressources critiques) et/ou à l’évaluation des coûts.</span><span class="sxs-lookup"><span data-stu-id="2ae34-362">We recommend that you only create operations that are strictly needed for scheduling (which will typically be the bottleneck resources) and/or costing purposes.</span></span> <span data-ttu-id="2ae34-363">Vous pouvez également regrouper de nombreuses opérations distinctes plus petites en une seule opération plus grande qui représente une plus grande partie du processus.</span><span class="sxs-lookup"><span data-stu-id="2ae34-363">Alternatively you should group many smaller distinct operations into one larger operation that represents a greater part of the process.</span></span>

### <a name="many-applicable-resources-for-an-operation"></a><span data-ttu-id="2ae34-364">Nombreuses ressources applicables pour une opération</span><span class="sxs-lookup"><span data-stu-id="2ae34-364">Many applicable resources for an operation</span></span>

<span data-ttu-id="2ae34-365">Le nombre de ressources applicables pour une opération est déterminé par les besoins en ressources définis dans la relation d’opération.</span><span class="sxs-lookup"><span data-stu-id="2ae34-365">The number of applicable resources for an operation is determined by the resource requirements set on the operation relation.</span></span> <span data-ttu-id="2ae34-366">Le besoin peut concerner une ressource spécifique (individuelle), ou peut être basé sur l’appartenance de la ressource à un groupe de ressources ou à une aptitude.</span><span class="sxs-lookup"><span data-stu-id="2ae34-366">The requirement can either be for a specific (individual) resource or it can be based on the resource's membership of a resource group or capability.</span></span>

<span data-ttu-id="2ae34-367">Si la planification n’est pas effectuée en utilisant une capacité finie et que toutes les ressources applicables ont le même calendrier et la même efficacité, le moteur de planification finira toujours par choisir la même ressource pour une opération, mais seulement après avoir essayé toutes les ressources applicables pour vérifier s’il en existe une « mieux » que les autres.</span><span class="sxs-lookup"><span data-stu-id="2ae34-367">If scheduling is not done using finite capacity and all the applicable resources have the same calendar and efficiency, then the scheduling engine will always end up picking the same resource for an operation, but only after trying all the applicable resources to check if there is one that is "better" than the others.</span></span> <span data-ttu-id="2ae34-368">Dans ce cas, il est possible de réduire fortement la charge de la planification en affectant toujours une ressource spécifique à l’opération au moment de la conception de l’itinéraire.</span><span class="sxs-lookup"><span data-stu-id="2ae34-368">In this case, the load of the scheduling can be greatly reduced simply by always assigning a specific resource to the operation at the route design time.</span></span>

### <a name="route-with-parallel-operations"></a><span data-ttu-id="2ae34-369">Itinéraire comportant des opérations parallèles</span><span class="sxs-lookup"><span data-stu-id="2ae34-369">Route with parallel operations</span></span>

<span data-ttu-id="2ae34-370">Bien que les opérations parallèles (primaire/secondaire) constituent un outil puissant pour modéliser des scénarios tels que la nécessité simultanée d’une machine et d’un opérateur pour effectuer une tâche spécifique, elles sont également à l’origine de nombreux problèmes de performances.</span><span class="sxs-lookup"><span data-stu-id="2ae34-370">While parallel operations (primary/secondary) are a powerful tool to model scenarios like when a machine and an operator are both needed to perform a specific task, it is also the source of many performance issues.</span></span> <span data-ttu-id="2ae34-371">Si un besoin pour une ressource individuelle spécifique est affecté à la fois à l’opération principale et à l’opération secondaire, ce n’est généralement pas un problème.</span><span class="sxs-lookup"><span data-stu-id="2ae34-371">If a requirement for a specific individual resource is assigned to both the primary and secondary operation, it is typically not a problem.</span></span> <span data-ttu-id="2ae34-372">Mais s’il existe de nombreuses ressources possibles pour chacune des opérations, cela ajoute une complexité de calcul significative à la planification.</span><span class="sxs-lookup"><span data-stu-id="2ae34-372">But if there are many possible resources for each of the operations, then it adds significant computational complexity to the scheduling.</span></span>

<span data-ttu-id="2ae34-373">Une alternative à l’utilisation d’opérations parallèles consiste, au choix, à modéliser les paires comme des ressources « virtuelles » (qui représenteront alors l’équipe toujours associé à l’opération), ou à ne pas modéliser une des opérations si elle ne représente pas un goulot d’étranglement.</span><span class="sxs-lookup"><span data-stu-id="2ae34-373">An alternative to using parallel operations is either to model the pairs as "virtual" resources (which will then represent the team that always goes together for the operation) or to simply not model one of the operations if it doesn't represent a bottleneck.</span></span>

### <a name="route-with-quantity-of-resources-higher-than-1"></a><span data-ttu-id="2ae34-374">Itinéraire où la quantité des ressources est supérieure à 1</span><span class="sxs-lookup"><span data-stu-id="2ae34-374">Route with quantity of resources higher than 1</span></span>

<span data-ttu-id="2ae34-375">Si vous définissez la quantité de ressources nécessaires pour une opération supérieure à un, le résultat est le même que si vous utilisiez des opérations primaire/secondaire, car plusieurs tâches parallèles sont envoyées au moteur.</span><span class="sxs-lookup"><span data-stu-id="2ae34-375">If setting the quantity of resources needed for an operation higher than one, then it results effectively the same as using primary/secondary operations because multiple parallel jobs are sent to the engine.</span></span> <span data-ttu-id="2ae34-376">Cependant, dans ce cas, il n’est pas possible d’utiliser des affectations de ressources spécifiques, car une quantité supérieure à un nécessite que plusieurs ressources soient applicables pour l’opération.</span><span class="sxs-lookup"><span data-stu-id="2ae34-376">However, for this case there is not an option of using specific resource assignments, because a quantity higher than one requires that more than one resource is applicable for the operation.</span></span>

### <a name="excessive-use-of-finite-capacity"></a><span data-ttu-id="2ae34-377">Utilisation excessive d’une capacité finie</span><span class="sxs-lookup"><span data-stu-id="2ae34-377">Excessive use of finite capacity</span></span>

<span data-ttu-id="2ae34-378">L’utilisation d’une capacité finie oblige le moteur à charger les informations de capacité à partir d’une base de données. Cela peut entraîner une surcharge de calcul car il sera plus difficile de trouver une solution, en particulier dans les environnements où les ressources sont réservées presque à leur capacité maximale.</span><span class="sxs-lookup"><span data-stu-id="2ae34-378">Use of finite capacity requires the engine to load the capacity information from a database and can have a computational overhead because it will be harder to find a solution especially in environments where the resources are booked close to their maximum capacity.</span></span> <span data-ttu-id="2ae34-379">En conséquence, il est important d’évaluer soigneusement si une ressource doit vraiment utiliser une capacité finie ou si elle peut être surréservée.</span><span class="sxs-lookup"><span data-stu-id="2ae34-379">As a result, it is important to carefully evaluate if a resource really needs to use finite capacity or they can be overbooked.</span></span> <span data-ttu-id="2ae34-380">Comme l’importance de ne pas surréserver de ressources à capacité finie est variable, nous vous recommandons d’utiliser l’option de goulot d’étranglement sur une ressource en combinaison avec une valeur distincte dans la « Plage de gestion de la capacité pour les ressources critiques ».</span><span class="sxs-lookup"><span data-stu-id="2ae34-380">Because there might be a difference among finite capacity resources in how important they are not to overbook, we recommend using the bottleneck option on a resource in combination with a separate value on the plan in "Capacity time fence for bottleneck resources".</span></span> <span data-ttu-id="2ae34-381">L’utilisation du concept de goulot d’étranglement (ressource critique) peut permettre de réduire la plage de temps de capacité finie générale.</span><span class="sxs-lookup"><span data-stu-id="2ae34-381">Using the bottleneck concept can enable that the general finite capacity time fence can be lowered.</span></span>

### <a name="setting-hard-links"></a><span data-ttu-id="2ae34-382">Définition de liens physiques</span><span class="sxs-lookup"><span data-stu-id="2ae34-382">Setting hard links</span></span>

<span data-ttu-id="2ae34-383">Le type de lien standard de l’itinéraire est *souple*, ce qui signifie qu’on autorise un délai entre l’heure de fin d’une opération et le début de la suivante.</span><span class="sxs-lookup"><span data-stu-id="2ae34-383">The standard link type of the route is *soft*, which means that a time gap is allowed between the finishing time of one operation and the start of the next.</span></span> <span data-ttu-id="2ae34-384">Cette tolérance peut avoir l’effet indésirable que, si des matières ou une capacité ne sont pas disponibles pour l’une des opérations pendant très longtemps, la production peut être stoppée pendant un certain temps, impliquant une augmentation du travail en cours.</span><span class="sxs-lookup"><span data-stu-id="2ae34-384">Allowing this can have the unfortunate effect that, if materials or capacity are not available for one of the operations for a very long time, the production could be idle for quite a while, meaning a possible increase of work in progress.</span></span> <span data-ttu-id="2ae34-385">Cela ne se produit pas avec les liens physiques car la fin et le début doivent concorder parfaitement.</span><span class="sxs-lookup"><span data-stu-id="2ae34-385">This will not happen with hard links because the finish and start must align perfectly.</span></span> <span data-ttu-id="2ae34-386">Mais l’établissement de liens physiques rend le problème de planification plus difficile à résoudre car l’intersection entre les heures de travail et la capacité soit être calculée pour les deux ressources des opérations.</span><span class="sxs-lookup"><span data-stu-id="2ae34-386">But setting hard links makes the scheduling problem more difficult because working time and capacity intersections must be calculated for the two resources of the operations.</span></span> <span data-ttu-id="2ae34-387">Si des opérations parallèles sont également impliquées, cela ajoute un temps de calcul significatif.</span><span class="sxs-lookup"><span data-stu-id="2ae34-387">If there are also parallel operations involved, this adds significant computational time.</span></span> <span data-ttu-id="2ae34-388">Si les ressources des deux opérations ont des calendriers différents qui ne se chevauchent pas du tout, le problème est insoluble.</span><span class="sxs-lookup"><span data-stu-id="2ae34-388">If the resources of the two operations have different calendars that don't overlap at all, the problem is unsolvable.</span></span>

<span data-ttu-id="2ae34-389">Nous vous recommandons de n’utiliser de liens physiques que lorsque cela est strictement nécessaire, et de bien réfléchir s’ils sont nécessaires à chaque opération de l’itinéraire.</span><span class="sxs-lookup"><span data-stu-id="2ae34-389">We recommend using hard links only when strictly necessary, and carefully consider if it is necessary for each operation of the route.</span></span>

<span data-ttu-id="2ae34-390">Pour réduire le travail en cours sans appliquer de liens physiques, une astuce consiste à planifier l’ordre deux fois, en choisissant la direction opposée la deuxième fois.</span><span class="sxs-lookup"><span data-stu-id="2ae34-390">To reduce the work in progress without applying hard links, a trick is to schedule the order twice with changing to the opposite direction for the second pass.</span></span> <span data-ttu-id="2ae34-391">Si la première planification a été effectuée à rebours à partir de la date de livraison, la seconde doit être effectuée vers l’aval à partir de la date de début prévue.</span><span class="sxs-lookup"><span data-stu-id="2ae34-391">If the first schedule was done backwards from delivery date, then the second should be done forward from the scheduled start date.</span></span> <span data-ttu-id="2ae34-392">Il en résultera la compression maximale possible des tâches, afin de réduire au minimum le travail en cours.</span><span class="sxs-lookup"><span data-stu-id="2ae34-392">This will result in the jobs being compressed as much as possible so that the work in progress is minimized.</span></span>

### <a name="separate-calendar-for-each-resource"></a><span data-ttu-id="2ae34-393">Calendrier distinct pour chaque ressource</span><span class="sxs-lookup"><span data-stu-id="2ae34-393">Separate calendar for each resource</span></span>

<span data-ttu-id="2ae34-394">L’une des principales sources de données du moteur de planification est les informations de calendrier, dont le chargement à partir de la base de données peut représenter un coût important.</span><span class="sxs-lookup"><span data-stu-id="2ae34-394">One of the main sources of data for the scheduling engine is calendar information, which can be expensive to load from the database.</span></span> <span data-ttu-id="2ae34-395">Étant donné que les calendriers sont générés à partir de modèles, il peut être tentant de générer un calendrier pour chaque ressource, puis d’ajuster les informations de ce calendrier lorsque la ressource a des temps d’arrêt et d’autres problèmes.</span><span class="sxs-lookup"><span data-stu-id="2ae34-395">Because calendars are generated based on templates, it would be tempting to generate a calendar for each resource and then adjust the information in this calendar when the resource has downtime and other issues.</span></span> <span data-ttu-id="2ae34-396">Cependant, cela limiterait considérablement la capacité des moteurs à mettre en cache les données de calendrier, car il aurait besoin de demander de nouvelles données pour chaque ressource. Cela constituerait une source importante de problèmes de performances.</span><span class="sxs-lookup"><span data-stu-id="2ae34-396">However, doing this will severely limit the engines ability to cache the calendar data as it would need to request new data for each resource and can be a large source of performance problems.</span></span> <span data-ttu-id="2ae34-397">Au lieu de cela, nous vous recommandons de réutiliser les calendriers autant que possible entre les ressources, puis de contrôler les modifications des temps d’arrêt en attribuant un ID de calendrier différent pour une période.</span><span class="sxs-lookup"><span data-stu-id="2ae34-397">Instead, we recommend that you reuse the calendars as much as possible between the resources, and then control downtime changes by assigning a different calendar ID for a period.</span></span>

### <a name="high-number-of-working-time-slots-per-calendar-day"></a><span data-ttu-id="2ae34-398">Grand nombre de plages horaires de travail par jour du calendrier</span><span class="sxs-lookup"><span data-stu-id="2ae34-398">High number of working time slots per calendar day</span></span>

<span data-ttu-id="2ae34-399">Étant donné que le moteur fonctionne en examinant les créneaux horaires un par un pour la capacité, il est avantageux de minimiser le nombre de créneaux horaires par jour du calendrier.</span><span class="sxs-lookup"><span data-stu-id="2ae34-399">Because the engine works by examining time slots one-by-one for capacity, it is beneficial to minimize the number of time slots per calendar day.</span></span> <span data-ttu-id="2ae34-400">Cela est possible, par exemple, en examinant s’il est important que le calendrier résultant reflète le fait que les employés ont une pause de 5 minutes toutes les heures.</span><span class="sxs-lookup"><span data-stu-id="2ae34-400">This could be done, for example, by considering whether it's important for the resulting schedule to reflect that workers have a 5-minute break every hour.</span></span>

### <a name="large-or-none-scheduling-timeouts"></a><span data-ttu-id="2ae34-401">Délais de planification importants (ou aucun)</span><span class="sxs-lookup"><span data-stu-id="2ae34-401">Large (or none) scheduling timeouts</span></span>

<span data-ttu-id="2ae34-402">Les performances du moteur de planification peuvent être optimisées à l’aide des paramètres qui se trouvent sur la page **Paramètres de planification**.</span><span class="sxs-lookup"><span data-stu-id="2ae34-402">Scheduling engine performance can be optimized using parameters found on the **Scheduling parameters** page.</span></span> <span data-ttu-id="2ae34-403">Les paramètres **Délai de planification activé** et **Délai d’optimisation de la planification activé** doivent toujours être définis sur **Oui**.</span><span class="sxs-lookup"><span data-stu-id="2ae34-403">The **Scheduling timeout enabled** and **Scheduling optimization timeout enabled** settings should always be set to **Yes**.</span></span> <span data-ttu-id="2ae34-404">S’ils sont définis sur **Non**, la planification peut s’exécuter indéfiniment dans le cas de la création d’un itinéraire irréalisable avec de nombreuses options.</span><span class="sxs-lookup"><span data-stu-id="2ae34-404">If set to **No**, the scheduling can potentially run infinitely if an unfeasible route with many options has been created.</span></span>

<span data-ttu-id="2ae34-405">La valeur **Temps de planification maximum par séquence** contrôle le nombre maximal de secondes à consacrer à la recherche d’une solution pour une séquence (dans la plupart des cas, une séquence correspond à un ordre unique).</span><span class="sxs-lookup"><span data-stu-id="2ae34-405">The value for **Maximum scheduling time per sequence** controls how many seconds can, at most, be spent trying to find a solution for a single sequence (in most cases a sequence corresponds to a single order).</span></span> <span data-ttu-id="2ae34-406">La valeur à utiliser ici dépend fortement de la complexité de l’itinéraire et des paramètres tels que la capacité finie, mais un maximum d’environ 30 secondes est un bon point de départ.</span><span class="sxs-lookup"><span data-stu-id="2ae34-406">The value to use here highly depends on the complexity of the route and settings like finite capacity, ut a maximum of about 30 seconds is a good starting point.</span></span>

<span data-ttu-id="2ae34-407">La valeur **Délai des tentatives d’optimisation** contrôle le nombre maximal de secondes à consacrer à la recherche d’une solution meilleure que celle trouvée à l’origine.</span><span class="sxs-lookup"><span data-stu-id="2ae34-407">The value for **Optimization attempts timeout** controls how many seconds can at most be used to find a better solution than the one originally found.</span></span> <span data-ttu-id="2ae34-408">Cela n’influencera que les itinéraires qui utilisent des opérations parallèles, car elles nécessitent de tester différentes combinaisons.</span><span class="sxs-lookup"><span data-stu-id="2ae34-408">This will only influence routes that are using parallel operations as these make it necessary to test different combinations.</span></span>

> [!NOTE]
> <span data-ttu-id="2ae34-409">Les valeurs définies pour les délais seront appliquées à la fois pour la planification des ordres de fabrication lancés et des ordres planifiés dans le cadre de la MRP.</span><span class="sxs-lookup"><span data-stu-id="2ae34-409">The values set for the timeouts will be applied both for scheduling of released production orders and of planned orders as part of MRP.</span></span> <span data-ttu-id="2ae34-410">Par conséquent, la définition de valeurs très élevées peut augmenter considérablement la durée d’exécution de la MRP lors de l’exécution d’un planification comportant de nombreux ordres de fabrication planifiés.</span><span class="sxs-lookup"><span data-stu-id="2ae34-410">As a result, setting very high values could significantly add to the run time of MRP when running for a plan with many planned production orders.</span></span>


[!INCLUDE[footer-include](../../includes/footer-banner.md)]