---
title: Planifier la création de travail pendant la vague
description: Cette rubrique décrit comment configurer et utiliser la méthode de traitement de vague Planifier la création de travail.
author: perlynne
ms.date: 01/14/2021
ms.topic: article
ms.prod: ''
ms.technology: ''
ms.search.form: WHSPostMethod, WHSWavePostMethodTaskConfig, WHSWaveTemplateTable, WHSParameters, WHSWaveTableListPage, WHSWorkTableListPage, WHSWorkTable, BatchJobEnhanced, WHSPlannedWorkOrder
audience: Application User
ms.reviewer: ''
ms.search.scope: Core, Operations
ms.search.region: Global
ms.author: kamaybac
ms.search.validFrom: 2021-01-14
ms.dyn365.ops.version: 10.0.17
ms.openlocfilehash: e4258c03b12a80a5bd81328ae7418835d68f82e7
ms.sourcegitcommit: 0e8db169c3f90bd750826af76709ef5d621fd377
ms.translationtype: HT
ms.contentlocale: fr-FR
ms.lasthandoff: 04/01/2021
ms.locfileid: "5835700"
---
# <a name="schedule-work-creation-during-wave"></a><span data-ttu-id="c8987-103">Planifier la création de travail pendant la vague</span><span class="sxs-lookup"><span data-stu-id="c8987-103">Schedule work creation during wave</span></span>

[!include [banner](../../includes/banner.md)]

<span data-ttu-id="c8987-104">Utilisez la fonctionnalité *Planifier la création de travail* dans le cadre de votre processus de traitement de vague pour accroître le débit de traitement de vague en faisant en sorte que le système crée le travail à l’aide du traitement parallèle.</span><span class="sxs-lookup"><span data-stu-id="c8987-104">Use the *Schedule work creation* feature as part of your waving process to help increase wave processing throughput by having the system create work using parallel processing.</span></span>

<span data-ttu-id="c8987-105">Lorsque la fonctionnalité est activée, le travail planifié est automatiquement créé, ce que le système traitera éventuellement pour créer un travail réel.</span><span class="sxs-lookup"><span data-stu-id="c8987-105">When the functionality is enabled, planned work will automatically get created, which the system will eventually process to create actual work.</span></span> <span data-ttu-id="c8987-106">Si le nombre de lignes de chargement d’onde atteint un seuil prédéterminé, le système créera un travail réel plus rapidement en appliquant un traitement parallèle et asynchrone.</span><span class="sxs-lookup"><span data-stu-id="c8987-106">If the number of wave load lines reaches a predetermined threshold, the system will create actual work more quickly by applying parallel, asynchronous processing.</span></span>

## <a name="turn-on-the-scheduled-work-creation-features-in-feature-management"></a><span data-ttu-id="c8987-107">Activer les fonctionnalités de création de travail planifiée dans la gestion des fonctionnalités</span><span class="sxs-lookup"><span data-stu-id="c8987-107">Turn on the scheduled work creation features in feature management</span></span>

<span data-ttu-id="c8987-108">Pour utiliser les fonctionnalités décrites dans cette rubrique, elles doivent être activées pour votre système.</span><span class="sxs-lookup"><span data-stu-id="c8987-108">To use the features described in this topic, they must be turned on for your system.</span></span> <span data-ttu-id="c8987-109">Utilisez l’espace de travail [Gestion des fonctionnalités](../../fin-ops-core/fin-ops/get-started/feature-management/feature-management-overview.md) pour activer les fonctionnalités suivantes dans l’ordre indiqué :</span><span class="sxs-lookup"><span data-stu-id="c8987-109">Use [Feature management](../../fin-ops-core/fin-ops/get-started/feature-management/feature-management-overview.md) workspace to turn on the following features in the following order:</span></span>

1. <span data-ttu-id="c8987-110">**Blocage des tâches à l’échelle de l’organisation** : Requis pour la configuration manuelle et automatique de la création de travail planifiée.</span><span class="sxs-lookup"><span data-stu-id="c8987-110">**Organization-wide work blocking** - Required for both manual and automatic configuration of scheduled work creation.</span></span>
1. <span data-ttu-id="c8987-111">**Planifier la création du travail** : Requis pour la configuration manuelle et automatique de la création de travail planifiée.</span><span class="sxs-lookup"><span data-stu-id="c8987-111">**Schedule work creation** - Required for both manual and automatic configuration of scheduled work creation.</span></span>
1. <span data-ttu-id="c8987-112">**Méthode de vague « Planifier la création du travail » à l’échelle de l’organisation** : Requis pour la configuration manuelle et automatique de la création de travail planifiée.</span><span class="sxs-lookup"><span data-stu-id="c8987-112">**Organization-wide "Schedule work creation" wave method** - Required for automatic configuration of scheduled work creation.</span></span> <span data-ttu-id="c8987-113">Vous n’avez pas besoin de cette fonctionnalité si vous n’utilisez que la configuration manuelle.</span><span class="sxs-lookup"><span data-stu-id="c8987-113">You don't need this feature if you will only use manual configuration.</span></span>

<a name="Auto-enable-schedule-work-creation"></a>

## <a name="automatically-configure-scheduled-work-creation"></a><span data-ttu-id="c8987-114">Configurer automatiquement la création de travail planifiée</span><span class="sxs-lookup"><span data-stu-id="c8987-114">Automatically configure scheduled work creation</span></span>

<span data-ttu-id="c8987-115">Si vous activez la fonctionnalité *Méthode de vague « Planifier la création du travail » à l’échelle de l’organisation*, ce qui suit se produit automatiquement sur votre système :</span><span class="sxs-lookup"><span data-stu-id="c8987-115">If you enable the *Organization-wide "Schedule work creation" wave method* feature, the following automatically occurs on your system:</span></span>

- <span data-ttu-id="c8987-116">La méthode de vague *Planifier la création du travail* (`WHSScheduleWorkCreationWaveStepMethod`) est ajoutée et configurée pour s’exécuter en parallèle sur toutes les entités juridiques.</span><span class="sxs-lookup"><span data-stu-id="c8987-116">The *Schedule work creation* wave method (`WHSScheduleWorkCreationWaveStepMethod`) is added and configured to run in parallel across all legal entities.</span></span>
- <span data-ttu-id="c8987-117">Les modèles de vagues de toutes les entités juridiques dont les options **Type de modèle de vague** définie sur *Expédition* et **Statut du modèle** définie sur *Valide* auront la méthode *Créer un travail* remplacée par la méthode *Planifier la création du travail*.</span><span class="sxs-lookup"><span data-stu-id="c8987-117">Wave templates from all legal entities that have **Wave template type** set to *Shipping* and **Template status** set to *Valid* will have the *Create work* method replaced by the *Schedule work creation* method.</span></span> <span data-ttu-id="c8987-118">Cependant, les modèles de vague provenant d’entités juridiques où la méthode *Créer un travail* peut être répétée ne seront pas modifiés.</span><span class="sxs-lookup"><span data-stu-id="c8987-118">However, wave templates from legal entities where the *Create work* method is allowed to be repeatable will not be modified.</span></span>
- <span data-ttu-id="c8987-119">Les configurations de tâche pour la méthode *Planifier la création du travail* sera créée pour tous les entrepôts de toutes les entités juridiques où l’option **Utiliser les processus de gestion d’entrepôt** est activée.</span><span class="sxs-lookup"><span data-stu-id="c8987-119">Task configurations for the *Schedule work creation* method will be created for all warehouses from all legal entities that have **Use warehouse management processes** enabled.</span></span> <span data-ttu-id="c8987-120">Cela signifie que la méthode *Planifier la création du travail* fonctionnera désormais en parallèle par défaut.</span><span class="sxs-lookup"><span data-stu-id="c8987-120">This means that the *Schedule work creation* method will now run in parallel by default.</span></span> <span data-ttu-id="c8987-121">Les entrepôts existants pour lesquels vous changez l’option **Utiliser les processus de gestion d’entrepôt** de *Non* à *Oui* exécuteront également cette méthode en parallèle par défaut.</span><span class="sxs-lookup"><span data-stu-id="c8987-121">Existing warehouses for which you change **Use warehouse management processes** from *No* to *Yes* will also run this method in parallel by default.</span></span>
- <span data-ttu-id="c8987-122">Toutes les entités juridiques traiteront les vagues par lots et l’option **Attendre le verrouillage (ms)** sera définie sur une valeur par défaut de *60 000* ms si elle était précédemment définie sur *0* ms.</span><span class="sxs-lookup"><span data-stu-id="c8987-122">All legal entities will process waves in batches and **Wait for lock (ms)** will be set to a default value of *60,000* ms if it was previously set to *0* ms.</span></span>
- <span data-ttu-id="c8987-123">Tous les nouveaux modèles de vagues que vous créerez auront la méthode de vague *Planifier la création du travail* au lieu de la méthode *Créer un travail*.</span><span class="sxs-lookup"><span data-stu-id="c8987-123">All the new wave templates that you create will have the *Schedule work creation* wave method instead of the *Create Work* method.</span></span>

<span data-ttu-id="c8987-124">Les configurations existantes de traitement des tâches et des vagues seront également conservées pour toutes les entités juridiques déjà configurées pour traiter les vagues par lots, et pour tous les entrepôts déjà configurés pour utiliser la méthode *Planifier la création du travail* en parallèle.</span><span class="sxs-lookup"><span data-stu-id="c8987-124">The existing task and wave processing configurations will also be kept for all legal entities that are already configured to process waves in batches, and for all warehouses that are already configured to use the *Schedule work creation* method in parallel.</span></span>

<span data-ttu-id="c8987-125">Si nécessaire, vous pouvez rétablir manuellement tout ou partie des paramètres définis automatiquement lorsque vous avez activé la fonctionnalité *Méthode de vague « Planifier la création du travail » à l’échelle de l’organisation* en procédant comme suit :</span><span class="sxs-lookup"><span data-stu-id="c8987-125">If necessary, you can manually revert any or all of the settings made automatically when you enabled the *Organization-wide Schedule work creation wave method* feature by doing the following:</span></span>

- <span data-ttu-id="c8987-126">Pour les modèles de vague, accédez à **Gestion des entrepôts \> Configuration \> Vagues \> Modèles de vague**.</span><span class="sxs-lookup"><span data-stu-id="c8987-126">For wave templates, go to **Warehouse management \> Setup \> Waves \> Wave templates**.</span></span> <span data-ttu-id="c8987-127">Remplacez la méthode *Planifier la création du travail* par *Créer un travail*.</span><span class="sxs-lookup"><span data-stu-id="c8987-127">Replace *Schedule work creation* method with *Create work*.</span></span>
- <span data-ttu-id="c8987-128">Pour les paramètres d’entrepôt, accédez à **Gestion des entrepôts \> Paramétrage \> Paramètres de gestion des entrepôts**.</span><span class="sxs-lookup"><span data-stu-id="c8987-128">For warehouse parameters, go to **Warehouse management \> Setup \> Warehouse management parameters**.</span></span> <span data-ttu-id="c8987-129">Sur l’onglet **Traitement des vagues**, appliquez vos valeurs préférées pour **Traiter les vagues par lots** et **Attendre le verrouillage (ms)**.</span><span class="sxs-lookup"><span data-stu-id="c8987-129">On the **Wave processing** tab, apply your preferred values for **Process waves in batch** and **Wait for lock (ms)**.</span></span>
- <span data-ttu-id="c8987-130">Pour les méthodes de vague, accédez à **Gestion des entrepôts \> Paramétrage \> Vagues \> Méthodes de traitement de la vague**.</span><span class="sxs-lookup"><span data-stu-id="c8987-130">For the wave methods, go to **Warehouse management \> Setup \> Waves \> Wave process methods**.</span></span> <span data-ttu-id="c8987-131">Sélectionnez `WHSScheduleWorkCreationWaveStepMethod` et, dans le volet Actions, sélectionnez **Configuration de tâche**.</span><span class="sxs-lookup"><span data-stu-id="c8987-131">Select `WHSScheduleWorkCreationWaveStepMethod` and, on the Action Pane, select **Task configuration**.</span></span> <span data-ttu-id="c8987-132">Modifiez ou supprimez le nombre de tâches de traitement par lots et le groupe de vagues affecté pour chaque entrepôt répertorié, selon vos besoins.</span><span class="sxs-lookup"><span data-stu-id="c8987-132">Modify or delete the number of batch tasks and the assigned wave group for each listed warehouse as needed.</span></span>

## <a name="manually-configure-scheduled-work-creation"></a><span data-ttu-id="c8987-133">Configurer manuellement la création de travail planifiée</span><span class="sxs-lookup"><span data-stu-id="c8987-133">Manually configure scheduled work creation</span></span>

<span data-ttu-id="c8987-134">Si vous n’avez pas activé la fonctionnalité [*Méthode de vague « Planifier la création du travail » à l’échelle de l’organisation*](#Auto-enable-schedule-work-creation), vous pouvez utiliser les procédures fournies dans cette section pour configurer manuellement la création de travail planifiée selon vos besoins.</span><span class="sxs-lookup"><span data-stu-id="c8987-134">If you didn't enable the [*Organization-wide "Schedule work creation" wave method* feature](#Auto-enable-schedule-work-creation), then you can use the procedures provided in this section to manually configure scheduled work creation as needed.</span></span>

### <a name="manually-enable-batch-processing-of-waves"></a><span data-ttu-id="c8987-135">Activer manuellement le traitement par lots des vagues</span><span class="sxs-lookup"><span data-stu-id="c8987-135">Manually enable batch processing of waves</span></span>

<span data-ttu-id="c8987-136">Pour tirer parti d’une méthode asynchrone parallèle pour créer un travail d’entrepôt, votre processus de vague doit être exécuté par lots.</span><span class="sxs-lookup"><span data-stu-id="c8987-136">To take advantage of a parallel asynchronous method to create warehouse work, your wave process must be running in batch.</span></span> <span data-ttu-id="c8987-137">Pour configurer cela :</span><span class="sxs-lookup"><span data-stu-id="c8987-137">To set this up:</span></span>

1. <span data-ttu-id="c8987-138">Accédez à  **Gestion des entrepôts\>Configuration \> Paramètres de gestion des entrepôts**.</span><span class="sxs-lookup"><span data-stu-id="c8987-138">Go to **Warehouse management \> Setup \> Warehouse management parameters**.</span></span>
1. <span data-ttu-id="c8987-139">Sur l’onglet **Général**, définissez **Traiter les vagues dans des traitements par lots** sur *Oui*.</span><span class="sxs-lookup"><span data-stu-id="c8987-139">On the **General** tab, set **Process waves in batch** to *Yes*.</span></span> <span data-ttu-id="c8987-140">En option, vous pouvez également sélectionner un **Groupe de traitements par lots pour le traitement de la vague** pour empêcher le traitement de votre file d’attente par lots de s’exécuter en même temps que d’autres processus.</span><span class="sxs-lookup"><span data-stu-id="c8987-140">Optionally, you can also select a dedicated **Wave processing batch group** to prevent your batch queue processing from running at the same time as other processes.</span></span>
1. <span data-ttu-id="c8987-141">Définissez **Attendre le verrouillage (ms)**, qui s’applique lorsque le système traite plusieurs vagues en même temps.</span><span class="sxs-lookup"><span data-stu-id="c8987-141">Set the **Wait for lock (ms) time**, which applies when the system is processing several waves at the same time.</span></span> <span data-ttu-id="c8987-142">Pour la plupart des processus de traitement par vague plus volumineux, nous recommandons une valeur de *60000*.</span><span class="sxs-lookup"><span data-stu-id="c8987-142">For most larger waving processes, we recommend a value of *60000*.</span></span>

### <a name="manually-enable-the-new-wave-step-method-for-existing-wave-templates"></a><span data-ttu-id="c8987-143">Activer manuellement la nouvelle méthode d’étape de vague pour les modèles de vague existants</span><span class="sxs-lookup"><span data-stu-id="c8987-143">Manually enable the new wave step method for existing wave templates</span></span>

<span data-ttu-id="c8987-144">Commencez par créer la nouvelle méthode d’étape de vague et activez-la pour le traitement de tâche asynchrone parallèle.</span><span class="sxs-lookup"><span data-stu-id="c8987-144">Start by creating the new wave step method and enabling it for parallel asynchronous task processing.</span></span>

1. <span data-ttu-id="c8987-145">Accédez à  **Gestion des entrepôts \>Configuration \> Vagues \> Méthodes de traitement de la vague**.</span><span class="sxs-lookup"><span data-stu-id="c8987-145">Go to **Warehouse management \> Setup \> Waves \> Wave process methods**.</span></span>
1. <span data-ttu-id="c8987-146">Sélectionnez  **Regenérer des méthodes** et notez que *WHSScheduleWorkCreationWaveStepMethod* a été ajouté à la liste des méthodes de traitement de vague que vous pouvez utiliser dans vos modèles de vague d’expédition.</span><span class="sxs-lookup"><span data-stu-id="c8987-146">Select  **Regenerate method** and note that *WHSScheduleWorkCreationWaveStepMethod* has been added to the list of wave process methods you can use in your shipping wave templates.</span></span>
1. <span data-ttu-id="c8987-147">Sélectionnez l’enregistrement avec le **Nom de méthode** *WHSScheduleWorkCreationWaveStepMethod* et sélectionnez **Configuration des tâches**.</span><span class="sxs-lookup"><span data-stu-id="c8987-147">Select the record with the **Method name** *WHSScheduleWorkCreationWaveStepMethod* and select **Task configuration**.</span></span>
1. <span data-ttu-id="c8987-148">Pour ajouter une nouvelle ligne à la grille, sélectionnez **Nouveau** sur le volet Actions et utilisez les paramètres suivants :</span><span class="sxs-lookup"><span data-stu-id="c8987-148">To add a new row to the grid, select **New** on the Action Pane and use the following settings:</span></span>

    - <span data-ttu-id="c8987-149">**Entrepôt** : sélectionnez l’entrepôt que vous utiliserez pour planifier le traitement de la création de travail.</span><span class="sxs-lookup"><span data-stu-id="c8987-149">**Warehouse** - Select the warehouse you will use to schedule work creation processing.</span></span>
    - <span data-ttu-id="c8987-150">**Nombre maximum de tâches par lots** : spécifiez un nombre maximum de tâches par lots.</span><span class="sxs-lookup"><span data-stu-id="c8987-150">**Maximum number of batch tasks** - Specify a maximum number of batch tasks.</span></span> <span data-ttu-id="c8987-151">Dans la plupart des cas, cette valeur doit être comprise entre 8 et 16, mais nous vous recommandons de tester le paramètre optimal en fonction de vos scénarios.</span><span class="sxs-lookup"><span data-stu-id="c8987-151">In most cases, this value should be in the range from 8-16, however we recommend that you experiment with the optimal setting based on your scenarios.</span></span>
    - <span data-ttu-id="c8987-152">**Groupe de traitements par lots pour le traitement de la vague** : sélectionnez un groupe de traitement par lots de vague dédié pour optimiser le traitement de votre file d’attente des traitements par lots.</span><span class="sxs-lookup"><span data-stu-id="c8987-152">**Wave processing batch group** - Select a dedicated wave processing batch group to optimize your batch queue processing.</span></span>

<span data-ttu-id="c8987-153">Vous êtes maintenant prêt à mettre à jour un modèle de vague existant (ou à en créer un nouveau) pour utiliser la méthode de traitement de vague *Planifier la création de travail*.</span><span class="sxs-lookup"><span data-stu-id="c8987-153">Now you are ready to update an existing wave template (or create a new one) to use the *Schedule work creation* wave processing method.</span></span>

1. <span data-ttu-id="c8987-154">Accédez à  **Gestion des entrepôts\>Configuration \> Vagues \> Modèles de vague**.</span><span class="sxs-lookup"><span data-stu-id="c8987-154">Go to **Warehouse management \> Setup \> Waves \> Wave templates**.</span></span>
1. <span data-ttu-id="c8987-155">Sélectionnez **Modifier** dans le volet Actions.</span><span class="sxs-lookup"><span data-stu-id="c8987-155">Select **Edit** on the Action Pane.</span></span>
1. <span data-ttu-id="c8987-156">Dans le volet de listes, sélectionnez le modèle de vague que vous souhaitez mettre à jour (si vous testez à l’aide de données de démonstration, vous pouvez utiliser la fonctionnalité *Expédition par défaut 24*).</span><span class="sxs-lookup"><span data-stu-id="c8987-156">In the list pane, select the wave template you would like to update (if you are testing using demo data, then you could use *24 Shipping default*).</span></span>
1. <span data-ttu-id="c8987-157">Développez l’organisateur **Méthodes** et sélectionnez la ligne avec le **Nom** *Planifier la création de travail* dans la grille **Méthodes restantes**.</span><span class="sxs-lookup"><span data-stu-id="c8987-157">Expand the **Methods** FastTab and select the row with the **Name** *Schedule work creation* in the **Remaining methods** grid.</span></span>
1. <span data-ttu-id="c8987-158">Sélectionnez la flèche pointant vers la colonne **Méthodes sélectionnées** pour déplacer la ligne sélectionnée vers cette colonne.</span><span class="sxs-lookup"><span data-stu-id="c8987-158">Select the arrow pointing to the **Selected methods** column to move the selected row to that column.</span></span> <span data-ttu-id="c8987-159">(Vous ne pouvez avoir qu’une seule méthode sélectionnée à la fois qui utilise soit `WHSScheduleWorkCreationWaveStepMethod`, soit `createWork`, de telle sorte que la ligne existante avec **Nom de la méthode** `createWork` soit automatiquement déplacée vers la grille **Méthodes restantes**.)</span><span class="sxs-lookup"><span data-stu-id="c8987-159">(You can only have one selected method at a time that uses either `WHSScheduleWorkCreationWaveStepMethod` or `createWork`, so the existing row with **Method name** `createWork` is automatically moved to the **Remaining methods** grid.)</span></span>

## <a name="set-wave-task-processing-threshold-data"></a><span data-ttu-id="c8987-160">Définir les données de seuil de traitement de la tâche de vague</span><span class="sxs-lookup"><span data-stu-id="c8987-160">Set wave task processing threshold data</span></span>

<span data-ttu-id="c8987-161">Le système créera des données de seuil de traitement de tâche de vague par défaut la première fois qu’un processus de vague s’exécute en utilisant un traitement basé sur une tâche.</span><span class="sxs-lookup"><span data-stu-id="c8987-161">The system will create default wave task processing threshold data the first time a wave process runs using any task-based processing.</span></span> <span data-ttu-id="c8987-162">Les données sont utilisées pour contrôler le moment où le traitement de vague s’exécutera de manière asynchrone et sera basé sur les tâches, ce qui lui permet de traiter et de créer un travail en parallèle.</span><span class="sxs-lookup"><span data-stu-id="c8987-162">The data is used to control when wave processing will run asynchronously and be task-based, which enables it to process and create work in parallel.</span></span>

<span data-ttu-id="c8987-163">Les données par défaut utiliseront initialement une valeur seuil de 15 pour le nombre minimum de lignes de chargement (`MINIMUMWAVELOADLINES`).</span><span class="sxs-lookup"><span data-stu-id="c8987-163">The default data will initially use a threshold value of 15 for the minimum number of load lines (`MINIMUMWAVELOADLINES`).</span></span> <span data-ttu-id="c8987-164">Cela signifie que lorsque le système traite une vague avec plus de 15 lignes de chargement, il utilisera un traitement de tâche asynchrone.</span><span class="sxs-lookup"><span data-stu-id="c8987-164">This means that when the system processes a wave with more than 15 loads lines, it will use asynchronous task processing.</span></span> <span data-ttu-id="c8987-165">Vous pouvez insérer/mettre à jour manuellement ces données dans la table `WHSWaveTaskProcessingThresholdParameters` dans vos environnements de test.</span><span class="sxs-lookup"><span data-stu-id="c8987-165">You can manually insert/update this data in the `WHSWaveTaskProcessingThresholdParameters` table in your test environments.</span></span> <span data-ttu-id="c8987-166">Si vous devez modifier ce paramètre dans un environnement de production, vous devez contacter le support Microsoft pour demander la mise à jour.</span><span class="sxs-lookup"><span data-stu-id="c8987-166">If you need to change this setting in a production environment, you must contact Microsoft Support to request the update.</span></span>

## <a name="work-with-the-scheduled-work-creation"></a><span data-ttu-id="c8987-167">Utilisation de la création de travail planifiée</span><span class="sxs-lookup"><span data-stu-id="c8987-167">Work with the scheduled work creation</span></span>

<span data-ttu-id="c8987-168">Pour plus d’informations sur la manière d’utiliser la création de travail planifiée, voir [Création et traitement des vagues](wave-processing.md).</span><span class="sxs-lookup"><span data-stu-id="c8987-168">For details about how to work with scheduled work creation, see [Wave creation and processing](wave-processing.md).</span></span> 


[!INCLUDE[footer-include](../../includes/footer-banner.md)]
