---
title: "Configurer la génération d'états électronique pour extraire les données dans Power BI"
description: "Cette rubrique explique comment vous pouvez utiliser la configuration de génération d'états électroniques (ER) pour organiser le transfert des données entre votre instance de Finance and Operations vers les services Power BI. En guise d'exemple, cette rubrique utilise les transactions de déclaration d'échanges de biens comme données commerciales qui doivent être transférées. La visualisation de carte Power BI utilise ces données de transaction de déclaration d'échanges de biens pour présenter une vue permettant l'analyse des activités d'importation/d'exportation de la société sur l'état Power BI."
author: kfend
manager: AnnBe
ms.date: 06/20/2017
ms.topic: article
ms.prod: 
ms.service: dynamics-ax-platform
ms.technology: 
audience: Application User, Developer, IT Pro
ms.reviewer: kfend
ms.search.scope: Core, Operations, UnifiedOperations
ms.custom: 220314
ms.assetid: 2685df16-5ec8-4fd7-9495-c0f653e82567
ms.search.region: Global
ms.author: nselin
ms.search.validFrom: 2016-11-30
ms.dyn365.ops.version: Version 1611
ms.translationtype: HT
ms.sourcegitcommit: 7e0a5d044133b917a3eb9386773205218e5c1b40
ms.openlocfilehash: 6be91dfc02b728ffdf0f9d3baf1d41d3d2c10fea
ms.contentlocale: fr-fr
ms.lasthandoff: 09/29/2017

---

# <a name="configure-electronic-reporting-to-pull-data-into-power-bi"></a><span data-ttu-id="dd66a-105">Configurer la génération d'états électronique pour extraire les données dans Power BI</span><span class="sxs-lookup"><span data-stu-id="dd66a-105">Configure Electronic reporting to pull data into Power BI</span></span>

[!include[banner](../includes/banner.md)]


<span data-ttu-id="dd66a-106">Cette rubrique explique comment vous pouvez utiliser la configuration de génération d'états électroniques (ER) pour organiser le transfert des données entre votre instance de Finance and Operations vers les services Power BI.</span><span class="sxs-lookup"><span data-stu-id="dd66a-106">This topic explains how you can use your Electronic reporting (ER) configuration to arrange the transfer of data from your instance of Finance and Operations to Power BI services.</span></span> <span data-ttu-id="dd66a-107">En guise d'exemple, cette rubrique utilise les transactions de déclaration d'échanges de biens comme données commerciales qui doivent être transférées.</span><span class="sxs-lookup"><span data-stu-id="dd66a-107">As an example, this topic uses Intrastat transactions as business data that must be transferred.</span></span> <span data-ttu-id="dd66a-108">La visualisation de carte Power BI utilise ces données de transaction de déclaration d'échanges de biens pour présenter une vue permettant l'analyse des activités d'importation/d'exportation de la société sur l'état Power BI.</span><span class="sxs-lookup"><span data-stu-id="dd66a-108">The Power BI map visualization uses this Intrastat transaction data to present a view for analysis of company import/export activities on the Power BI report.</span></span>

<a name="overview"></a><span data-ttu-id="dd66a-109">Vue d'ensemble</span><span class="sxs-lookup"><span data-stu-id="dd66a-109">Overview</span></span>
--------

<span data-ttu-id="dd66a-110">Microsoft Power BI est un ensemble de services logiciels, d'applications, et de connecteurs qui fonctionnent ensemble pour transformer des sources de données externes en analyses logiques, visuellement immersives et interactives.</span><span class="sxs-lookup"><span data-stu-id="dd66a-110">Microsoft Power BI is a collection of software services, apps, and connectors that work together to turn external sources of data into coherent, visually immersive, and interactive insights.</span></span> <span data-ttu-id="dd66a-111">La génération d'états électroniques (ER) permet aux utilisateurs de Microsoft Dynamics 365 for Finance and Operations de configurer facilement des sources de données et d'organiser simplement le transfert des données de Finance and Operations vers Power BI.</span><span class="sxs-lookup"><span data-stu-id="dd66a-111">Electronic reporting (ER) lets users of Microsoft Dynamics 365 for Finance and Operations easily configure data sources and arrange the transfer of data from Finance and Operations to Power BI.</span></span> <span data-ttu-id="dd66a-112">Les données sont transférées en tant que fichiers dans le format de feuille de calcul OpenXML (fichier classeur Microsoft Excel).</span><span class="sxs-lookup"><span data-stu-id="dd66a-112">The data is transferred as files in the OpenXML worksheet (Microsoft Excel workbook file) format.</span></span> <span data-ttu-id="dd66a-113">Les fichiers transférés sont stockés sur un serveur Microsoft SharePoint Server qui a été configuré à cette fin.</span><span class="sxs-lookup"><span data-stu-id="dd66a-113">The transferred files are stored on a Microsoft SharePoint Server that has been configured for that purpose.</span></span> <span data-ttu-id="dd66a-114">Les fichiers stockés sont utilisés dans Power BI pour générer des états qui incluent des visualisations (tableaux, graphiques, cartes, etc.).</span><span class="sxs-lookup"><span data-stu-id="dd66a-114">The stored files are used in Power BI to make reports that include visualizations (tables, charts, maps, and so on).</span></span> <span data-ttu-id="dd66a-115">Les états Power BI sont partagés avec les utilisateurs Power BI, et ils sont accessibles dans des tableaux de bord Power BI et sur les pages Finance and Operations.</span><span class="sxs-lookup"><span data-stu-id="dd66a-115">Power BI reports are shared with Power BI users, and they are accessed in Power BI dashboards and on Finance and Operations pages.</span></span> <span data-ttu-id="dd66a-116">Cette rubrique décrit les tâches suivantes :</span><span class="sxs-lookup"><span data-stu-id="dd66a-116">This topic explains the following tasks:</span></span>

-   <span data-ttu-id="dd66a-117">Configurer Finance and Operations.</span><span class="sxs-lookup"><span data-stu-id="dd66a-117">Configure Finance and Operations.</span></span>
-   <span data-ttu-id="dd66a-118">Préparez votre configuration du format d'ER pour obtenir des données de Finance and Operations.</span><span class="sxs-lookup"><span data-stu-id="dd66a-118">Prepare your ER format configuration to get data from Finance and Operations.</span></span>
-   <span data-ttu-id="dd66a-119">Configurez l'environnement ER pour transférer des données vers Power BI.</span><span class="sxs-lookup"><span data-stu-id="dd66a-119">Configure the ER environment to transfer data to Power BI.</span></span>
-   <span data-ttu-id="dd66a-120">Utilisez les données transférées pour créer un état Power BI.</span><span class="sxs-lookup"><span data-stu-id="dd66a-120">Use transferred data to create a Power BI report.</span></span>
-   <span data-ttu-id="dd66a-121">Rendez l'état Power BI accessible dans Finance and Operations.</span><span class="sxs-lookup"><span data-stu-id="dd66a-121">Make the Power BI report accessible in Finance and Operations.</span></span>

## <a name="prerequisites"></a><span data-ttu-id="dd66a-122">Conditions préalables</span><span class="sxs-lookup"><span data-stu-id="dd66a-122">Prerequisites</span></span>
<span data-ttu-id="dd66a-123">Pour exécuter l'exemple décrit dans cette rubrique, vous devez disposer de l'accès suivant :</span><span class="sxs-lookup"><span data-stu-id="dd66a-123">To complete the example in this topic, you must have the following access:</span></span>

-   <span data-ttu-id="dd66a-124">L'accès à Finance and Operations pour l'un des rôles suivants :</span><span class="sxs-lookup"><span data-stu-id="dd66a-124">Access to Finance and Operations for one of the following roles:</span></span>
    -   <span data-ttu-id="dd66a-125">Développeur de gestion des états électroniques</span><span class="sxs-lookup"><span data-stu-id="dd66a-125">Electronic reporting developer</span></span>
    -   <span data-ttu-id="dd66a-126">Consultant fonctionnel de gestion des états électroniques</span><span class="sxs-lookup"><span data-stu-id="dd66a-126">Electronic reporting functional consultant</span></span>
    -   <span data-ttu-id="dd66a-127">Administrateur système</span><span class="sxs-lookup"><span data-stu-id="dd66a-127">System administrator</span></span>
-   <span data-ttu-id="dd66a-128">L'accès au serveur SharePoint Server configuré pour être utilisé avec Finance and Operations</span><span class="sxs-lookup"><span data-stu-id="dd66a-128">Access to the SharePoint Server that is configured for use with Finance and Operations</span></span>
-   <span data-ttu-id="dd66a-129">L'accès à la structure Power BI</span><span class="sxs-lookup"><span data-stu-id="dd66a-129">Access to the Power BI framework</span></span>

## <a name="configure-document-management-parameters"></a><span data-ttu-id="dd66a-130">Configurer les paramètres de gestion des documents</span><span class="sxs-lookup"><span data-stu-id="dd66a-130">Configure document management parameters</span></span>
1.  <span data-ttu-id="dd66a-131">Sur la page **Paramètres de gestion des documents**, configurez l'accès au serveur SharePoint Server qui sera utilisé dans la société à laquelle vous êtes connecté (la société DEMF dans cet exemple).</span><span class="sxs-lookup"><span data-stu-id="dd66a-131">On the **Document management parameters** page, configure access to the SharePoint Server that will be used in the company that you're signed in to (the DEMF company in this example).</span></span>
2.  <span data-ttu-id="dd66a-132">Testez la connexion au serveur SharePoint Server pour vous assurer que vous en avez obtenu l'accès.</span><span class="sxs-lookup"><span data-stu-id="dd66a-132">Test the connection to the SharePoint Server to make sure that you've been granted access.</span></span> <span data-ttu-id="dd66a-133">[![Page Paramètres de gestion des documents](./media/ger-power-bi-sharepoint-server-setting-1024x369.png)](./media/ger-power-bi-sharepoint-server-setting.png)</span><span class="sxs-lookup"><span data-stu-id="dd66a-133">[![Document management parameters page](./media/ger-power-bi-sharepoint-server-setting-1024x369.png)](./media/ger-power-bi-sharepoint-server-setting.png)</span></span>
3.  <span data-ttu-id="dd66a-134">Ouvrez le site SharePoint configuré.</span><span class="sxs-lookup"><span data-stu-id="dd66a-134">Open the configured SharePoint site.</span></span> <span data-ttu-id="dd66a-135">Créez un dossier dans lequel ER stockera les fichiers Excel qui ont des données commerciales dont les états Power BI ont besoin comme sources d'ensembles de données Power BI.</span><span class="sxs-lookup"><span data-stu-id="dd66a-135">Create a new folder where ER will store Excel files that have the business data that the Power BI reports require as a source of Power BI datasets.</span></span>
4.  <span data-ttu-id="dd66a-136">Dans Finance and Operations, sur la page **Types de document**, créez un type de document qui sera utilisé pour accéder au dossier SharePoint que vous venez de créer.</span><span class="sxs-lookup"><span data-stu-id="dd66a-136">In Finance and Operations, on the **Document types** page, create a new document type that will be used to access the SharePoint folder that you just created.</span></span> <span data-ttu-id="dd66a-137">Entrez **Fichier** dans le champ **Groupe** et **SharePoint** dans le champ **Emplacement**, puis entrez l'adresse du dossier SharePoint.</span><span class="sxs-lookup"><span data-stu-id="dd66a-137">Enter **File** in the **Group** field and **SharePoint** in the **Location** field, and then enter the address of the SharePoint folder.</span></span> <span data-ttu-id="dd66a-138">[![Page Types de documents](./media/ger-power-bi-sharepoint-document-type-1024x485.png)](./media/ger-power-bi-sharepoint-document-type.png)</span><span class="sxs-lookup"><span data-stu-id="dd66a-138">[![Document types page](./media/ger-power-bi-sharepoint-document-type-1024x485.png)](./media/ger-power-bi-sharepoint-document-type.png)</span></span>

## <a name="configure-er-parameters"></a><span data-ttu-id="dd66a-139">Configurer les paramètres ER</span><span class="sxs-lookup"><span data-stu-id="dd66a-139">Configure ER parameters</span></span>
1.  <span data-ttu-id="dd66a-140">Dans l'espace de travail **Génération des états électroniques**, cliquez sur le lien **Paramètres de gestion des états électroniques**.</span><span class="sxs-lookup"><span data-stu-id="dd66a-140">In the **Electronic reporting** workspace, click the **Electronic reporting parameters** link.</span></span>
2.  <span data-ttu-id="dd66a-141">Sous l'onglet **Documents joints**, sélectionnez le type de document **Fichier** pour tous les champs.</span><span class="sxs-lookup"><span data-stu-id="dd66a-141">On the **Attachments** tab, select the **File** document type for all the fields.</span></span>
3.  <span data-ttu-id="dd66a-142">Dans l'espace de travail **Génération des états électroniques**, rendez le fournisseur requis actif en cliquant sur **Activer**.</span><span class="sxs-lookup"><span data-stu-id="dd66a-142">In the **Electronic reporting** workspace, make the required provider active by clicking **Set active**.</span></span> <span data-ttu-id="dd66a-143">Pour plus d'informations, lisez le Guide de tâche **ER Sélectionner un fournisseur de services**.</span><span class="sxs-lookup"><span data-stu-id="dd66a-143">For more information, play the **ER Select service provider** task guide.</span></span>

## <a name="use-an-er-data-model-as-the-source-of-data"></a><span data-ttu-id="dd66a-144">Utiliser un modèle de données ER comme source de données</span><span class="sxs-lookup"><span data-stu-id="dd66a-144">Use an ER data model as the source of data</span></span>
<span data-ttu-id="dd66a-145">Vous devez disposer d'un modèle de données ER comme source de données commerciales qui sera utilisé dans les états Power BI.</span><span class="sxs-lookup"><span data-stu-id="dd66a-145">You must have an ER data model as the source of business data that will be used on Power BI reports.</span></span> <span data-ttu-id="dd66a-146">Ce modèle de données est téléchargé dans le référentiel de configurations ER.</span><span class="sxs-lookup"><span data-stu-id="dd66a-146">This data model is uploaded from the ER configurations repository.</span></span> <span data-ttu-id="dd66a-147">Pour plus d'informations, voir [Télécharger les configurations des états électroniques à partir de Lifecycle Services](download-electronic-reporting-configuration-lcs.md), ou lisez le Guide de tâche **ER Charger une configuration à partir de Lifecycle Services**.</span><span class="sxs-lookup"><span data-stu-id="dd66a-147">For more information, see [Download Electronic reporting configurations from Lifecycle Services](download-electronic-reporting-configuration-lcs.md), or play the **ER Import a configuration from Lifecycle Services** task guide.</span></span> <span data-ttu-id="dd66a-148">Sélectionnez **Déclaration d'échanges de biens** comme modèle de données qui sera téléchargé depuis le référentiel de configurations ER sélectionné.</span><span class="sxs-lookup"><span data-stu-id="dd66a-148">Select **Intrastat** as the data model that will be uploaded from the selected ER configurations repository.</span></span> <span data-ttu-id="dd66a-149">(Dans cet exemple, la version 1 du modèle est utilisée.) Vous pouvez alors accéder à la configuration du modèle ER **Déclaration d'échanges de biens** sur la page **Configurations**.</span><span class="sxs-lookup"><span data-stu-id="dd66a-149">(In this example, version 1 of the model is used.) You can then access the **Intrastat** ER model configuration on the **Configurations** page.</span></span> <span data-ttu-id="dd66a-150">[![Page Configurations](./media/ger-power-bi-data-model-1024x371.png)](./media/ger-power-bi-data-model.png)</span><span class="sxs-lookup"><span data-stu-id="dd66a-150">[![Configurations page](./media/ger-power-bi-data-model-1024x371.png)](./media/ger-power-bi-data-model.png)</span></span>

## <a name="design-an-er-format-configuration"></a><span data-ttu-id="dd66a-151">Concevoir une configuration de format ER</span><span class="sxs-lookup"><span data-stu-id="dd66a-151">Design an ER format configuration</span></span>
<span data-ttu-id="dd66a-152">Vous devez créer une configuration de format ER en utilisant le modèle de données **Déclaration d'échanges de biens** comme source de données commerciales.</span><span class="sxs-lookup"><span data-stu-id="dd66a-152">You must create a new ER format configuration that uses the **Intrastat** data model as the source of business data.</span></span> <span data-ttu-id="dd66a-153">Cette configuration de format doit générer des résultats de sortie en tant que documents électroniques dans le format OpenXML (fichier Excel).</span><span class="sxs-lookup"><span data-stu-id="dd66a-153">This format configuration must generate output results as electronic documents in OpenXML (Excel file) format.</span></span> <span data-ttu-id="dd66a-154">Pour plus d'informations, lisez le Guide de tâche **ER Créer une configuration pour des états au format OPENXML**.</span><span class="sxs-lookup"><span data-stu-id="dd66a-154">For more information, play the **ER Create a configuration for reports in OPENXML format** task guide.</span></span> <span data-ttu-id="dd66a-155">Nommez la nouvelle configuration **Activités d'importation/d'exportation**, comme le montre l'illustration suivante.</span><span class="sxs-lookup"><span data-stu-id="dd66a-155">Name the new configuration **Import / export activities**, as shown in the following illustration.</span></span> <span data-ttu-id="dd66a-156">Utilisez le fichier Excel [Données ER - Détails de l'importation de et de l'exportation](https://go.microsoft.com/fwlink/?linkid=845208) comme modèle lorsque vous concevez le format ER.</span><span class="sxs-lookup"><span data-stu-id="dd66a-156">Use the [ER data - import and export details](https://go.microsoft.com/fwlink/?linkid=845208) Excel file as a template when you design the ER format.</span></span> <span data-ttu-id="dd66a-157">(Pour plus d'informations sur l'importation d'un modèle de format, lisez le Guide de tâche.) [![Configuration des activités d'importation/d'exportation](media/ger-power-bi-format-configuration.png)](media/ger-power-bi-format-configuration.png) Pour modifier la configuration du format des **activités d'importation/d'exportation**, procédez comme suit.</span><span class="sxs-lookup"><span data-stu-id="dd66a-157">(For information about how to import a format template, play the task guide.) [![Import / export activities configuration](media/ger-power-bi-format-configuration.png)](media/ger-power-bi-format-configuration.png) To modify the **Import / export activities** format configuration, follow these steps.</span></span>

1.  <span data-ttu-id="dd66a-158">Cliquez sur **Concepteur**.</span><span class="sxs-lookup"><span data-stu-id="dd66a-158">Click **Designer**.</span></span>
2.  <span data-ttu-id="dd66a-159">Sous l'onglet **Format**, nommez l'élément de fichier pour ce format **Fichier de sortie d'Excel**.</span><span class="sxs-lookup"><span data-stu-id="dd66a-159">On the **Format** tab, name the file element for this format **Excel output file**.</span></span> <span data-ttu-id="dd66a-160">[![Élément du fichier de sortie Excel](./media/ger-power-bi-format-configuration-file-element-name-1024x395.png)](./media/ger-power-bi-format-configuration-file-element-name.png)</span><span class="sxs-lookup"><span data-stu-id="dd66a-160">[![Excel output file element](./media/ger-power-bi-format-configuration-file-element-name-1024x395.png)](./media/ger-power-bi-format-configuration-file-element-name.png)</span></span>
3.  <span data-ttu-id="dd66a-161">Sous l'onglet **Mappage**, spécifiez le nom du fichier Excel qui sera généré dès que ce format sera exécuté.</span><span class="sxs-lookup"><span data-stu-id="dd66a-161">On the **Mapping** tab, specify the name of the Excel file that will be generated whenever this format is run.</span></span> <span data-ttu-id="dd66a-162">Configurez l'expression associée pour renvoyer la valeur **Détails d'importation et d'exportation** (l'extension du nom de fichier .xlsx sera ajoutée automatiquement).</span><span class="sxs-lookup"><span data-stu-id="dd66a-162">Configure the related expression to return the value **Import and export details** (the .xlsx file name extension will be added automatically).</span></span> <span data-ttu-id="dd66a-163">[![Concepteur de formats](./media/ger-power-bi-format-configuration-output-file-name-1024x396.png)](./media/ger-power-bi-format-configuration-output-file-name.png)</span><span class="sxs-lookup"><span data-stu-id="dd66a-163">[![Format designer](./media/ger-power-bi-format-configuration-output-file-name-1024x396.png)](./media/ger-power-bi-format-configuration-output-file-name.png)</span></span>
4.  <span data-ttu-id="dd66a-164">Ajoutez un nouvel élément de source de données pour ce format.</span><span class="sxs-lookup"><span data-stu-id="dd66a-164">Add a new data source item for this format.</span></span> <span data-ttu-id="dd66a-165">(Cette énumération sera nécessaire pour effectuer d'autres liaison de données.)</span><span class="sxs-lookup"><span data-stu-id="dd66a-165">(This enumeration will be required for further data binding.)</span></span>
    1.  <span data-ttu-id="dd66a-166">Nommez la source de données **direction\_enum**.</span><span class="sxs-lookup"><span data-stu-id="dd66a-166">Name the data source **direction\_enum**.</span></span>
    2.  <span data-ttu-id="dd66a-167">Sélectionnez **Énumération de modèle de données** comme type de source de données.</span><span class="sxs-lookup"><span data-stu-id="dd66a-167">Select **Data model enumeration** as the data source type.</span></span>
    3.  <span data-ttu-id="dd66a-168">Voir l'énumération de modèle de données **Direction**.</span><span class="sxs-lookup"><span data-stu-id="dd66a-168">Refer to the **Direction** data model enumeration.</span></span>

    <span data-ttu-id="dd66a-169">[![direction\_enum](./media/ger-power-bi-format-configuration-mapping-added-enum-1024x454.png)](./media/ger-power-bi-format-configuration-mapping-added-enum.png)</span><span class="sxs-lookup"><span data-stu-id="dd66a-169">[![direction\_enum](./media/ger-power-bi-format-configuration-mapping-added-enum-1024x454.png)](./media/ger-power-bi-format-configuration-mapping-added-enum.png)</span></span>
5.  <span data-ttu-id="dd66a-170">Complétez la liaison des éléments du modèle de données **Déclaration d'échanges de biens** et des éléments du format défini, comme le montre l'illustration suivante.</span><span class="sxs-lookup"><span data-stu-id="dd66a-170">Complete the binding of elements of the **Intrastat** data model and elements of the designed format, as shown in the following illustration.</span></span> <span data-ttu-id="dd66a-171">[![Fin de la liaison](./media/ger-power-bi-format-configuration-mapping-details-1024x454.png)](./media/ger-power-bi-format-configuration-mapping-details.png)</span><span class="sxs-lookup"><span data-stu-id="dd66a-171">[![Completing the binding](./media/ger-power-bi-format-configuration-mapping-details-1024x454.png)](./media/ger-power-bi-format-configuration-mapping-details.png)</span></span>

<span data-ttu-id="dd66a-172">Une fois qu'il s'exécute, le format ER génère le résultat de sortie au format Excel.</span><span class="sxs-lookup"><span data-stu-id="dd66a-172">After it's run, the ER format generates the output result in Excel format.</span></span> <span data-ttu-id="dd66a-173">Il envoie les détails des transactions de déclaration d'échanges de biens au résultat de sortie, et les sépare sous forme de transactions qui décrivent des activités d'importation ou des activités d'exportation.</span><span class="sxs-lookup"><span data-stu-id="dd66a-173">It sends the details of the Intrastat transactions to the output result, and separates them as transactions that describe either import activities or export activities.</span></span> <span data-ttu-id="dd66a-174">Cliquez sur **Exécuter** pour tester le nouveau format ER pour la liste des transactions de déclaration d'échanges de biens sur la page **Déclaration d'échanges de biens** (**Taxe** &gt; **Déclarations** &gt; **Commerce extérieur** &gt; **Déclaration d'échanges de biens**).</span><span class="sxs-lookup"><span data-stu-id="dd66a-174">Click **Run** to test the new ER format for the list of Intrastat transactions on the **Intrastat** page (**Tax** &gt; **Declarations** &gt; **Foreign trade** &gt; **Intrastat**).</span></span> <span data-ttu-id="dd66a-175">[![Page Déclaration d'échanges de biens](./media/ger-power-bi-format-test-run-transactions-1024x322.png)](./media/ger-power-bi-format-test-run-transactions.png) Le résultat de sortie suivant est généré.</span><span class="sxs-lookup"><span data-stu-id="dd66a-175">[![Intrastat page](./media/ger-power-bi-format-test-run-transactions-1024x322.png)](./media/ger-power-bi-format-test-run-transactions.png) The following output result is generated.</span></span> <span data-ttu-id="dd66a-176">Le fichier est nommé **Import and export details.xlsx**, tel que vous l'avez spécifié dans les paramètres du format.</span><span class="sxs-lookup"><span data-stu-id="dd66a-176">The file is named **Import and export details.xlsx**, as you specified in the format settings.</span></span> <span data-ttu-id="dd66a-177">[![Import and export details.xlsx](./media/ger-power-bi-format-test-run-output-1024x472.png)](./media/ger-power-bi-format-test-run-output.png)</span><span class="sxs-lookup"><span data-stu-id="dd66a-177">[![Import and export details.xlsx](./media/ger-power-bi-format-test-run-output-1024x472.png)](./media/ger-power-bi-format-test-run-output.png)</span></span>

## <a name="configure-the-er-destination"></a><span data-ttu-id="dd66a-178">Configurer la destination ER</span><span class="sxs-lookup"><span data-stu-id="dd66a-178">Configure the ER destination</span></span>
<span data-ttu-id="dd66a-179">Vous devez configurer la structure ER pour envoyer le résultat de sortie de la nouvelle configuration du format ER d'une manière particulière.</span><span class="sxs-lookup"><span data-stu-id="dd66a-179">You must configure the ER framework to send the output result of the new ER format configuration in a special way.</span></span>

-   <span data-ttu-id="dd66a-180">Le résultat de sortie doit être envoyé au dossier du serveur SharePoint Server sélectionné.</span><span class="sxs-lookup"><span data-stu-id="dd66a-180">The output result must be sent to the folder of the selected SharePoint Server.</span></span>
-   <span data-ttu-id="dd66a-181">Chaque exécution de la configuration du format doit créer une version du même fichier Excel.</span><span class="sxs-lookup"><span data-stu-id="dd66a-181">Each execution of the format configuration must create a new version of same Excel file.</span></span>

<span data-ttu-id="dd66a-182">Sur la page **Génération d'états électroniques** (**Administration d'organisation** &gt; **Génération d'états électroniques**), cliquez sur l'élément **Destination de la génération d'états électroniques**, puis ajoutez une nouvelle destination.</span><span class="sxs-lookup"><span data-stu-id="dd66a-182">On the **Electronic reporting** page (**Organization administration** &gt; **Electronic reporting**), click the **Electronic reporting destination** item, and add a new destination.</span></span> <span data-ttu-id="dd66a-183">Dans le champ **Référence**, sélectionnez la configuration du format **Activités d'importation/d'exportation** que vous avez créée précédemment.</span><span class="sxs-lookup"><span data-stu-id="dd66a-183">In the **Reference** field, select the **Import / export activities** format configuration that you created earlier.</span></span> <span data-ttu-id="dd66a-184">Procédez comme suit pour ajouter un enregistrement de destination de fichier pour référence.</span><span class="sxs-lookup"><span data-stu-id="dd66a-184">Follow these steps to add a new file destination record for the reference.</span></span>

1.  <span data-ttu-id="dd66a-185">Dans le champ **Nom**, entrez le titre du fichier de destination.</span><span class="sxs-lookup"><span data-stu-id="dd66a-185">In the **Name** field, enter the title of the file destination.</span></span>
2.  <span data-ttu-id="dd66a-186">Dans le champ **Nom du fichier**, sélectionnez le nom **Fichier de sortie d'Excel** pour le composant du format de fichier Excel.</span><span class="sxs-lookup"><span data-stu-id="dd66a-186">In the **File name** field, select the name **Excel output file** for the Excel file format component.</span></span>

<span data-ttu-id="dd66a-187">Cliquez sur le bouton **Paramètres** pour le nouvel enregistrement de destination.</span><span class="sxs-lookup"><span data-stu-id="dd66a-187">Click the **Settings** button for the new destination record.</span></span> <span data-ttu-id="dd66a-188">Puis, dans la boîte de dialogue **Paramètres de destination**, procédez comme suit.</span><span class="sxs-lookup"><span data-stu-id="dd66a-188">Then, in the **Destination settings** dialog box, follow these steps.</span></span>

1.  <span data-ttu-id="dd66a-189">Sous l'onglet **Power BI**, définissez l'option **Activé** sur **Oui**.</span><span class="sxs-lookup"><span data-stu-id="dd66a-189">On the **Power BI** tab, set the **Enabled** option to **Yes**.</span></span>
2.  <span data-ttu-id="dd66a-190">Dans le champ **SharePoint**, sélectionnez le type de document **Partagé** créé précédemment.</span><span class="sxs-lookup"><span data-stu-id="dd66a-190">In the **SharePoint** field, select the **Shared** document type that you created earlier.</span></span>

## <a name="schedule-execution-of-the-configured-er-format"></a><span data-ttu-id="dd66a-191">Programmer l'exécution du format ER configuré</span><span class="sxs-lookup"><span data-stu-id="dd66a-191">Schedule execution of the configured ER format</span></span>
<span data-ttu-id="dd66a-192">Sur la page **Configurations** (**Administration d'organisation** &gt; **Génération d'états électroniques** &gt; **Configurations**), dans l'arborescence des configurations, sélectionnez la configuration **Activités d'importation/d'exportations** que vous avez créée précédemment.</span><span class="sxs-lookup"><span data-stu-id="dd66a-192">On the **Configurations** page (**Organization administration** &gt; **Electronic reporting** &gt; **Configurations**), in the configurations tree, select the **Import / export activities** configuration that you created earlier.</span></span> <span data-ttu-id="dd66a-193">Modifiez le statut de la version 1.1 de **Brouillon** à **Terminée** pour rendre ce format utilisable.</span><span class="sxs-lookup"><span data-stu-id="dd66a-193">Change the status of version 1.1 from **Draft** to **Complete** to make this format available for use.</span></span> <span data-ttu-id="dd66a-194">[![Page Configurations](./media/ger-power-bi-format-configuration-complete-1024x401.png)](./media/ger-power-bi-format-configuration-complete.png) Sélectionnez la version terminée de la configuration **Activités d'importation/d'exportation**, puis cliquez sur **Exécuter**.</span><span class="sxs-lookup"><span data-stu-id="dd66a-194">[![Configurations page](./media/ger-power-bi-format-configuration-complete-1024x401.png)](./media/ger-power-bi-format-configuration-complete.png) Select the completed version of the **Import / export activities** configuration, and then click **Run**.</span></span> <span data-ttu-id="dd66a-195">Notez que la destination configurée est appliquée au résultat de sortie qui est généré dans le format Excel.</span><span class="sxs-lookup"><span data-stu-id="dd66a-195">Note that the configured destination is applied to the output result that is generated in Excel format.</span></span> <span data-ttu-id="dd66a-196">Définissez l'option **Traitement par lots** sur **Oui** pour d'exécuter cet état en mode sans assistance.</span><span class="sxs-lookup"><span data-stu-id="dd66a-196">Set the **Batch processing** option to **Yes** to run this report in unattended mode.</span></span> <span data-ttu-id="dd66a-197">Cliquez sur **Répétition** pour planifier la récurrence requise de cette exécution du traitement par lots.</span><span class="sxs-lookup"><span data-stu-id="dd66a-197">Click **Recurrence** to schedule the required recurrence of this batch execution.</span></span> <span data-ttu-id="dd66a-198">La récurrence définit la fréquence à laquelle les données mises à jour seront transférées de Finance and Operations vers Power BI.</span><span class="sxs-lookup"><span data-stu-id="dd66a-198">The recurrence defines how often the updated data will be transferred from Finance and Operations to Power BI.</span></span> <span data-ttu-id="dd66a-199">[![Boîte de dialogue Paramètres de génération d'états électroniques](./media/ger-power-bi-format-configuration-run-to-schedule-1024x413.png)](./media/ger-power-bi-format-configuration-run-to-schedule.png) Après l'avoir configurée, vous pouvez rechercher la tâche d'exécution de l'état ER sur la page **Traitements par lots** (**Administration système &gt; Recherches &gt; Traitements par lots**).</span><span class="sxs-lookup"><span data-stu-id="dd66a-199">[![Electronic report parameters dialog box](./media/ger-power-bi-format-configuration-run-to-schedule-1024x413.png)](./media/ger-power-bi-format-configuration-run-to-schedule.png) After it's configured, you can find the ER report execution job on the **Batch jobs** page (**System administration &gt; Inquiries &gt; Batch jobs**).</span></span> <span data-ttu-id="dd66a-200">[![Page Traitements par lots](./media/ger-power-bi-format-configuration-running-job-1024x410.png)](./media/ger-power-bi-format-configuration-running-job.png) Lorsque cette tâche est exécutée pour la première fois, la destination crée un fichier Excel qui contient le nom configuré du dossier SharePoint sélectionné.</span><span class="sxs-lookup"><span data-stu-id="dd66a-200">[![Batch jobs page](./media/ger-power-bi-format-configuration-running-job-1024x410.png)](./media/ger-power-bi-format-configuration-running-job.png) When this job is run for the first time, the destination creates a new Excel file that has the configured name in the selected SharePoint folder.</span></span> <span data-ttu-id="dd66a-201">Chaque fois que la tâche est exécutée par la suite, la destination crée une version de ce fichier Excel.</span><span class="sxs-lookup"><span data-stu-id="dd66a-201">Every subsequent time that the job is run, the destination creates a new version of this Excel file.</span></span> <span data-ttu-id="dd66a-202">[![Nouvelle version du fichier Excel](./media/ger-power-bi-output-file-in-sharepoint-server-folder-2-1024x412.png)](./media/ger-power-bi-output-file-in-sharepoint-server-folder-2.png)</span><span class="sxs-lookup"><span data-stu-id="dd66a-202">[![New version of the Excel file](./media/ger-power-bi-output-file-in-sharepoint-server-folder-2-1024x412.png)](./media/ger-power-bi-output-file-in-sharepoint-server-folder-2.png)</span></span>

## <a name="create-a-power-bi-dataset-by-using-the-output-result-of-the-er-format"></a><span data-ttu-id="dd66a-203">Créez un ensemble de données Power BI à l'aide du résultat de sortie du format ER</span><span class="sxs-lookup"><span data-stu-id="dd66a-203">Create a Power BI dataset by using the output result of the ER format</span></span>
<span data-ttu-id="dd66a-204">Connectez-vous à Power BI, puis ouvrez un groupe Power BI existant (espace de travail) ou créez un groupe.</span><span class="sxs-lookup"><span data-stu-id="dd66a-204">Sign in to Power BI, and either open an existing Power BI group (workspace) or create a new group.</span></span> <span data-ttu-id="dd66a-205">Cliquez sur **Ajouter** sous **Fichiers** dans la section **Importer ou se connecter aux données** ou sur le signe (**+**) en regard de **Ensembles de données** dans le volet gauche.</span><span class="sxs-lookup"><span data-stu-id="dd66a-205">Either click **Add** under **Files** in the **Import or Connect to Data** section, or click the plus sign (**+**) next to **Datasets** in the left pane.</span></span> <span data-ttu-id="dd66a-206">[![Création d'un ensemble de données](./media/ger-power-bi-add-dataset-1024x524.png)](./media/ger-power-bi-add-dataset.png) Sélectionnez l'option **SharePoint – Sites d'équipe**, puis entrez le chemin d'accès du serveur SharePoint Server que vous utilisez (**https://ax7partner.litware.com** dans notre exemple).</span><span class="sxs-lookup"><span data-stu-id="dd66a-206">[![Creating a dataset](./media/ger-power-bi-add-dataset-1024x524.png)](./media/ger-power-bi-add-dataset.png) Select the **SharePoint – Team sites** option, and then enter the path of SharePoint Server that you're using (**https://ax7partner.litware.com** in our example).</span></span> <span data-ttu-id="dd66a-207">Puis accédez au dossier **/Shared Documents/GER data/PowerBI**, puis sélectionnez le fichier Excel que vous avez créé comme source de données pour le nouvel ensemble de données Power BI.</span><span class="sxs-lookup"><span data-stu-id="dd66a-207">Then browse to the **/Shared Documents/GER data/PowerBI** folder, and select the Excel file that you created as the source of data for the new Power BI dataset.</span></span> <span data-ttu-id="dd66a-208">[![Sélection du fichier Excel](./media/ger-power-bi-add-dataset-select-excel-file-1024x522.png)](./media/ger-power-bi-add-dataset-select-excel-file.png) Cliquez sur **Connecter**, puis sur **Importer**.</span><span class="sxs-lookup"><span data-stu-id="dd66a-208">[![Selecting the Excel file](./media/ger-power-bi-add-dataset-select-excel-file-1024x522.png)](./media/ger-power-bi-add-dataset-select-excel-file.png) Click **Connect**, and then click **Import**.</span></span> <span data-ttu-id="dd66a-209">Un ensemble de données est créé, basé sur le fichier Excel sélectionné.</span><span class="sxs-lookup"><span data-stu-id="dd66a-209">A new dataset is created that is based on the selected Excel file.</span></span> <span data-ttu-id="dd66a-210">L'ensemble de données peut également être ajouté automatiquement au tableau de bord nouvellement créé.</span><span class="sxs-lookup"><span data-stu-id="dd66a-210">The dataset can also be added automatically to the newly created dashboard.</span></span> <span data-ttu-id="dd66a-211">[![Ensemble de données sur le tableau de bord](./media/ger-power-bi-added-dataset-1024x489.png)](./media/ger-power-bi-added-dataset.png) Configurez le programme d'actualisation pour cet ensemble de données pour forcer une mise à jour périodique.</span><span class="sxs-lookup"><span data-stu-id="dd66a-211">[![Dataset on the dashboard](./media/ger-power-bi-added-dataset-1024x489.png)](./media/ger-power-bi-added-dataset.png) Configure the refresh schedule for this dataset to force a periodic update.</span></span> <span data-ttu-id="dd66a-212">Les mises à jour périodiques activent la consommation de nouvelles données commerciales provenant de Finance and Operations via l'exécution périodique de l'état ER à l'aide des nouvelles versions du fichier Excel créées dans le serveur SharePoint Server.</span><span class="sxs-lookup"><span data-stu-id="dd66a-212">Periodic updates enable the consumption of new business data that comes from Finance and Operations via periodic execution of the ER report through new versions of the Excel file that are created on the SharePoint Server.</span></span>

## <a name="create-a-power-bi-report-by-using-the-new-dataset"></a><span data-ttu-id="dd66a-213">Créer un état Power BI à l'aide du nouvel ensemble de données</span><span class="sxs-lookup"><span data-stu-id="dd66a-213">Create a Power BI report by using the new dataset</span></span>
<span data-ttu-id="dd66a-214">Pour créer un état Power BI, cliquez sur l'ensemble de données Power BI **Détails d'importation et d'exportation** que vous avez créé.</span><span class="sxs-lookup"><span data-stu-id="dd66a-214">To create a new Power BI report, click the **Import and export details** Power BI dataset that you created.</span></span> <span data-ttu-id="dd66a-215">Puis configurez la visualisation.</span><span class="sxs-lookup"><span data-stu-id="dd66a-215">Then configure the visualization.</span></span> <span data-ttu-id="dd66a-216">Par exemple, sélectionnez la visualisation **Carte remplie**, et configurez-la comme suit :</span><span class="sxs-lookup"><span data-stu-id="dd66a-216">For example, select the **Filled map** visualization, and configure it as follows:</span></span>

-   <span data-ttu-id="dd66a-217">Affectez le champ d'ensemble de données **CountryOrigin** au champ **Emplacement** de la visualisation de carte.</span><span class="sxs-lookup"><span data-stu-id="dd66a-217">Assign the **CountryOrigin** dataset field to the **Location** field of the map visualization.</span></span>
-   <span data-ttu-id="dd66a-218">Affectez le champ d'ensemble de données **Montant** au champ **Saturation des couleurs** de la visualisation de carte.</span><span class="sxs-lookup"><span data-stu-id="dd66a-218">Assign the **Amount** dataset field to the **Color saturation** field of the map visualization.</span></span>
-   <span data-ttu-id="dd66a-219">Ajoutez les champs d'ensembles de données **Activité** et **Année** à la collection de champs **Filtres** de la visualisation de carte.</span><span class="sxs-lookup"><span data-stu-id="dd66a-219">Add the **Activity** and **Year** dataset fields to the **Filters** fields collection of the map visualization.</span></span>

<span data-ttu-id="dd66a-220">Enregistrez l'état Power BI comme **État de détails d'importation et d'exportation**.</span><span class="sxs-lookup"><span data-stu-id="dd66a-220">Save the Power BI report as **Import and export details report**.</span></span> <span data-ttu-id="dd66a-221">[![État des détails d'importation et d'exportation](./media/ger-power-bi-added-report-1024x498.png)](./media/ger-power-bi-added-report.png) Notez que la carte affiche les pays/régions qui sont mentionnés dans le fichier Excel (Autriche et Suisse dans cet exemple).</span><span class="sxs-lookup"><span data-stu-id="dd66a-221">[![Import and export details report](./media/ger-power-bi-added-report-1024x498.png)](./media/ger-power-bi-added-report.png) Note that the map shows the countries/regions that are mentioned in the Excel file (Austria and Switzerland in this example).</span></span> <span data-ttu-id="dd66a-222">Ces pays/régions sont colorés pour afficher la proportion de montants facturés pour chacun.</span><span class="sxs-lookup"><span data-stu-id="dd66a-222">These countries/regions are colored to show the proportion of invoiced amounts for each.</span></span> <span data-ttu-id="dd66a-223">Mettez à jour la liste des transactions de déclaration d'échanges de biens.</span><span class="sxs-lookup"><span data-stu-id="dd66a-223">Update the list of Intrastat transactions.</span></span> <span data-ttu-id="dd66a-224">La transaction d'exportation qui provient d'Italie est ajoutée.</span><span class="sxs-lookup"><span data-stu-id="dd66a-224">The export transaction that originated from Italy is added.</span></span> <span data-ttu-id="dd66a-225">[![Liste des transactions de déclaration d'échanges de biens](./media/ger-power-bi-new-run-new-transaction-1024x321.png)](./media/ger-power-bi-new-run-new-transaction.png) Attendez la prochaine exécution prévue de l'état ER et la prochaine mise à jour programmée de l'ensemble de données Power BI.</span><span class="sxs-lookup"><span data-stu-id="dd66a-225">[![Intrastat transactions list](./media/ger-power-bi-new-run-new-transaction-1024x321.png)](./media/ger-power-bi-new-run-new-transaction.png) Wait for the next scheduled execution of the ER report and the next scheduled update of the Power BI dataset.</span></span> <span data-ttu-id="dd66a-226">Examinez l'état Power BI (sélectionnez pour afficher les transactions d'importation uniquement).</span><span class="sxs-lookup"><span data-stu-id="dd66a-226">Then review the Power BI report (select to show import transactions only).</span></span> <span data-ttu-id="dd66a-227">La carte mise à jour affiche maintenant l'Italie.</span><span class="sxs-lookup"><span data-stu-id="dd66a-227">The updated map now shows Italy.</span></span> <span data-ttu-id="dd66a-228">[![Carte mise à jour](./media/ger-power-bi-new-run-new-map-1024x511.png)](./media/ger-power-bi-new-run-new-map.png)</span><span class="sxs-lookup"><span data-stu-id="dd66a-228">[![Updated map](./media/ger-power-bi-new-run-new-map-1024x511.png)](./media/ger-power-bi-new-run-new-map.png)</span></span>

## <a name="access-power-bi-report-in-finance-and-operations"></a><span data-ttu-id="dd66a-229">Rendez l'état Power BI accessible dans Finance and Operations.</span><span class="sxs-lookup"><span data-stu-id="dd66a-229">Access Power BI report in Finance and Operations</span></span>
<span data-ttu-id="dd66a-230">Paramétrez l'intégration entre Finance and Operations et Power BI.</span><span class="sxs-lookup"><span data-stu-id="dd66a-230">Set up the integration between Finance and Operations and Power BI.</span></span> <span data-ttu-id="dd66a-231">Pour plus d'informations, voir [Configuration de l'intégration Power BI pour les espaces de travail](configure-power-bi-integration.md).</span><span class="sxs-lookup"><span data-stu-id="dd66a-231">For more information, see [Configuring Power BI integration for workspaces](configure-power-bi-integration.md).</span></span> <span data-ttu-id="dd66a-232">Sur la page de l'espace de travail **Génération d'états électroniques** prenant en charge l'intégration de Power BI (**Administration d'organisation** &gt; **Espaces de travail** &gt; **Espace de travail électronique de génération d'états**), cliquez sur **Options** &gt; **Ouvrez le catalogue d'états**.</span><span class="sxs-lookup"><span data-stu-id="dd66a-232">On the **Electronic reporting** workspace page that supports Power BI integration (**Organization administration** &gt; **Workspaces** &gt; **Electronic reporting workspace**), click **Options** &gt; **Open report catalog**.</span></span> <span data-ttu-id="dd66a-233">Sélectionnez l'état Power BI **Détails de l'importation et de l'exportation** que vous avez créé, pour l'afficher comme élément d'action sur la page sélectionnée.</span><span class="sxs-lookup"><span data-stu-id="dd66a-233">Select the **Import and export details** Power BI report that you created, to show that report as an action item on the selected page.</span></span> <span data-ttu-id="dd66a-234">Cliquez sur l'élément d'action pour ouvrir la page Finance and Operations affichant l'état que vous avez conçu dans Power BI.</span><span class="sxs-lookup"><span data-stu-id="dd66a-234">Click the action item to open the Finance and Operations page that shows the report that you designed in Power BI.</span></span> <span data-ttu-id="dd66a-235">[![État des détails d'importation et d'exportation](./media/ger-power-bi-review-bi-report-in-ax-form-1024x586.png)](./media/ger-power-bi-review-bi-report-in-ax-form.png)</span><span class="sxs-lookup"><span data-stu-id="dd66a-235">[![Import and export details report](./media/ger-power-bi-review-bi-report-in-ax-form-1024x586.png)](./media/ger-power-bi-review-bi-report-in-ax-form.png)</span></span>

<a name="see-also"></a><span data-ttu-id="dd66a-236">Voir également :</span><span class="sxs-lookup"><span data-stu-id="dd66a-236">See also</span></span>
--------

[<span data-ttu-id="dd66a-237">Destinations des états électroniques</span><span class="sxs-lookup"><span data-stu-id="dd66a-237">Electronic reporting destinations</span></span>](electronic-reporting-destinations.md)

[<span data-ttu-id="dd66a-238">Vue d'ensemble des États électroniques</span><span class="sxs-lookup"><span data-stu-id="dd66a-238">Electronic reporting overview</span></span>](general-electronic-reporting.md)




