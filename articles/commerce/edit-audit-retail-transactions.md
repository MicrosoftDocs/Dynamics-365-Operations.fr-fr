---
title: Modifier et auditer les transactions du magasin de vente au détail
description: Cette rubrique décrit la fonctionnalité de modification et d'audit des transactions en magasin.
author: josaw1
manager: AnnBe
ms.date: 10/14/2019
ms.topic: index-page
ms.prod: ''
ms.service: dynamics-365-retail
ms.technology: ''
audience: Application User
ms.reviewer: josaw
ms.search.scope: Core, Operations, Retail
ms.custom: ''
ms.assetid: ed0f77f7-3609-4330-bebd-ca3134575216
ms.search.region: global
ms.search.industry: Retail
ms.author: josaw
ms.search.validFrom: 2019-09-29
ms.dyn365.ops.version: ''
ms.openlocfilehash: 97211ee36dbaa704d3a967e9b742ff1cae708707
ms.sourcegitcommit: 81a647904dd305c4be2e4b683689f128548a872d
ms.translationtype: HT
ms.contentlocale: fr-FR
ms.lasthandoff: 02/01/2020
ms.locfileid: "3004387"
---
# <a name="edit-and-audit-retail-store-transactions"></a><span data-ttu-id="feac4-103">Modifier et auditer les transactions du magasin de vente au détail</span><span class="sxs-lookup"><span data-stu-id="feac4-103">Edit and audit retail store transactions</span></span>

[!include [banner](includes/banner.md)]



<span data-ttu-id="feac4-104">Les clients Dynamics 365 Commerce utilisent des applications internes ainsi que des applications POS tierces.</span><span class="sxs-lookup"><span data-stu-id="feac4-104">Dynamics 365 Commerce customers use first-party as well as third-party point of sale (POS) applications.</span></span> <span data-ttu-id="feac4-105">Avec l'application POS interne, les transactions en magasin sont extraites dans Headquarters depuis les canaux via un processus de traitement par lots.</span><span class="sxs-lookup"><span data-stu-id="feac4-105">With the first-party POS application, store transactions are pulled into Headquarters from the channels through a batch process.</span></span> <span data-ttu-id="feac4-106">Avec les applications tierces, les transactions sont extraites dans Headquarters par intégration.</span><span class="sxs-lookup"><span data-stu-id="feac4-106">With third-party applications, transactions are pulled into Headquarters through integration.</span></span> <span data-ttu-id="feac4-107">Dans les deux cas, une fois que les transactions sont extraites dans Headquarters, un processus de vérification de la cohérence doit être exécuté avec plusieurs validations des transactions afin que seules les transactions correctement validées soient extraites dans le relevé à valider dans Headquarters.</span><span class="sxs-lookup"><span data-stu-id="feac4-107">In both cases, after transactions are pulled into Headquarters, a consistency check process needs to be executed that runs multiple validations on the transactions so that only successfully validated transactions are pulled into the statement to be posted in Headquarters.</span></span> 

<span data-ttu-id="feac4-108">Les transactions commerciales ne sont pas validées pour plusieurs raisons.</span><span class="sxs-lookup"><span data-stu-id="feac4-108">Commerce transactions fail validation for various reasons.</span></span> <span data-ttu-id="feac4-109">Par exemple, un bogue dans le code d'intégration ou un bogue dans l'application POS peut entraîner des données incohérentes, ou une erreur de l'utilisateur, comme la suppression d'un produit après sa synchronisation avec le canal ou la clôture d'une période fiscale sans valider les transactions pour cette période, peut entraîner des données incohérentes.</span><span class="sxs-lookup"><span data-stu-id="feac4-109">For example, a bug in the integration code or a bug in the POS application may cause inconsistent data, or a user error, such as deleting a product after it was synchronized to the channel or closing a fiscal period without posting transactions for that period, can cause inconsistent data.</span></span>

<span data-ttu-id="feac4-110">Ces transactions sont marquées et exclues des relevés, mais elles peuvent perturber le processus quotidien de validation des ventes quotidiennes dans les finances.</span><span class="sxs-lookup"><span data-stu-id="feac4-110">While these transactions get flagged and are excluded from the statements, the transactions can disrupt a customer’s daily process of posting daily sales to the financials.</span></span>

<span data-ttu-id="feac4-111">Dans Commerce, vous pouvez modifier les transactions spécifiques qui n'ont pas été validées tout en conservant l'audit de toutes les modifications.</span><span class="sxs-lookup"><span data-stu-id="feac4-111">In Commerce, you can edit the specific transactions that fail validation while maintaining audit of all the changes.</span></span> 

## <a name="edit-and-audit-transactions"></a><span data-ttu-id="feac4-112">Modifier et auditer des transactions</span><span class="sxs-lookup"><span data-stu-id="feac4-112">Edit and audit transactions</span></span>

<span data-ttu-id="feac4-113">Dans Retail version 10.0.5, les transactions au comptant sans livraison comme les ventes et les retours sont les seules transactions pouvant être modifiées.</span><span class="sxs-lookup"><span data-stu-id="feac4-113">In Retail version 10.0.5, cash and carry transactions like sales and returns are the only transactions that can be edited.</span></span> <span data-ttu-id="feac4-114">La modification des commandes client ou des commandes en ligne n'est pas prise en charge.</span><span class="sxs-lookup"><span data-stu-id="feac4-114">Editing customer orders or online orders is not supported.</span></span> <span data-ttu-id="feac4-115">Dans Retail version 10.0.6 et plus, la modification des transactions de gestion des disponibilités est également prise en charge.</span><span class="sxs-lookup"><span data-stu-id="feac4-115">In Retail version 10.0.6 and higher, editing cash management transactions is also supported.</span></span>

1. <span data-ttu-id="feac4-116">Installez le complément Dynamics Excel.</span><span class="sxs-lookup"><span data-stu-id="feac4-116">Install the Dynamics Excel Add-in.</span></span>

2. <span data-ttu-id="feac4-117">Accédez à l'espace de travail **Finances du magasin**.</span><span class="sxs-lookup"><span data-stu-id="feac4-117">Go to the **Store financials** workspace.</span></span> <span data-ttu-id="feac4-118">La vignette **Échecs de validation de transaction** offre une vue préfiltrée du formulaire de transaction pour lequel une ou plusieurs règles de validation ont échoué.</span><span class="sxs-lookup"><span data-stu-id="feac4-118">The **Transaction validation failures** tile provides a pre-filtered view of the transaction form that failed one or more of the validation rules.</span></span>
 
3. <span data-ttu-id="feac4-119">Ouvrez le formulaire.</span><span class="sxs-lookup"><span data-stu-id="feac4-119">Open the form.</span></span> <span data-ttu-id="feac4-120">Cliquez sur l'enregistrement qui n'a pas été validé, cliquez sur **Complément Office**, puis cliquez sur **Modifier la transaction sélectionnée**.</span><span class="sxs-lookup"><span data-stu-id="feac4-120">Click the record that failed validation, click **Office Add in**, and then click **Edit selected transaction**.</span></span> <span data-ttu-id="feac4-121">Un fichier Excel avec les détails de la transaction sélectionnée s'ouvre, avec les feuilles de calcul suivantes :</span><span class="sxs-lookup"><span data-stu-id="feac4-121">An Excel file with the details of the selected transaction opens, with the following worksheets:</span></span>

    - <span data-ttu-id="feac4-122">Lignes : cette feuille de calcul contient les lignes d'en-tête et de produit et les données associées pour la transaction.</span><span class="sxs-lookup"><span data-stu-id="feac4-122">Lines: This worksheet has the header and product lines and related data for the transaction.</span></span>
    - <span data-ttu-id="feac4-123">Paiements : cette feuille de calcul contient les détails des lignes de paiement pour la transaction.</span><span class="sxs-lookup"><span data-stu-id="feac4-123">Payments: This worksheet has the details of the payment lines for the transaction.</span></span>
    - <span data-ttu-id="feac4-124">Remises : cette feuille de calcul contient les détails de la remise pour la transaction.</span><span class="sxs-lookup"><span data-stu-id="feac4-124">Discounts: This worksheet has the discount-related details for the transaction.</span></span>
    - <span data-ttu-id="feac4-125">Taxes : cette feuille de calcul contient les détails de la taxe pour la transaction.</span><span class="sxs-lookup"><span data-stu-id="feac4-125">Taxes: This worksheet has the tax-related details for the transaction.</span></span>
    - <span data-ttu-id="feac4-126">Frais : cette feuille de calcul contient les détails des frais pour la transaction.</span><span class="sxs-lookup"><span data-stu-id="feac4-126">Charges: This worksheet has the charges-related data for the transaction.</span></span>

4. <span data-ttu-id="feac4-127">Dans le fichier Excel, modifiez les champs appropriés, puis chargez les données dans Headquarters en utilisant la fonctionnalité de publication du complément Dynamics Excel.</span><span class="sxs-lookup"><span data-stu-id="feac4-127">In the Excel file, you modify the appropriate fields and then upload the data back into Headquarters using the Dynamics Excel Add-in publish functionality.</span></span> <span data-ttu-id="feac4-128">Une fois publiées, les modifications sont répercutées dans le système.</span><span class="sxs-lookup"><span data-stu-id="feac4-128">Once published, the changes will be reflected in the system.</span></span> <span data-ttu-id="feac4-129">Lors de la publication, aucune validation n'est exécutée sur les modifications effectuées par les utilisateurs.</span><span class="sxs-lookup"><span data-stu-id="feac4-129">During publish, no validation is done on changes that users make.</span></span>

5. <span data-ttu-id="feac4-130">Une piste d'audit complète des modifications est disponible en cliquant sur **Afficher la piste d'audit** dans l'en-tête **Transaction de vente au détail** pour les modifications au niveau de l'en-tête et dans la section et l'enregistrement appropriés dans la page de transaction appropriée.</span><span class="sxs-lookup"><span data-stu-id="feac4-130">A complete audit trail of the changes can be viewed by clicking **View audit trail** in the **Retail transaction** header for the header-level changes and in the relevant section and record on the appropriate transaction page.</span></span> <span data-ttu-id="feac4-131">Par exemple, toutes les modifications relatives aux lignes de vente sont visibles dans la page **Transactions de vente**, les modifications relatives aux paiements sont visibles dans la page **Transactions de paiement**, etc. Les détails d'audit conservés pour les modifications se présentent comme suit.</span><span class="sxs-lookup"><span data-stu-id="feac4-131">For example, all changes relating to sales lines will be visible on the **Sales transactions** page, changes relating to payments will be visible on the **Payment transactions** page, etc. The audit details that are maintained for the changes are as follows.</span></span>

   - <span data-ttu-id="feac4-132">Date et heure de modification</span><span class="sxs-lookup"><span data-stu-id="feac4-132">Modified date and time</span></span>
   - <span data-ttu-id="feac4-133">Champ</span><span class="sxs-lookup"><span data-stu-id="feac4-133">Field</span></span> 
   - <span data-ttu-id="feac4-134">Ancienne valeur</span><span class="sxs-lookup"><span data-stu-id="feac4-134">Old value</span></span>
   - <span data-ttu-id="feac4-135">Nouvelle valeur</span><span class="sxs-lookup"><span data-stu-id="feac4-135">New value</span></span>
   - <span data-ttu-id="feac4-136">Modifié par</span><span class="sxs-lookup"><span data-stu-id="feac4-136">Modified by</span></span>

6. <span data-ttu-id="feac4-137">Une fois les modifications effectuées et publiées, réexécutez l'option **Valider les transactions en magasin** pour valider que les modifications effectuées sont cohérentes et valides.</span><span class="sxs-lookup"><span data-stu-id="feac4-137">After your changes are made and published, run the **Validate store transactions** option again to validate that the changes you made are consistent and valid.</span></span>

> [!NOTE]
> <span data-ttu-id="feac4-138">Vous pouvez uniquement modifier les transactions qui n'ont pas été validées.</span><span class="sxs-lookup"><span data-stu-id="feac4-138">You can only edit transactions that failed validation.</span></span> <span data-ttu-id="feac4-139">Si vous souhaitez modifier les transactions qui ont été validées, modifiez le statut de validation de la transaction à modifier en **Erreur** ou **Aucun** pour pouvoir la modifier.</span><span class="sxs-lookup"><span data-stu-id="feac4-139">If you want to edit transactions that passed validation, change the validation status of the transaction you want to change to **Error** or **None** and then you will be able to edit it.</span></span> 


## <a name="bulk-edit-transactions"></a><span data-ttu-id="feac4-140">Modifier des transactions en bloc</span><span class="sxs-lookup"><span data-stu-id="feac4-140">Bulk edit transactions</span></span>

<span data-ttu-id="feac4-141">Dans Retail version 10.0.6 et plus, l'option de modification en bloc des transactions au niveau du relevé est prise en charge.</span><span class="sxs-lookup"><span data-stu-id="feac4-141">In Retail version 10.0.6 and higher, the option to bulk edit transactions at a statement level is supported.</span></span> 

1. <span data-ttu-id="feac4-142">Utilisez le complément Excel pour ouvrir un relevé contenant des transactions à modifier en utilisant les étapes 1 à 3 ci-dessus.</span><span class="sxs-lookup"><span data-stu-id="feac4-142">Use the Excel Add-in to open a statement that has transactions you want to modify using steps 1-3 above.</span></span>

2. <span data-ttu-id="feac4-143">Choisissez l'une des options ci-dessous.</span><span class="sxs-lookup"><span data-stu-id="feac4-143">Choose one of the options below.</span></span>

    - <span data-ttu-id="feac4-144">**Modifier les transactions au comptant sans livraison**.</span><span class="sxs-lookup"><span data-stu-id="feac4-144">**Edit cash and carry transactions**.</span></span> <span data-ttu-id="feac4-145">Cette option permet de modifier toutes les transactions au comptant sans livraison contenues dans le relevé.</span><span class="sxs-lookup"><span data-stu-id="feac4-145">This option enables you to edit all the cash and carry transactions included in the statement.</span></span> <span data-ttu-id="feac4-146">Les feuilles de calcul Excel suivantes sont disponibles.</span><span class="sxs-lookup"><span data-stu-id="feac4-146">The following Excel worksheets are available.</span></span>
    
       - <span data-ttu-id="feac4-147">**Transaction** : cette feuille de calcul contient toutes les informations au niveau de l'en-tête pour les transactions de vente.</span><span class="sxs-lookup"><span data-stu-id="feac4-147">**Transaction**: This worksheet has all the header-level information for the sales transactions.</span></span>
       - <span data-ttu-id="feac4-148">**Transaction de vente** : cette feuille de calcul contient toutes les informations au niveau des lignes pour les transactions de vente.</span><span class="sxs-lookup"><span data-stu-id="feac4-148">**Sales transaction**: This worksheet has all the lines-level information for the sales transactions.</span></span>
       - <span data-ttu-id="feac4-149">**Transactions de paiement** : cette feuille de calcul contient toutes les informations sur les lignes de paiement pour les transactions de vente.</span><span class="sxs-lookup"><span data-stu-id="feac4-149">**Payment transactions**: This worksheet has all the payment lines information for the sales transactions.</span></span>
       - <span data-ttu-id="feac4-150">**Transactions de remise** : cette feuille de calcul contient toutes les informations sur les lignes de remise pour les transactions de vente.</span><span class="sxs-lookup"><span data-stu-id="feac4-150">**Discount transactions**: This worksheet has all the discount lines information for the sales transactions.</span></span>
       - <span data-ttu-id="feac4-151">**Transactions de taxe** : cette feuille de calcul contient toutes les informations sur les lignes de taxe pour les transactions de vente.</span><span class="sxs-lookup"><span data-stu-id="feac4-151">**Tax transactions**: This worksheet has all the tax lines information for the sales transactions.</span></span>
       - <span data-ttu-id="feac4-152">**Transactions de frais** : cette feuille de calcul contient toutes les informations sur les lignes de frais pour les transactions de vente.</span><span class="sxs-lookup"><span data-stu-id="feac4-152">**Charge transactions**: This worksheet has all the charge lines information for the sales transactions.</span></span>

    - <span data-ttu-id="feac4-153">**Modifier les transactions de gestion des disponibilités**.</span><span class="sxs-lookup"><span data-stu-id="feac4-153">**Edit cash management transactions**.</span></span> <span data-ttu-id="feac4-154">Cette option permet de modifier toutes les transactions de gestion des disponibilités contenues dans le relevé.</span><span class="sxs-lookup"><span data-stu-id="feac4-154">This option enables you to edit all the cash management transactions included in the statement.</span></span> <span data-ttu-id="feac4-155">Les feuilles de calcul Excel suivantes sont disponibles.</span><span class="sxs-lookup"><span data-stu-id="feac4-155">The following Excel worksheets are available.</span></span>
     
       - <span data-ttu-id="feac4-156">**Transaction** : cette feuille de calcul contient toutes les informations au niveau de l'en-tête pour les transactions de gestion des disponibilités.</span><span class="sxs-lookup"><span data-stu-id="feac4-156">**Transaction**: This worksheet has all the header-level information for the cash management transactions.</span></span>
       - <span data-ttu-id="feac4-157">**Transactions de mode de paiement en banque** : cette feuille de calcul contient tous les détails des transactions de remise en banque.</span><span class="sxs-lookup"><span data-stu-id="feac4-157">**Bank tender transactions**: This worksheet has all the bank drop transaction details.</span></span>
       - <span data-ttu-id="feac4-158">**Transactions de paiements remises en coffre-fort** : cette feuille de calcul contient tous les détails des transactions de paiement remises en coffre-fort.</span><span class="sxs-lookup"><span data-stu-id="feac4-158">**Safe tender transactions**: This worksheet has all the safe drop transaction details.</span></span>
       - <span data-ttu-id="feac4-159">**Comptage de caisse** : cette feuille de calcul contient tous les détails des transactions de comptage de caisse.</span><span class="sxs-lookup"><span data-stu-id="feac4-159">**Tender declaration**: This worksheet has all the tender declaration transaction details.</span></span>
       - <span data-ttu-id="feac4-160">**Transaction de revenus/dépenses** : cette feuille de calcul contient tous les détails de la ligne de transaction de revenus/dépenses.</span><span class="sxs-lookup"><span data-stu-id="feac4-160">**Income-expense transaction**: This worksheet has all the income-expense transaction line details.</span></span>
       - <span data-ttu-id="feac4-161">**Transactions de paiement** : cette feuille de calcul contient toutes les informations de paiement pour l'opération **Payer la facture** ainsi que la transaction de revenus/dépenses.</span><span class="sxs-lookup"><span data-stu-id="feac4-161">**Payment transactions**: This worksheet has all the payment-related information for the **Pay invoice** operation as well as the income-expense transaction.</span></span>

3.  <span data-ttu-id="feac4-162">Les validations ne sont pas exécutées lorsque vous publiez des transactions modifiées en bloc.</span><span class="sxs-lookup"><span data-stu-id="feac4-162">Validations are not performed when you publish bulk edited transactions.</span></span> <span data-ttu-id="feac4-163">Vous devez vous assurer que toutes vos modifications sont correctes et que la fidélité des données dans les feuilles de calcul est maintenue.</span><span class="sxs-lookup"><span data-stu-id="feac4-163">You must ensure that all your edits are accurate and the fidelity of data across the worksheets is maintained.</span></span> <span data-ttu-id="feac4-164">Par exemple, si vous souhaitez modifier la date de transaction pour gérer les scénarios où la période fiscale ou d'inventaire des transactions en cours est clôturée, vous devez modifier la date sur toutes les feuilles de calcul Excel contenant la colonne **Date d'activité**.</span><span class="sxs-lookup"><span data-stu-id="feac4-164">For example, if you want to change the transaction date to manage the scenarios where the fiscal or inventory period for the open transactions is closed, you need to change the date on all the Excel worksheets that have the **Business date** column.</span></span> <span data-ttu-id="feac4-165">Pour valider les transactions après les avoir modifiées, vous pouvez utiliser **Revalider les transactions** dans la page **Relevés**.</span><span class="sxs-lookup"><span data-stu-id="feac4-165">To validate transactions after they have been edited, you can use **Revalidate transactions** on the **Statements** page.</span></span>
