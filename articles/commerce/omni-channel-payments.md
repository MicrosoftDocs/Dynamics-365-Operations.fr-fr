---
title: Présentation des paiements omnicanaux
description: Cette rubrique fournit une vue d'ensemble des paiements omnicanaux dans Dynamics 365 Commerce.
author: rubendel
manager: AnnBe
ms.date: 11/26/2019
ms.topic: article
ms.prod: ''
ms.service: dynamics-365-retail
ms.technology: ''
audience: Application user
ms.reviewer: josaw
ms.search.scope: Operations, Retail
ms.custom: 141393
ms.assetid: ''
ms.search.region: Global
ms.search.industry: Retail
ms.author: rubendel
ms.search.validFrom: 2019-01-01
ms.dyn365.ops.version: AX 8.1.3
ms.openlocfilehash: 2251e523f7dfa3a06f0c45a4e156dbe097587f9a
ms.sourcegitcommit: 81a647904dd305c4be2e4b683689f128548a872d
ms.translationtype: HT
ms.contentlocale: fr-FR
ms.lasthandoff: 02/01/2020
ms.locfileid: "3022582"
---
# <a name="omni-channel-payments-overview"></a><span data-ttu-id="b0a1b-103">Présentation des paiements omnicanaux</span><span class="sxs-lookup"><span data-stu-id="b0a1b-103">Omni-channel payments overview</span></span>

[!include [banner](../includes/banner.md)]

<span data-ttu-id="b0a1b-104">Cette rubrique fournit une vue d'ensemble des paiements omnicanaux dans Dynamics 365 Commerce.</span><span class="sxs-lookup"><span data-stu-id="b0a1b-104">This topic provides an overview of omni-channel payments in Dynamics 365 Commerce.</span></span> <span data-ttu-id="b0a1b-105">Elle inclut une liste complète des scénarios, des informations sur la fonctionnalité, du paramétrage, et de la résolution des problèmes pris en charge, et des descriptions de certains problèmes habituels.</span><span class="sxs-lookup"><span data-stu-id="b0a1b-105">It includes a comprehensive list of supported scenarios, information about functionality, setup, and troubleshooting, and descriptions of some typical issues.</span></span>

## <a name="key-terms"></a><span data-ttu-id="b0a1b-106">Termes clés</span><span class="sxs-lookup"><span data-stu-id="b0a1b-106">Key terms</span></span>

| <span data-ttu-id="b0a1b-107">Terme</span><span class="sxs-lookup"><span data-stu-id="b0a1b-107">Term</span></span> | <span data-ttu-id="b0a1b-108">Description</span><span class="sxs-lookup"><span data-stu-id="b0a1b-108">Description</span></span> |
|---|---|
| <span data-ttu-id="b0a1b-109">Jeton</span><span class="sxs-lookup"><span data-stu-id="b0a1b-109">Token</span></span> | <span data-ttu-id="b0a1b-110">Chaîne des données qu'un processeur de paiement fournit comme référence.</span><span class="sxs-lookup"><span data-stu-id="b0a1b-110">A string of data that a payment processor provides as a reference.</span></span> <span data-ttu-id="b0a1b-111">Les jetons peuvent représenter des numéros de carte de paiement, les autorisations de paiement, et des captures précédentes de paiement.</span><span class="sxs-lookup"><span data-stu-id="b0a1b-111">Tokens can represent payment card numbers, payment authorizations, and previous payment captures.</span></span> <span data-ttu-id="b0a1b-112">Les jetons sont importants, car ils permettent de conserver les données confidentielles hors du système de point de vente (POS).</span><span class="sxs-lookup"><span data-stu-id="b0a1b-112">Tokens are important because they help keep sensitive data out of the point of sale (POS) system.</span></span> <span data-ttu-id="b0a1b-113">Ils sont parfois également appelés des *références*.</span><span class="sxs-lookup"><span data-stu-id="b0a1b-113">They are sometimes also referred to as *references*.</span></span> |
| <span data-ttu-id="b0a1b-114">Jeton de carte</span><span class="sxs-lookup"><span data-stu-id="b0a1b-114">Card token</span></span> | <span data-ttu-id="b0a1b-115">Jeton qu'un processeur de paiement fournit pour le stockage dans le système POS.</span><span class="sxs-lookup"><span data-stu-id="b0a1b-115">A token that a payment processor provides for storage in the POS system.</span></span> <span data-ttu-id="b0a1b-116">Un jeton de carte peut uniquement être utilisé par le marchand qui le reçoit.</span><span class="sxs-lookup"><span data-stu-id="b0a1b-116">A card token can be used only by the merchant who receives it.</span></span> <span data-ttu-id="b0a1b-117">Les jetons de carte sont parfois également appelés des *références de carte*.</span><span class="sxs-lookup"><span data-stu-id="b0a1b-117">Card tokens are sometimes also referred to as *card references*.</span></span> |
| <span data-ttu-id="b0a1b-118">Jeton d'autorisation</span><span class="sxs-lookup"><span data-stu-id="b0a1b-118">Authorization (auth) token</span></span> | <span data-ttu-id="b0a1b-119">ID unique qu'un processus de paiement fournit dans le cadre de la réponse qu'il soumet dans un système POS après que le système POS effectue une demande d'autorisation.</span><span class="sxs-lookup"><span data-stu-id="b0a1b-119">A unique ID that a payment process provides as part of the response that it sends to a POS system after the POS system makes an authorization request.</span></span> <span data-ttu-id="b0a1b-120">Un jeton d'autorisation peut être utilisé ultérieurement si le processeur est appelé pour exécuter des actions par exemple contrepasser ou annuler l'autorisation.</span><span class="sxs-lookup"><span data-stu-id="b0a1b-120">An authorization token can be used later if the processor is called to perform actions such as reversing or voiding the authorization.</span></span> <span data-ttu-id="b0a1b-121">Toutefois, il est le plus souvent utilisé pour capturer des fonds lorsqu'une commande est réalisée ou qu'une transaction est finalisée.</span><span class="sxs-lookup"><span data-stu-id="b0a1b-121">However, it's most often used to capture funds when an order is fulfilled or a transaction is finalized.</span></span> <span data-ttu-id="b0a1b-122">Les jetons d'autorisation sont parfois également appelés des *références d'autorisation*.</span><span class="sxs-lookup"><span data-stu-id="b0a1b-122">Authorization tokens are sometimes also referred to as *authorization references*.</span></span> |
| <span data-ttu-id="b0a1b-123">Jeton de capture</span><span class="sxs-lookup"><span data-stu-id="b0a1b-123">Capture token</span></span> | <span data-ttu-id="b0a1b-124">Référence qu'un processeur de paiement fournit à un système POS lorsqu'un paiement est finalisé ou capturé.</span><span class="sxs-lookup"><span data-stu-id="b0a1b-124">A reference that a payment processor provides to a POS system when a payment is finalized or captured.</span></span> <span data-ttu-id="b0a1b-125">Le jeton de capture peut être utilisé pour référencer la capture de paiement dans les opérations suivantes, telles que des demandes de remboursement.</span><span class="sxs-lookup"><span data-stu-id="b0a1b-125">The capture token can then be used to reference the payment capture in subsequent operations, such as refund requests.</span></span> | 
| <span data-ttu-id="b0a1b-126">Carte absente</span><span class="sxs-lookup"><span data-stu-id="b0a1b-126">Card not present</span></span> | <span data-ttu-id="b0a1b-127">Terme qui fait référence à des transactions de paiement où une carte physique n'est pas présentée.</span><span class="sxs-lookup"><span data-stu-id="b0a1b-127">A term that refers to payment transactions where a physical card isn't presented.</span></span> <span data-ttu-id="b0a1b-128">Par exemple, elles peuvent se produire dans les scénarios de commerce électronique ou de centre d'appels.</span><span class="sxs-lookup"><span data-stu-id="b0a1b-128">For example, these transactions can occur in e-commerce or call center scenarios.</span></span> <span data-ttu-id="b0a1b-129">Pour ces transactions, les informations associées au paiement sont entrées manuellement dans un site Web de commerce électronique, dans un flux de centre d'appels, ou le POS ou un terminal de paiement.</span><span class="sxs-lookup"><span data-stu-id="b0a1b-129">For these transactions, the payment-related information is manually entered on an e-commerce website, in a call center flow, or on the POS or payment terminal.</span></span> |
| <span data-ttu-id="b0a1b-130">Carte présente</span><span class="sxs-lookup"><span data-stu-id="b0a1b-130">Card present</span></span> | <span data-ttu-id="b0a1b-131">Terme qui fait référence à des transactions de paiement où une carte physique est présentée et utilisée dans un terminal de paiement qui est connecté au système POS Microsoft Dynamics 365.</span><span class="sxs-lookup"><span data-stu-id="b0a1b-131">A term that refers to payment transactions where a physical card is presented and used on a payment terminal that is connected to the Microsoft Dynamics 365 POS system.</span></span> |

## <a name="overview"></a><span data-ttu-id="b0a1b-132">Présentation</span><span class="sxs-lookup"><span data-stu-id="b0a1b-132">Overview</span></span>

<span data-ttu-id="b0a1b-133">En général le terme *paiements omnicanaux* décrit la possibilité de créer une commande dans un canal et de la terminer dans un autre canal.</span><span class="sxs-lookup"><span data-stu-id="b0a1b-133">In general, the term *omni-channel payments* describes the ability to create an order in one channel and fulfill it in another channel.</span></span> <span data-ttu-id="b0a1b-134">L'élément clé pour prendre en charge le paiement omnicanal consiste à conserver les détails de paiement avec le reste des détails de la commande, puis d'utiliser ces détails de paiement lorsque la commande est rappelée ou traitée dans un autre canal.</span><span class="sxs-lookup"><span data-stu-id="b0a1b-134">The key to omni-channel payment support is preserving payment details together with the rest of the order details, and then using those payment details when the order is recalled or processed in another channel.</span></span> <span data-ttu-id="b0a1b-135">Un exemple classique est le scénario « Acheter en ligne, prélever en magasin ».</span><span class="sxs-lookup"><span data-stu-id="b0a1b-135">A classic example is the "Buy online, pick up in store" scenario.</span></span> <span data-ttu-id="b0a1b-136">Dans ce scénario, les détails de paiement sont ajoutés lorsque la commande est créée en ligne.</span><span class="sxs-lookup"><span data-stu-id="b0a1b-136">In this scenario, the payment details are added when the order is created online.</span></span> <span data-ttu-id="b0a1b-137">Ils sont ensuite rappelés au PDV pour facturer la carte de paiement du client au moment du prélèvement.</span><span class="sxs-lookup"><span data-stu-id="b0a1b-137">They are then recalled at the POS to charge the customer's payment card at the time of pickup.</span></span> 

<span data-ttu-id="b0a1b-138">Tous les scénarios décrits dans cette rubrique peuvent être mis en œuvre à l'aide du kit de développement logiciel (SDK) de paiement standard qui est fourni avec Commerce.</span><span class="sxs-lookup"><span data-stu-id="b0a1b-138">All the scenarios that are described in this topic can be implemented by using the standard Payments software development kit (SDK) that is provided with Commerce.</span></span> <span data-ttu-id="b0a1b-139">Le [Connecteur de paiement Dynamics 365 pour Adyen](https://docs.microsoft.com/dynamics365/unified-operations/retail/dev-itpro/adyen-connector?tabs=8-1-3) fournit une mise en œuvre prédéfinie pour chaque scénario décrit ici.</span><span class="sxs-lookup"><span data-stu-id="b0a1b-139">The [Dynamics 365 Payment Connector for Adyen](https://docs.microsoft.com/dynamics365/unified-operations/retail/dev-itpro/adyen-connector?tabs=8-1-3) provides an out-of-box implementation of every scenario that is described here.</span></span> 

### <a name="prerequisites"></a><span data-ttu-id="b0a1b-140">Conditions préalables</span><span class="sxs-lookup"><span data-stu-id="b0a1b-140">Prerequisites</span></span>

<span data-ttu-id="b0a1b-141">Chaque scénario décrit dans cette rubrique nécessite un connecteur de paiement qui prend en charge les paiements omnicanaux.</span><span class="sxs-lookup"><span data-stu-id="b0a1b-141">Every scenario that is described in this topic requires a payment connector that supports omni-channel payments.</span></span> <span data-ttu-id="b0a1b-142">Le processeur Adyen prédéfini peut également être utilisé, car il prend en charge les scénarios disponibles via le kit de développement logiciel (SDK) de paiements.</span><span class="sxs-lookup"><span data-stu-id="b0a1b-142">The out-of-box Adyen connector can also be used, because it supports the scenarios that are made available through the Payments SDK.</span></span> <span data-ttu-id="b0a1b-143">Pour plus d'informations sur la mise en œuvre des connecteurs de paiement, et sur le Kit de développement logiciel Retail en général, visitez la [page d'accueil Retail pour les professionnels de l'informatique et les développeurs](https://docs.microsoft.com/dynamics365/unified-operations/retail/dev-itpro/dev-retail-home-page#payment-connectors).</span><span class="sxs-lookup"><span data-stu-id="b0a1b-143">For more information about how to implement payment connectors, and about the Retail SDK in general, visit the [Retail for IT pros and developers home page](https://docs.microsoft.com/dynamics365/unified-operations/retail/dev-itpro/dev-retail-home-page#payment-connectors).</span></span>

#### <a name="supported-versions"></a><span data-ttu-id="b0a1b-144">Versions prises en charge</span><span class="sxs-lookup"><span data-stu-id="b0a1b-144">Supported versions</span></span>

<span data-ttu-id="b0a1b-145">Les fonctionnalités de paiement omnicanal décrites dans cette rubrique ont été lancés dans le cadre de la version 8.1.3 de Microsoft Dynamics 365 for Retail.</span><span class="sxs-lookup"><span data-stu-id="b0a1b-145">The omni-channel payment capabilities that are described in this topic were released as part of Microsoft Dynamics 365 for Retail version 8.1.3.</span></span> 

#### <a name="card-present-and-card-not-present-connectors"></a><span data-ttu-id="b0a1b-146">Connecteurs « Carte présente » ou « Carte absente »</span><span class="sxs-lookup"><span data-stu-id="b0a1b-146">"Card present" and "card not present" connectors</span></span>

<span data-ttu-id="b0a1b-147">Le Kit de développement logiciel (SDK) de paiement repose sur deux ensembles d'interfaces de programmation d'application (API) pour les paiements.</span><span class="sxs-lookup"><span data-stu-id="b0a1b-147">The Payments SDK relies on two sets of application programming interfaces (APIs) for payments.</span></span> <span data-ttu-id="b0a1b-148">Le premier ensemble d'API est appelé **iPaymentProcessor**.</span><span class="sxs-lookup"><span data-stu-id="b0a1b-148">The first set of APIs is named **iPaymentProcessor**.</span></span> <span data-ttu-id="b0a1b-149">Il est utilisé pour mettre en œuvre des connecteurs de paiement « carte absente » qui peuvent être utilisés dans les centres d'appels et avec la plateforme de commerce électronique de Microsoft Dynamics.</span><span class="sxs-lookup"><span data-stu-id="b0a1b-149">It's used to implement "card not present" payment connectors that can be used in call centers and with the Microsoft Dynamics e-Commerce platform.</span></span> <span data-ttu-id="b0a1b-150">Pour plus d'informations sur l'interface **iPaymentProcessor**, voir le livre blanc [Mettre en œuvre un connecteur de paiement et un appareil de paiement](https://download.microsoft.com/download/e/2/7/e2735c65-1e66-4b8d-8a3c-e6ef3a319137/The%20Guide%20to%20Implementing%20Payment%20Connector%20and%20Payment%20Device_update.pdf), qui couvre les paiements.</span><span class="sxs-lookup"><span data-stu-id="b0a1b-150">For more information about the **iPaymentProcessor** interface, see the [Implement a payment connector and a payment device](https://download.microsoft.com/download/e/2/7/e2735c65-1e66-4b8d-8a3c-e6ef3a319137/The%20Guide%20to%20Implementing%20Payment%20Connector%20and%20Payment%20Device_update.pdf) white paper, which covers payments.</span></span> 

<span data-ttu-id="b0a1b-151">Le second ensemble d'API est appelé **iNamedRequestHandler**.</span><span class="sxs-lookup"><span data-stu-id="b0a1b-151">The second set of APIs is named **iNamedRequestHandler**.</span></span> <span data-ttu-id="b0a1b-152">Il prend en charge la mise en œuvre des intégrations de paiement « carte présente » qui utilisent un terminal de paiement.</span><span class="sxs-lookup"><span data-stu-id="b0a1b-152">It supports the implementation of "card present" payment integrations that use a payment terminal.</span></span> <span data-ttu-id="b0a1b-153">Pour plus d'informations sur l'interface **iNamedRequestHandler**, voir [Créer une intégration de paiement pour un terminal de paiement](https://docs.microsoft.com/dynamics365/unified-operations/retail/dev-itpro/end-to-end-payment-extension).</span><span class="sxs-lookup"><span data-stu-id="b0a1b-153">For more information about the **iNamedRequestHandler** interface, see [Create a payment integration for a payment terminal](https://docs.microsoft.com/dynamics365/unified-operations/retail/dev-itpro/end-to-end-payment-extension).</span></span> 

### <a name="setup-and-configuration"></a><span data-ttu-id="b0a1b-154">Paramétrage et configuration</span><span class="sxs-lookup"><span data-stu-id="b0a1b-154">Setup and configuration</span></span>

<span data-ttu-id="b0a1b-155">Les composants et les étapes de paramétrage suivants sont obligatoires :</span><span class="sxs-lookup"><span data-stu-id="b0a1b-155">The following components and setup steps are required:</span></span>

- <span data-ttu-id="b0a1b-156">**Intégration du commerce électronique :** une intégration avec Commerce est requise pour prendre en charge les cas où une commande est issue d'une vitrine en ligne.</span><span class="sxs-lookup"><span data-stu-id="b0a1b-156">**eCommerce integration:** An integration with Commerce is required to support scenarios where an order originates in an online storefront.</span></span> <span data-ttu-id="b0a1b-157">Pour plus d'informations sur le kit de développement logiciel (SDK) de commerce électronique Retail, voir [Kit de développement logiciel (SDK) de la plateforme de commerce électronique](https://docs.microsoft.com/dynamics365/unified-operations/retail/dev-itpro/ecommerce-platform-sdk).</span><span class="sxs-lookup"><span data-stu-id="b0a1b-157">For more information about the Retail e-Commerce SDK, see [e-Commerce platform software development kit (SDK)](https://docs.microsoft.com/dynamics365/unified-operations/retail/dev-itpro/ecommerce-platform-sdk).</span></span> <span data-ttu-id="b0a1b-158">Dans un environnement de démonstration, la vitrine de référence prend en charge les scénarios de paiement omnicanal.</span><span class="sxs-lookup"><span data-stu-id="b0a1b-158">In a demo environment, the reference storefront supports omni-channel payment scenarios.</span></span> 
- <span data-ttu-id="b0a1b-159">**Configuration des paiements en ligne :** Le paramétrage du canal en ligne doit inclure un connecteur de paiement qui a été mis à jour pour prendre en charge les paiements omnicanaux.</span><span class="sxs-lookup"><span data-stu-id="b0a1b-159">**Online payments configuration:** The setup of the online channel must include a payment connector that has been updated to support omni-channel payments.</span></span> <span data-ttu-id="b0a1b-160">Sinon, le connecteur de paiement prédéfini peut être utilisé.</span><span class="sxs-lookup"><span data-stu-id="b0a1b-160">Alternatively, the out-of-box payment connector can be used.</span></span> <span data-ttu-id="b0a1b-161">Pour plus d'informations sur la configuration du connecteur de paiement Adyen pour les magasins en ligne, voir [Connecteur de paiement Adyen](https://docs.microsoft.com/dynamics365/unified-operations/retail/dev-itpro/adyen-connector?tabs=8-1-3#e-commerce).</span><span class="sxs-lookup"><span data-stu-id="b0a1b-161">For information about how to configure the Adyen payment connector for online stores, see [Adyen payment connector](https://docs.microsoft.com/dynamics365/unified-operations/retail/dev-itpro/adyen-connector?tabs=8-1-3#e-commerce).</span></span> <span data-ttu-id="b0a1b-162">Outre les étapes de paramétrage du commerce électronique décrites dans cette rubrique, le paramètre **Autoriser l'enregistrement des informations de paiement dans le commerce électronique** doit être défini sur **True** dans les paramètres du connecteur Adyen.</span><span class="sxs-lookup"><span data-stu-id="b0a1b-162">In addition to the eCommerce setup steps that are described in that topic, the **Allow saving payment information in e-commerce** parameter must be set to **True** in the settings for the Adyen connector.</span></span> 
- <span data-ttu-id="b0a1b-163">**Configuration des paiements omnicanaux :** dans le back-office, accédez à **Retail et Commerce \> Paramétrage du siège \> Paramètres \> Paramètres partagés du commerce**.</span><span class="sxs-lookup"><span data-stu-id="b0a1b-163">**Omni-channel payments configuration:** In the back office, go to **Retail and Commerce \> Headquarters setup \> Parameters \> Commerce shared parameters**.</span></span> <span data-ttu-id="b0a1b-164">Puis, dans l'onglet **Paiements omnicanaux**, définissez l'option **Utiliser les paiements omnicanaux** sur **Oui**.</span><span class="sxs-lookup"><span data-stu-id="b0a1b-164">Then, on the **Omni-channel payments** tab, set the **Use omni-channel payments** option to **Yes**.</span></span>
- <span data-ttu-id="b0a1b-165">**Services de paiement :** Le centre d'appels utilise le connecteur de paiement par défaut sur la page **Services de paiement** pour traiter les paiements.</span><span class="sxs-lookup"><span data-stu-id="b0a1b-165">**Payment services:** The call center uses the default payment connector on the **Payment services** page to process payments.</span></span> <span data-ttu-id="b0a1b-166">Pour prendre en charge les scénarios tels que « Acheter au centre d'appels, prélever au magasin », ce connecteur de paiement par défaut doit être le connecteur de paiement Adyen ou un connecteur de paiement correspondant aux exigences de mise en œuvre des paiements omnicanaux.</span><span class="sxs-lookup"><span data-stu-id="b0a1b-166">To support scenarios such as "Buy in call center, pick up in store," this default payment connector must be the Adyen payment connector or a payment connector that meets the implementation requirements for omni-channel payments.</span></span>
- <span data-ttu-id="b0a1b-167">**Service TEF :** Les paiements via un terminal de paiement doivent être paramétrés sur l'organisateur **Service TEF** du profil matériel.</span><span class="sxs-lookup"><span data-stu-id="b0a1b-167">**EFT service:** Payments through a payment terminal must be set up on the **EFT service** FastTab of the hardware profile.</span></span> <span data-ttu-id="b0a1b-168">Le connecteur Adyen prend en charge les scénarios de paiements omnicanaux prédéfinis.</span><span class="sxs-lookup"><span data-stu-id="b0a1b-168">The Adyen connector supports omni-channel payments scenarios out of the box.</span></span> <span data-ttu-id="b0a1b-169">D'autres connecteurs de paiement qui prennent en charge l'interface **iNamedRequestHandler** peuvent également être utilisés s'ils prennent en charge les paiements omnicanaux.</span><span class="sxs-lookup"><span data-stu-id="b0a1b-169">Other payment connectors that support the **iNamedRequestHandler** interface can also be used if they support omni-channel payments.</span></span>
- <span data-ttu-id="b0a1b-170">**Disponibilité du connecteur de paiement :** Lorsqu'une commande est rappelée, les lignes de mode de paiement qui sont rappelées avec la commande comprennent le nom du connecteur de paiement utilisé pour créer les autorisations associées à cette commande.</span><span class="sxs-lookup"><span data-stu-id="b0a1b-170">**Payment connector availability:** When an order is recalled, the payment tender lines that are recalled together with the order include the name of the payment connector that was used to create the authorizations that are associated with that order.</span></span> <span data-ttu-id="b0a1b-171">Lorsque la commande est exécutée, le kit de développement logiciel (SDK) des paiements essaie d'utiliser le même connecteur que celui utilisé pour créer l'autorisation d'origine.</span><span class="sxs-lookup"><span data-stu-id="b0a1b-171">When the order is fulfilled, the Payments SDK tries to use the same connector that was used to create the original authorization.</span></span> <span data-ttu-id="b0a1b-172">Par conséquent, un connecteur de paiement ayant les propriétés du même marchand doit être disponible pour la capture.</span><span class="sxs-lookup"><span data-stu-id="b0a1b-172">Therefore, a payment connector that has the same merchant properties must be available for capture.</span></span> 
- <span data-ttu-id="b0a1b-173">**Types de carte :** Pour que les scénarios omnicanaux fonctionnent correctement, chaque canal doit avoir le même paramétrage pour les modes de paiement qui peuvent être utilisés pour l'omnicanal.</span><span class="sxs-lookup"><span data-stu-id="b0a1b-173">**Card types:** For omni-channel scenarios to work properly, each channel must have the same setup for tender types that can be used for omni-channel.</span></span> <span data-ttu-id="b0a1b-174">Ce paramétrage comprend des ID mode de paiement et des ID de type de carte.</span><span class="sxs-lookup"><span data-stu-id="b0a1b-174">This setup includes payment method IDs and card type IDs.</span></span> <span data-ttu-id="b0a1b-175">Par exemple, si le mode de paiement **Cartes** a un ID de **2** dans le paramétrage du magasin en ligne, il doit avoir le même ID dans le paramétrage du magasin de vente au détail.</span><span class="sxs-lookup"><span data-stu-id="b0a1b-175">For example, if the **Cards** tender type has an ID of **2** in the online store setup, it should have the same ID in the retail store setup.</span></span> <span data-ttu-id="b0a1b-176">La même condition préalable s'applique aux ID de type de carte.</span><span class="sxs-lookup"><span data-stu-id="b0a1b-176">The same requirement applies to card type IDs.</span></span> <span data-ttu-id="b0a1b-177">Si le numéro de carte **12** est défini sur **VISA** dans le magasin en ligne, le même ID doit être paramétré pour le magasin de vente au détail.</span><span class="sxs-lookup"><span data-stu-id="b0a1b-177">If card number **12** is set to **VISA** in the online store, the same ID should be set up for the retail store.</span></span> 

### <a name="basic-principle-supporting-omni-channel-payments"></a><span data-ttu-id="b0a1b-178">Principe de base prenant en charge des paiements omnicanaux</span><span class="sxs-lookup"><span data-stu-id="b0a1b-178">Basic principle supporting omni-channel payments</span></span>

<span data-ttu-id="b0a1b-179">Les connecteurs de paiement et les processeurs de paiements utilisent les jetons, ou références, pour référencer les interactions relatives aux paiements par carte.</span><span class="sxs-lookup"><span data-stu-id="b0a1b-179">Payment connectors and payment processors use tokens, or references, to reference interactions that are related to card payments.</span></span> <span data-ttu-id="b0a1b-180">Par exemple, lorsqu'une autorisation de paiement est demandée, une référence de cette autorisation est fournie.</span><span class="sxs-lookup"><span data-stu-id="b0a1b-180">For example, when a payment authorization is requested, a reference to that authorization is provided.</span></span> <span data-ttu-id="b0a1b-181">Par conséquent, l'autorisation peut être référencée par la suite, lorsque les fonds sont capturés au moment de l'exécution.</span><span class="sxs-lookup"><span data-stu-id="b0a1b-181">Therefore, the authorization can be referenced later, when funds are captured at the time of fulfillment.</span></span> <span data-ttu-id="b0a1b-182">Cette autorisation est unique au marchand, au connecteur de paiement, et au processeur.</span><span class="sxs-lookup"><span data-stu-id="b0a1b-182">This authorization is unique to the merchant, payment connector, and processor.</span></span> 

<span data-ttu-id="b0a1b-183">Si une commande créée en ligne est prélevée en magasin, les mêmes informations de paiement pour cette commande doivent être rappelés et utilisés.</span><span class="sxs-lookup"><span data-stu-id="b0a1b-183">If an order that was created online is being picked up in the store, the same payment details for that order must be recalled and used.</span></span> <span data-ttu-id="b0a1b-184">Lorsque les informations d'origine sont fournis dans le cadre de la demande de capture d'un paiement par rapport à l'autorisation d'origine, le processeur de paiement peut traiter la demande et capturer le paiement.</span><span class="sxs-lookup"><span data-stu-id="b0a1b-184">When the original details are provided as part of the request to capture a payment against the original authorization, the payment processor will be able to handle the request and capture the payment.</span></span> 

<span data-ttu-id="b0a1b-185">Pour référencer correctement la commande en ligne, un connecteur de paiement « carte absente » qui prend en charge le même processeur doit également être disponible.</span><span class="sxs-lookup"><span data-stu-id="b0a1b-185">To correctly reference the online order, a "card not present" payment connector that supports the same processor must also be available.</span></span> <span data-ttu-id="b0a1b-186">Ainsi, le système POS peut avoir un processeur pour les paiements « carte présente », mais il peut également avoir accès à d'autres connecteurs de paiement pour qu'il puisse exécuter les commandes créées dans d'autres canaux à l'aide de différents processeurs de paiements.</span><span class="sxs-lookup"><span data-stu-id="b0a1b-186">In this way, the POS system can have one processor for "card present" payments, but it can also have access to other payment connectors so that it can fulfill orders that are created in other channels by using different payment processors.</span></span> 

## <a name="supported-scenarios"></a><span data-ttu-id="b0a1b-187">Scénarios pris en charge</span><span class="sxs-lookup"><span data-stu-id="b0a1b-187">Supported scenarios</span></span>

<span data-ttu-id="b0a1b-188">Les scénarios de paiement omnicanaux suivants sont pris en charge :</span><span class="sxs-lookup"><span data-stu-id="b0a1b-188">The following omni-channel payment scenarios are supported:</span></span>

- <span data-ttu-id="b0a1b-189">Acheter en ligne, récupérer en magasin</span><span class="sxs-lookup"><span data-stu-id="b0a1b-189">Buy online, pick up in store</span></span>
- <span data-ttu-id="b0a1b-190">Acheter à un centre d'appels, retirer en magasin</span><span class="sxs-lookup"><span data-stu-id="b0a1b-190">Buy in call center, pick up in store</span></span>
- <span data-ttu-id="b0a1b-191">Acheter dans un magasin A, retirer dans un magasin B</span><span class="sxs-lookup"><span data-stu-id="b0a1b-191">Buy in store A, pick up in store B</span></span>
- <span data-ttu-id="b0a1b-192">Acheter dans un magasin A, expédier au client</span><span class="sxs-lookup"><span data-stu-id="b0a1b-192">Buy in store A, ship to customer</span></span>

<span data-ttu-id="b0a1b-193">Des variations de ces scénarios sont également prises en charge.</span><span class="sxs-lookup"><span data-stu-id="b0a1b-193">Variations of these scenarios are also supported.</span></span> <span data-ttu-id="b0a1b-194">Par exemple, une commande en ligne peut inclure des lignes qui seront expédiées au client et des lignes qui sont prélevées dans un magasin.</span><span class="sxs-lookup"><span data-stu-id="b0a1b-194">For example, an online order might include both lines that will be shipped to the customer and lines that will be picked up in a store.</span></span> <span data-ttu-id="b0a1b-195">Toutes les options d'exécution de commande sont prises en charge par les paiements omnicanaux.</span><span class="sxs-lookup"><span data-stu-id="b0a1b-195">All order fulfillment options are supported via omni-channel payments.</span></span> 

<span data-ttu-id="b0a1b-196">Les sections suivantes décrivent les étapes de chaque scénario et comment exécuter le scénario à l'aide de données de démonstration.</span><span class="sxs-lookup"><span data-stu-id="b0a1b-196">The following sections describe the steps for each scenario and show how to run the scenario by using demo data.</span></span> 

### <a name="buy-online-pick-up-in-store"></a><span data-ttu-id="b0a1b-197">Acheter en ligne, récupérer en magasin</span><span class="sxs-lookup"><span data-stu-id="b0a1b-197">Buy online, pick up in store</span></span>

<span data-ttu-id="b0a1b-198">Avant de commencer, vérifiez que les conditions préalables suivantes sont respectées :</span><span class="sxs-lookup"><span data-stu-id="b0a1b-198">Before you start, make sure that the following prerequisites are in place:</span></span>

- <span data-ttu-id="b0a1b-199">Vous avez un vitrine de référence où le connecteur Adyen est configuré.</span><span class="sxs-lookup"><span data-stu-id="b0a1b-199">You have a reference storefront where the Adyen connector is configured.</span></span>
- <span data-ttu-id="b0a1b-200">L'option **Paiements omnicanaux** sur la page **Paramètres partagés du commerce** est définie sur **True**.</span><span class="sxs-lookup"><span data-stu-id="b0a1b-200">The **Omni-channel payments** option on the **Commerce shared parameters** page is set to **True**.</span></span>
- <span data-ttu-id="b0a1b-201">Le connecteur de paiement Adyen est configuré pour la caisse enregistreuse du PDV de Houston.</span><span class="sxs-lookup"><span data-stu-id="b0a1b-201">The Adyen payment connector is configured for the Houston POS register.</span></span>

<span data-ttu-id="b0a1b-202">Procédez comme suit pour exécuter le scénario.</span><span class="sxs-lookup"><span data-stu-id="b0a1b-202">Follow these steps to run the scenario.</span></span>

1. <span data-ttu-id="b0a1b-203">Dans la vitrine de référence, créez une commande pour un prélèvement en magasin.</span><span class="sxs-lookup"><span data-stu-id="b0a1b-203">In the reference storefront, create an order for in-store pickup.</span></span> <span data-ttu-id="b0a1b-204">Assurez-vous de sélectionner le magasin **Houston**.</span><span class="sxs-lookup"><span data-stu-id="b0a1b-204">Be sure to select the **Houston** store.</span></span> 
2. <span data-ttu-id="b0a1b-205">Exécutez la procédure de paiement, et payez à l'aide d'un numéro de carte de crédit de test.</span><span class="sxs-lookup"><span data-stu-id="b0a1b-205">Go through the checkout steps, and pay by using a test credit card number.</span></span> <span data-ttu-id="b0a1b-206">Vous pouvez trouver des numéros de carte de crédit de test sur la [page de numéros de carte de test Adyen](https://docs.adyen.com/development-resources/test-cards/test-card-numbers/#description).</span><span class="sxs-lookup"><span data-stu-id="b0a1b-206">You can find test credit card numbers on the [Adyen test card numbers page](https://docs.adyen.com/development-resources/test-cards/test-card-numbers/#description).</span></span>
3. <span data-ttu-id="b0a1b-207">Dans Commerce, utilisez le traitement par lots **Synchroniser les commandes** et le programme de distribution **P-001** pour créer des commandes dans le back-office.</span><span class="sxs-lookup"><span data-stu-id="b0a1b-207">In Commerce, use the **Synchronize orders** batch job and the **P-001** distribution schedule to create the orders in the back office.</span></span>
4. <span data-ttu-id="b0a1b-208">Dans le PDV, sur la page d'accueil, sélectionnez l'opération **Commandes à prélever** pour afficher les commandes à prélever en magasin.</span><span class="sxs-lookup"><span data-stu-id="b0a1b-208">In the POS, on the welcome page, select the **Orders to pickup** operation to see the orders for in-store pickup.</span></span> 
5. <span data-ttu-id="b0a1b-209">Sélectionnez une ou plusieurs lignes de la commande créé dans la vitrine de référence, puis sélectionnez **Prélever**.</span><span class="sxs-lookup"><span data-stu-id="b0a1b-209">Select one or more lines from the order that was created in the reference storefront, and then select **Pick up**.</span></span>

    <span data-ttu-id="b0a1b-210">La commande est extraite du back-office.</span><span class="sxs-lookup"><span data-stu-id="b0a1b-210">The order is retrieved from the back office.</span></span> 

6. <span data-ttu-id="b0a1b-211">Lorsque les détails de la ligne de commande sont extraits du back-office, et qu'un paiement par carte pouvant être utilisé pour l'omnicanal est détecté, vous êtes informé qu'un mode de paiement est disponible.</span><span class="sxs-lookup"><span data-stu-id="b0a1b-211">When the order line details are retrieved from the back office, and a card payment that can be used for omni-channel is detected, you're informed that a payment method is available.</span></span>
7. <span data-ttu-id="b0a1b-212">Sélectionnez **Utiliser le mode de paiement disponible** pour terminer la transaction à l'aide des informations de carte entrés dans la vitrine de référence.</span><span class="sxs-lookup"><span data-stu-id="b0a1b-212">Select **Use available payment method** to complete the transaction by using the card details that were entered in the reference storefront.</span></span>

    <span data-ttu-id="b0a1b-213">Les lignes de commande sont chargées sur la page de la transaction, et le solde dû est de 0 (zéro).</span><span class="sxs-lookup"><span data-stu-id="b0a1b-213">The order lines are loaded on the transaction page, and the balance due is 0 (zero).</span></span> 

8. <span data-ttu-id="b0a1b-214">Sélectionnez l'onglet **Paiements** pour afficher la ligne de mode paiement qui a été extraite de la commande en ligne.</span><span class="sxs-lookup"><span data-stu-id="b0a1b-214">Select the **Payments** tab to view the tender line that was pulled from the online order.</span></span> 
9. <span data-ttu-id="b0a1b-215">Sélectionnez un mode de paiement pour terminer la transaction.</span><span class="sxs-lookup"><span data-stu-id="b0a1b-215">Select any payment method to complete the transaction.</span></span> 

### <a name="buy-in-call-center-pick-up-in-store"></a><span data-ttu-id="b0a1b-216">Acheter à un centre d'appels, retirer en magasin</span><span class="sxs-lookup"><span data-stu-id="b0a1b-216">Buy in call center, pick up in store</span></span>

1. <span data-ttu-id="b0a1b-217">Dans Commerce, sur la page **Service client**, saisissez **Karen Berg** dans la barre de recherche, puis sélectionnez **Rechercher**.</span><span class="sxs-lookup"><span data-stu-id="b0a1b-217">In Commerce, on the **Customer service** page, enter **Karen Berg** in the search bar, and then select **Search**.</span></span> 
3. <span data-ttu-id="b0a1b-218">Sélectionnez **Karen Berg** dans les résultats de la recherche.</span><span class="sxs-lookup"><span data-stu-id="b0a1b-218">Select **Karen Berg** in the search results.</span></span>
4. <span data-ttu-id="b0a1b-219">Une fois Karen chargée sur la page **Service client**, sélectionnez **Nouvelle commande client**.</span><span class="sxs-lookup"><span data-stu-id="b0a1b-219">After Karen is loaded onto the **Customer service** page, select **New sales order**.</span></span>
5. <span data-ttu-id="b0a1b-220">Sur la nouvelle page de commande client, sélectionnez **En-tête** pour afficher l'en-tête de commande.</span><span class="sxs-lookup"><span data-stu-id="b0a1b-220">On the new sales order page, select **Header** to view the order header.</span></span> 
6. <span data-ttu-id="b0a1b-221">Sur la page **En-tête de commande**, définissez le site sur **Central** et l'entrepôt sur **Houston**.</span><span class="sxs-lookup"><span data-stu-id="b0a1b-221">On the **Order header** page, set the site to **Central** and the warehouse to **Houston**.</span></span>
7. <span data-ttu-id="b0a1b-222">Sous l'onglet **Livrer**, définissez le champ **Mode de livraison** sur **60** pour le prélèvement client.</span><span class="sxs-lookup"><span data-stu-id="b0a1b-222">On the **Deliver** tab, set the **Mode of delivery** field to **60** for customer pickup.</span></span>
8. <span data-ttu-id="b0a1b-223">Sélectionnez **Lignes**, puis ajoutez une ou plusieurs lignes à la commande.</span><span class="sxs-lookup"><span data-stu-id="b0a1b-223">Select **Lines**, and then add one or more lines to the order.</span></span> 
9. <span data-ttu-id="b0a1b-224">Sélectionnez **Terminer** pour entrer le flux d'achèvement de la commande.</span><span class="sxs-lookup"><span data-stu-id="b0a1b-224">Select **Complete** to enter the order completion flow.</span></span>
10. <span data-ttu-id="b0a1b-225">Faites défiler l'écran vers la section des paiements, sélectionnez **Ajouter**, puis sélectionnez une ligne sur laquelle le mode de paiement est défini sur **Cartes**.</span><span class="sxs-lookup"><span data-stu-id="b0a1b-225">Scroll down to the payments section, select **Add**, and then select a line where the payment method type is set to **Cards**.</span></span> 
11. <span data-ttu-id="b0a1b-226">Sélectionnez le signe plus (**+**) pour ajouter un paiement par carte.</span><span class="sxs-lookup"><span data-stu-id="b0a1b-226">Select the plus sign (**+**) to add a card payment.</span></span> 
12. <span data-ttu-id="b0a1b-227">Entrez les détails d'un numéro de carte de crédit de test que vous avez trouvé sur la [page de numéros de carte de test Adyen](https://docs.adyen.com/development-resources/test-cards/test-card-numbers/#description), puis sélectionnez **OK**.</span><span class="sxs-lookup"><span data-stu-id="b0a1b-227">Enter the details for a test credit card number that you found on the [Adyen test card numbers page](https://docs.adyen.com/development-resources/test-cards/test-card-numbers/#description), and then select **OK**.</span></span>

    > [!NOTE]
    > <span data-ttu-id="b0a1b-228">Si la marque de carte du numéro de carte entré diffère de la marque sélectionnée lorsque le paiement a été initié, le paiement s'effectuera quand même.</span><span class="sxs-lookup"><span data-stu-id="b0a1b-228">If the card brand for the card number that you entered differs from the brand that was selected when the payment was initiated, the payment will still go through.</span></span> <span data-ttu-id="b0a1b-229">Toutefois, il sera validé dans les comptes qui sont mis en correspondance avec la marque de carte sélectionnée à l'étape 10.</span><span class="sxs-lookup"><span data-stu-id="b0a1b-229">However, it will be posted to the accounts that are mapped to the card brand that you selected in step 10.</span></span>

12. <span data-ttu-id="b0a1b-230">Sélectionnez **OK** de nouveau pour fermer la boîte de dialogue **Paiements d'achèvement de commande**.</span><span class="sxs-lookup"><span data-stu-id="b0a1b-230">Select **OK** again to close the **Order completion payments** dialog box.</span></span>
13. <span data-ttu-id="b0a1b-231">Sur la page **Résumé de la commande client**, sélectionnez **Soumettre**.</span><span class="sxs-lookup"><span data-stu-id="b0a1b-231">On the **Sales order summary** page, select **Submit**.</span></span>
14. <span data-ttu-id="b0a1b-232">Dans le PDV, sur la page d'accueil, sélectionnez l'opération **Commandes à prélever** pour afficher les commandes à prélever en magasin.</span><span class="sxs-lookup"><span data-stu-id="b0a1b-232">In the POS, on the welcome page, select the **Orders to pickup** operation to see the orders for in-store pickup.</span></span> 
15. <span data-ttu-id="b0a1b-233">Sélectionnez une ou plusieurs lignes de la commande créé dans la vitrine de référence, puis sélectionnez **Prélever**.</span><span class="sxs-lookup"><span data-stu-id="b0a1b-233">Select one or more lines from the order that was created in the reference storefront, and then select **Pick up**.</span></span>

    <span data-ttu-id="b0a1b-234">La commande est extraite du back-office.</span><span class="sxs-lookup"><span data-stu-id="b0a1b-234">The order is retrieved from the back office.</span></span> 

16. <span data-ttu-id="b0a1b-235">Lorsque les détails de la ligne de commande sont extraits du back-office, et qu'un paiement par carte pouvant être utilisé pour l'omnicanal est détecté, vous êtes informé qu'un mode de paiement est disponible.</span><span class="sxs-lookup"><span data-stu-id="b0a1b-235">When the order line details are retrieved from the back office, and a card payment that can be used for omni-channel is detected, you're informed that a payment method is available.</span></span>
17. <span data-ttu-id="b0a1b-236">Sélectionnez **Utiliser le mode de paiement disponible** pour terminer la transaction à l'aide des informations de carte entrés dans la vitrine de référence.</span><span class="sxs-lookup"><span data-stu-id="b0a1b-236">Select **Use available payment method** to complete the transaction by using the card details that were entered in the reference storefront.</span></span>

    <span data-ttu-id="b0a1b-237">Les lignes de commande sont chargées sur la page de la transaction, et le solde dû est de 0 (zéro).</span><span class="sxs-lookup"><span data-stu-id="b0a1b-237">The order lines are loaded on the transaction page, and the balance due is 0 (zero).</span></span>

18. <span data-ttu-id="b0a1b-238">Sélectionnez l'onglet **Paiements** pour afficher la ligne de mode paiement qui a été extraite de la commande en ligne.</span><span class="sxs-lookup"><span data-stu-id="b0a1b-238">Select the **Payments** tab to view the tender line that was pulled from the online order.</span></span> 
19. <span data-ttu-id="b0a1b-239">Sélectionnez un mode de paiement pour terminer la transaction.</span><span class="sxs-lookup"><span data-stu-id="b0a1b-239">Select any payment method to complete the transaction.</span></span> 

### <a name="buy-in-store-a-pick-up-in-store-b"></a><span data-ttu-id="b0a1b-240">Acheter dans un magasin A, retirer dans un magasin B</span><span class="sxs-lookup"><span data-stu-id="b0a1b-240">Buy in store A, pick up in store B</span></span>

1. <span data-ttu-id="b0a1b-241">Démarrez le POS pour le magasin de Houston.</span><span class="sxs-lookup"><span data-stu-id="b0a1b-241">Start the POS for the Houston store.</span></span>
2. <span data-ttu-id="b0a1b-242">Sur la page **Transaction**, ajoutez Karen Berg à la transaction à l'aide du pavé numérique pour entrer **2001**.</span><span class="sxs-lookup"><span data-stu-id="b0a1b-242">On the **Transaction** page, add Karen Berg to the transaction by using the number pad to enter **2001**.</span></span>
3. <span data-ttu-id="b0a1b-243">Ajoutez une ou plusieurs ligne à la transaction.</span><span class="sxs-lookup"><span data-stu-id="b0a1b-243">Add one or more lines to the transaction.</span></span>
4. <span data-ttu-id="b0a1b-244">Sélectionnez **Commandes** pour afficher les options de commande.</span><span class="sxs-lookup"><span data-stu-id="b0a1b-244">Select **Orders** to see the order options.</span></span>
5. <span data-ttu-id="b0a1b-245">Sélectionnez **Prélever tout** et, lorsque vous y êtes invité, sélectionnez **Commande client**.</span><span class="sxs-lookup"><span data-stu-id="b0a1b-245">Select **Pick up all**, and then, when you're prompted, select **Customer order**.</span></span>
6. <span data-ttu-id="b0a1b-246">Dans la barre de recherche, entrez **Seattle**, puis sélectionnez le magasin de **Seattle** pour le prélèvement.</span><span class="sxs-lookup"><span data-stu-id="b0a1b-246">In the search bar, enter **Seattle**, and then select the **Seattle** store for pickup.</span></span> 
7. <span data-ttu-id="b0a1b-247">Sélectionnez **OK** pour accepter la date actuelle comme date de prélèvement.</span><span class="sxs-lookup"><span data-stu-id="b0a1b-247">Select **OK** to accept the current date as the date of pickup.</span></span>
9. <span data-ttu-id="b0a1b-248">Sélectionner **Carte de paiement** pour initier le paiement.</span><span class="sxs-lookup"><span data-stu-id="b0a1b-248">Select **Pay card** to initiate the payment.</span></span>
10. <span data-ttu-id="b0a1b-249">Entrez le paiement par carte pour le montant dû pour l'acompte.</span><span class="sxs-lookup"><span data-stu-id="b0a1b-249">Tender the card payment for the amount that is due for the deposit.</span></span> 
11. <span data-ttu-id="b0a1b-250">Terminez le paiement de l'acompte sur le terminal de paiement.</span><span class="sxs-lookup"><span data-stu-id="b0a1b-250">Complete the deposit payment on the payment terminal.</span></span> 
12. <span data-ttu-id="b0a1b-251">Une fois l'acompte payé, sélectionnez l'option pour utiliser la même carte pour l'exécution, et attendez que la commande soit terminée.</span><span class="sxs-lookup"><span data-stu-id="b0a1b-251">After the deposit is paid, select the option to use the same card for fulfillment, and wait for the order to be completed.</span></span> 
13. <span data-ttu-id="b0a1b-252">Démarrez le POS pour le magasin de Seattle.</span><span class="sxs-lookup"><span data-stu-id="b0a1b-252">Start the POS for the Seattle store.</span></span>
14. <span data-ttu-id="b0a1b-253">Dans le PDV, sur la page d'accueil, sélectionnez l'opération **Commandes à prélever** pour afficher les commandes à prélever en magasin.</span><span class="sxs-lookup"><span data-stu-id="b0a1b-253">In the POS, on the welcome page, select the **Orders to pickup** operation to see the orders for in-store pickup.</span></span> 
15. <span data-ttu-id="b0a1b-254">Sélectionnez une ou plusieurs lignes de la commande créé dans la vitrine de référence, puis sélectionnez **Prélever**.</span><span class="sxs-lookup"><span data-stu-id="b0a1b-254">Select one or more lines from the order that was created in the reference storefront, and then select **Pick up**.</span></span>

    <span data-ttu-id="b0a1b-255">La commande est extraite du back-office.</span><span class="sxs-lookup"><span data-stu-id="b0a1b-255">The order is retrieved from the back office.</span></span> 

16. <span data-ttu-id="b0a1b-256">Lorsque les détails de la ligne de commande sont extraits du back-office, et qu'un paiement par carte pouvant être utilisé pour l'omnicanal est détecté, vous êtes informé qu'un mode de paiement est disponible.</span><span class="sxs-lookup"><span data-stu-id="b0a1b-256">When the order line details are retrieved from the back office, and a card payment that can be used for omni-channel is detected, you're informed that a payment method is available.</span></span>
17. <span data-ttu-id="b0a1b-257">Sélectionnez **Utiliser le mode de paiement disponible** pour terminer la transaction à l'aide des informations de carte entrés dans la vitrine de référence.</span><span class="sxs-lookup"><span data-stu-id="b0a1b-257">Select **Use available payment method** to complete the transaction by using the card details that were entered in the reference storefront.</span></span>

    <span data-ttu-id="b0a1b-258">Les lignes de commande sont chargées sur la page de la transaction, et le solde dû est de 0 (zéro).</span><span class="sxs-lookup"><span data-stu-id="b0a1b-258">The order lines are loaded on the transaction page, and the balance due is 0 (zero).</span></span>

18. <span data-ttu-id="b0a1b-259">Sélectionnez l'onglet **Paiements** pour afficher la ligne de mode paiement qui a été extraite de la commande en ligne.</span><span class="sxs-lookup"><span data-stu-id="b0a1b-259">Select the **Payments** tab to view the tender line that was pulled from the online order.</span></span> 
19. <span data-ttu-id="b0a1b-260">Sélectionnez un mode de paiement pour terminer la transaction.</span><span class="sxs-lookup"><span data-stu-id="b0a1b-260">Select any payment method to complete the transaction.</span></span> 

### <a name="buy-in-store-a-ship-to-customer"></a><span data-ttu-id="b0a1b-261">Acheter dans un magasin A, expédier au client</span><span class="sxs-lookup"><span data-stu-id="b0a1b-261">Buy in store A, ship to customer</span></span>

1. <span data-ttu-id="b0a1b-262">Démarrez le POS pour le magasin de Houston.</span><span class="sxs-lookup"><span data-stu-id="b0a1b-262">Start the POS for the Houston store.</span></span>
2. <span data-ttu-id="b0a1b-263">Sur la page **Transaction**, ajoutez Karen Berg à la transaction à l'aide du pavé numérique pour entrer **2001**.</span><span class="sxs-lookup"><span data-stu-id="b0a1b-263">On the **Transaction** page, add Karen Berg to the transaction by using the number pad to enter **2001**.</span></span>
3. <span data-ttu-id="b0a1b-264">Ajoutez une ou plusieurs ligne à la transaction.</span><span class="sxs-lookup"><span data-stu-id="b0a1b-264">Add one or more lines to the transaction.</span></span>
4. <span data-ttu-id="b0a1b-265">Sélectionnez **Commandes** pour afficher les options de commande.</span><span class="sxs-lookup"><span data-stu-id="b0a1b-265">Select **Orders** to see the order options.</span></span>
5. <span data-ttu-id="b0a1b-266">Sélectionnez **Prélever tout** et, lorsque vous y êtes invité, sélectionnez **Commande client**.</span><span class="sxs-lookup"><span data-stu-id="b0a1b-266">Select **Pick up all**, and then, when you're prompted, select **Customer order**.</span></span>
6. <span data-ttu-id="b0a1b-267">Dans la barre de recherche, entrez **Seattle**, puis sélectionnez le magasin de **Seattle** pour le prélèvement.</span><span class="sxs-lookup"><span data-stu-id="b0a1b-267">In the search bar, enter **Seattle**, and then select the **Seattle** store for pickup.</span></span> 
7. <span data-ttu-id="b0a1b-268">Sélectionnez **OK** pour accepter la date actuelle comme date de prélèvement.</span><span class="sxs-lookup"><span data-stu-id="b0a1b-268">Select **OK** to accept the current date as the date of pickup.</span></span>
8. <span data-ttu-id="b0a1b-269">Sélectionner **Carte de paiement** pour initier le paiement.</span><span class="sxs-lookup"><span data-stu-id="b0a1b-269">Select **Pay card** to initiate the payment.</span></span>
9. <span data-ttu-id="b0a1b-270">Entrez le paiement par carte pour le montant dû pour l'acompte.</span><span class="sxs-lookup"><span data-stu-id="b0a1b-270">Tender the card payment for the amount that is due for the deposit.</span></span> 
10. <span data-ttu-id="b0a1b-271">Terminez le paiement de l'acompte sur le terminal de paiement.</span><span class="sxs-lookup"><span data-stu-id="b0a1b-271">Complete the deposit payment on the payment terminal.</span></span> 
11. <span data-ttu-id="b0a1b-272">Une fois l'acompte payé, sélectionnez l'option pour utiliser la même carte pour l'exécution, et attendez que la commande soit terminée.</span><span class="sxs-lookup"><span data-stu-id="b0a1b-272">After the deposit is paid, select the option to use the same card for fulfillment, and wait for the order to be completed.</span></span>

<span data-ttu-id="b0a1b-273">Lorsque la commande est prélevée, emballée et facturée dans le back-office, les détails de paiement fournis dans le système POS sont utilisés pour capturer les fonds pour les marchandises expédiées au client.</span><span class="sxs-lookup"><span data-stu-id="b0a1b-273">When the order is picked, packed, and invoiced in the back office, the payment details that are provided at the POS will be used to capture the funds for the goods that are being shipped to the customer.</span></span> 

## <a name="scenario-details"></a><span data-ttu-id="b0a1b-274">Détails du scénario</span><span class="sxs-lookup"><span data-stu-id="b0a1b-274">Scenario details</span></span>

<span data-ttu-id="b0a1b-275">Outre les scénarios de base qui viennent d'être décrits, plusieurs améliorations ont été apportées au Kit de développement logiciel (SDK) de paiement pour prendre en charge les paiements omnicanaux.</span><span class="sxs-lookup"><span data-stu-id="b0a1b-275">In addition to the basic scenarios that were just described, several enhancements have been made to the Payments SDK to support omni-channel payments.</span></span> 

### <a name="pos"></a><span data-ttu-id="b0a1b-276">PDV</span><span class="sxs-lookup"><span data-stu-id="b0a1b-276">POS</span></span>

#### <a name="single-swipedip-for-customer-orders"></a><span data-ttu-id="b0a1b-277">Passage/insertion de carte uniques pour les commandes client</span><span class="sxs-lookup"><span data-stu-id="b0a1b-277">Single swipe/dip for customer orders</span></span>

<span data-ttu-id="b0a1b-278">Avant la mise en œuvre de la fonctionnalité de paiements omnicanaux, lorsque des commandes client incluant des acomptes étaient créées dans le système POS, les clients devaient faire passer leur (ou insérer) leur carte deux fois : une fois pour payer l'acompte et une fois pour utiliser le jeton de la carte pour l'exécution suivante de la commande.</span><span class="sxs-lookup"><span data-stu-id="b0a1b-278">Before the omni-channel payments feature was implemented, when customer orders that included deposits were created at the POS, customers were required to swipe (or dip) their card two times: one time to pay the deposit and one time to tokenize the card for subsequent order fulfillment.</span></span> <span data-ttu-id="b0a1b-279">Lorsque la fonctionnalité d'utilisation de jeton omnicanal est activée, les clients doivent passer leur carte une seule fois pour payer l'acompte et autoriser le montant dû pour les marchandises qui seront exécutées ultérieurement.</span><span class="sxs-lookup"><span data-stu-id="b0a1b-279">When the omni-channel tokenization feature is turned on, customers must swipe their card only one time to both pay the deposit and authorize the amount that is due for goods that will be fulfilled later.</span></span> <span data-ttu-id="b0a1b-280">Lors de l'achèvement, les fonds autorisés sont capturés.</span><span class="sxs-lookup"><span data-stu-id="b0a1b-280">At the time of fulfillment, the authorized funds are captured.</span></span> <span data-ttu-id="b0a1b-281">Avant la mise en œuvre de la fonctionnalité d'utilisation du jeton omnicanal, seul un jeton de carte récurrent était créé pour l'exécution consécutive de la commande.</span><span class="sxs-lookup"><span data-stu-id="b0a1b-281">Before the omni-channel tokenization feature was implemented, only a recurring card token was created for subsequent order fulfillment.</span></span> <span data-ttu-id="b0a1b-282">Par conséquent, les fonds pour l'exécution en attente n'étaient autorisés, et comme ces fonds n'étaient pas conservés pour cet achat spécifique, il était moins probable qu'ils pourraient être capturés ultérieurement.</span><span class="sxs-lookup"><span data-stu-id="b0a1b-282">Therefore, the funds for the pending fulfillment weren't authorized, and because those funds weren't being held for that specific purchase, it was less likely that they could be captured later.</span></span>

> [!NOTE]
> <span data-ttu-id="b0a1b-283">Le passage de carte seul n'est pas pris en charge dans la version 8.1.3 de Retail.</span><span class="sxs-lookup"><span data-stu-id="b0a1b-283">Single swipe isn't supported in Retail version 8.1.3.</span></span> <span data-ttu-id="b0a1b-284">Les commandes client dans la version 8.1.3 utilisent le même flux que celui utilisé avant la mise en œuvre de la fonctionnalité d'utilisation de jeton omnicanal.</span><span class="sxs-lookup"><span data-stu-id="b0a1b-284">Customer orders in version 8.1.3 use the same flow that was used before the omni-channel tokenization feature was implemented.</span></span> 

### <a name="cards-that-cant-issue-recurring-card-tokens"></a><span data-ttu-id="b0a1b-285">Cartes qui ne peuvent pas émettre de jetons de carte récurrents</span><span class="sxs-lookup"><span data-stu-id="b0a1b-285">Cards that can't issue recurring card tokens</span></span>

<span data-ttu-id="b0a1b-286">Certains cartes ne peuvent pas être utilisées pour les paiements omnicanaux, car elles ne prennent pas en charge l'émission de jetons de carte récurrents.</span><span class="sxs-lookup"><span data-stu-id="b0a1b-286">Some cards can't be used for omni-channel payments, because they don't support issuing recurring card tokens.</span></span> <span data-ttu-id="b0a1b-287">Lorsqu'une commande est créée dans le POS, si l'acompte est payé à l'aide d'une carte qui ne prend pas en charge les jetons de carte récurrents, le flux d'utilisation de jeton de carte précédent est utilisé.</span><span class="sxs-lookup"><span data-stu-id="b0a1b-287">When an order is created at the POS, if the deposit is paid by using a card that doesn't support recurring card tokens, the previous card tokenization flow is used.</span></span> <span data-ttu-id="b0a1b-288">Par conséquent, un client qui souhaite fournir un paiement qui sera utilisé pour l'exécution consécutive de la commande doit présenter une deuxième carte.</span><span class="sxs-lookup"><span data-stu-id="b0a1b-288">Therefore, a customer who wants to provide a payment that will be used for subsequent order fulfillment must present a second card.</span></span> <span data-ttu-id="b0a1b-289">Si la deuxième carte ne prend pas en charge les jetons de carte récurrents, l'action d'utilisation de jeton est refusée, et le caissier est invité à demander au client de fournir une autre carte.</span><span class="sxs-lookup"><span data-stu-id="b0a1b-289">If the second card doesn't support recurring card tokens, the tokenization action will be declined, and the cashier will be prompted to ask the customer to provide a different card.</span></span> 

### <a name="using-a-different-card"></a><span data-ttu-id="b0a1b-290">Utilisation d'une autre carte</span><span class="sxs-lookup"><span data-stu-id="b0a1b-290">Using a different card</span></span>

<span data-ttu-id="b0a1b-291">Un client qui vient au magasin pour prélever une commande a la possibilité d'utiliser une autre carte.</span><span class="sxs-lookup"><span data-stu-id="b0a1b-291">A customer who comes to the store for order pickup has the option to use a different card.</span></span> <span data-ttu-id="b0a1b-292">Lorsque le caissier reçoit l'invite **Utiliser un mode de paiement disponible** au moment du prélèvement de la commande, il peut demander si le client veut utiliser la même carte.</span><span class="sxs-lookup"><span data-stu-id="b0a1b-292">When the cashier receives the **Use available payment method** prompt at the time of order pickup, he or she can ask whether the customer wants to use the same card.</span></span> <span data-ttu-id="b0a1b-293">Si le client a perdu la carte utilisée pour créer la commande et souhaite payer celle-ci avec une autre carte, le caissier peut sélectionner **Utiliser un autre mode de paiement**.</span><span class="sxs-lookup"><span data-stu-id="b0a1b-293">If the customer has lost the card that was used to create the order and wants to pay for the order by using a different card, the cashier can select **Use a different payment method**.</span></span> <span data-ttu-id="b0a1b-294">Si le client revient plus tard pour prélever des articles supplémentaires pour la même commande, si l'autorisation de carte d'origine reste valide, le caissier peut de nouveau demander si le client veut utiliser cette carte.</span><span class="sxs-lookup"><span data-stu-id="b0a1b-294">If the customer comes back later to pick up more items for the same order, if the original card authorization is still valid, the cashier can again ask whether the customer wants to use that card.</span></span>

### <a name="invalid-authorizations"></a><span data-ttu-id="b0a1b-295">Autorisations non valides</span><span class="sxs-lookup"><span data-stu-id="b0a1b-295">Invalid authorizations</span></span>

<span data-ttu-id="b0a1b-296">Si la carte utilisée pour créer une commande n'est plus valide, lorsque des produits sont sélectionnés pour un prélèvement, la demande de capture de paiement échoue.</span><span class="sxs-lookup"><span data-stu-id="b0a1b-296">If the card that was used to create an order is no longer valid, when products are selected for pickup, the payment capture request will fail.</span></span> <span data-ttu-id="b0a1b-297">Le connecteur de paiement POS essaie ensuite de créer une autorisation et de capturer à l'aide des mêmes informations de carte.</span><span class="sxs-lookup"><span data-stu-id="b0a1b-297">The POS payment connector will then try to create a new authorization and capture by using the same card details.</span></span> <span data-ttu-id="b0a1b-298">Si la nouvelle autorisation ou capture échoue, le caissier est informé que le paiement ne peut pas être traité.</span><span class="sxs-lookup"><span data-stu-id="b0a1b-298">If the new authorization or capture fails, the cashier will be informed that the payment could not be processed.</span></span> <span data-ttu-id="b0a1b-299">Le caissier doit alors obtenir un nouveau paiement du client.</span><span class="sxs-lookup"><span data-stu-id="b0a1b-299">The cashier must then get a new payment from the customer.</span></span> 

### <a name="multiple-available-payments"></a><span data-ttu-id="b0a1b-300">Plusieurs paiements disponibles</span><span class="sxs-lookup"><span data-stu-id="b0a1b-300">Multiple available payments</span></span>

<span data-ttu-id="b0a1b-301">Lorsqu'une commande comporte plusieurs modes de paiement et que plusieurs lignes sont prélevées, le caissier reçoit d'abord l'invite **Utiliser le mode de paiement disponible**.</span><span class="sxs-lookup"><span data-stu-id="b0a1b-301">When an order that has multiple tenders and multiple lines is picked up, the cashier first receives the **Use available payment method** prompt.</span></span> <span data-ttu-id="b0a1b-302">S'il existe plusieurs cartes, lorsque le caissier sélectionne **Utiliser le mode de paiement disponible**, les lignes de mode de paiement par carte existantes sont capturées jusqu'à ce que le solde soit atteint pour les marchandises en cours de prélèvement.</span><span class="sxs-lookup"><span data-stu-id="b0a1b-302">If there are multiple cards, when the cashier selects **Use available payment method**, existing card tender lines will be captured until the balance is met for the goods that are currently being picked up.</span></span> <span data-ttu-id="b0a1b-303">Le caissier n'aura pas la possibilité de sélectionner la carte à utiliser pour les marchandises qui sont prélevées.</span><span class="sxs-lookup"><span data-stu-id="b0a1b-303">The cashier won't have the option to select the card that should be used for the goods that are being picked up.</span></span> 

## <a name="related-topics"></a><span data-ttu-id="b0a1b-304">Rubriques connexes</span><span class="sxs-lookup"><span data-stu-id="b0a1b-304">Related topics</span></span>

- [<span data-ttu-id="b0a1b-305">FAQ Paiements</span><span class="sxs-lookup"><span data-stu-id="b0a1b-305">Payments FAQ</span></span>](https://docs.microsoft.com/dynamics365/unified-operations/retail/dev-itpro/payments-retail)
- [<span data-ttu-id="b0a1b-306">Connecteur de paiement Dynamics 365 pour Adyen</span><span class="sxs-lookup"><span data-stu-id="b0a1b-306">Dynamics 365 Payment Connector for Adyen</span></span>](https://docs.microsoft.com/dynamics365/unified-operations/retail/dev-itpro/adyen-connector?tabs=8-1-3)
